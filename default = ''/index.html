<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"zhiyuanshi1901.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.12.2","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Zhiyuan Shi">
<meta property="og:url" content="https://zhiyuanshi1901.github.io/default%20=%20''/index.html">
<meta property="og:site_name" content="Zhiyuan Shi">
<meta property="og:locale" content="en_US">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://zhiyuanshi1901.github.io/default%20=%20''/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"default = ''/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Zhiyuan Shi</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Zhiyuan Shi</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">13</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">26</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">45</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ZhiyuanShi1901" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ZhiyuanShi1901" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:dshi78066@gmail.com" title="Personal E-Mail → mailto:dshi78066@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>Personal E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:1901030201@s.upc.edu.cn" title="Work E-Mail → mailto:1901030201@s.upc.edu.cn" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>Work E-Mail</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhiyuanshi1901.github.io/2023/01/23/Fortran%E5%88%9D%E6%8E%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/23/Fortran%E5%88%9D%E6%8E%A2/" class="post-title-link" itemprop="url">Fortran初探</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2023-01-23 21:26:55 / Modified: 21:44:32" itemprop="dateCreated datePublished" datetime="2023-01-23T21:26:55+08:00">2023-01-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>1、[Fortran权威指南&#x2F;(英)奇弗斯(Chivers,I.),(英)斯莱索尔姆(Sleightholme,J.)著；陈宝国等译.–北京：人民邮电出版社，2009.10]</p>
<p>2、<a target="_blank" rel="noopener" href="https://www.yiibai.com/fortran/fortran_basic_input_output.html">https://www.yiibai.com/fortran/fortran_basic_input_output.html</a></p>
<p>3、[Fortran 程序设计：第四版&#x2F;（美）史蒂芬·查普曼著；王志强等译.-北京：中国电力出版社，2018.10（2022.8重印）]</p>
<h1 id="基础内容"><a href="#基础内容" class="headerlink" title="基础内容"></a>基础内容</h1><p>！ 作为注释标记</p>
<h2 id="Fortran规则："><a href="#Fortran规则：" class="headerlink" title="Fortran规则："></a>Fortran规则：</h2><ul>
<li>自由源格式</li>
<li>不区分大小写</li>
<li>存在语句顺序<ul>
<li>PROGRAM</li>
<li>类型声明语句</li>
<li>处理与I&#x2F;O语句</li>
<li>END PROGRAM</li>
</ul>
</li>
<li>！用于引入注释</li>
<li>变量名称长度最多31字符，包括_</li>
<li>每行最多132个字符</li>
<li>最多可以允许39个连续行</li>
<li>如果不使用<code>IMPLICIT NONE</code>语句，则没有显式声明的变量被看成默认的类型。即：首个字符是A-H或O-Z，则默认为REAL型。若为I-N，则默认INTEGER型。</li>
</ul>
<h2 id="1、输出你的名字"><a href="#1、输出你的名字" class="headerlink" title="1、输出你的名字"></a>1、输出你的名字</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">PROGRAM ch0701      ！程序命名</span><br><span class="line">!</span><br><span class="line">! This program reads in and prints out a name</span><br><span class="line">!</span><br><span class="line">IMPLICIT NONE   ！ 表示使用的每个数据项的类型必须是显式的</span><br><span class="line">CHARACTER*20 :: First_Name ! 类型声明</span><br><span class="line">!</span><br><span class="line">	PRINT *,&#x27; Type in your first name.&#x27;     ！ 输出语句</span><br><span class="line">	PRINT *,&#x27; up to 20 characters&#x27;</span><br><span class="line">	READ *,First_Name       ！读取键盘输入的字符</span><br><span class="line">	PRINT *,First_Name</span><br><span class="line">!</span><br><span class="line">END PROGRAM ch0701   ！ 终止程序</span><br></pre></td></tr></table></figure>


<h2 id="2、计算平均值"><a href="#2、计算平均值" class="headerlink" title="2、计算平均值"></a>2、计算平均值</h2><p>遵循的原则：声明所有变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">PROGRAM ch0702   ！程序命名</span><br><span class="line">!</span><br><span class="line">! This program reads in three numbers and sums</span><br><span class="line">! and averages them</span><br><span class="line">!</span><br><span class="line"></span><br><span class="line">IMPLICIT NONE   ！ 表示使用的每个数据项的类型必须是显式的</span><br><span class="line">REAL :: N1,N2,N3,Average = 0.0,Total = 0.0</span><br><span class="line">INTEGER :: N = 3</span><br><span class="line">	PRINT *,&#x27; Type in three numbers.&#x27;</span><br><span class="line">	PRINT *,&#x27; Separated by spaces or commas&#x27;</span><br><span class="line">	READ *,N1,N2,N3</span><br><span class="line">	Total= N1 + N2 + N3   ! 三个变量值相加</span><br><span class="line">	AVERAGE=Total/N</span><br><span class="line">	PRINT *,&#x27;Average of the numbers is &#x27;,Average</span><br><span class="line">END PROGRAM ch0702</span><br></pre></td></tr></table></figure>

<h1 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h1><p>运算法则与C或Python相同，但是需要注意：</p>
<ul>
<li>求幂运算：从右往左的顺序</li>
<li>加减法：不需要注意运算顺序</li>
<li>乘法除法：非整型运算不一定按照从左到右的顺序，需要加括号保证顺序<br>注意：使用时加括号时最好的方式。</li>
</ul>
<h2 id="字符常数和变量"><a href="#字符常数和变量" class="headerlink" title="字符常数和变量"></a>字符常数和变量</h2><ul>
<li>显式变量：<br>需要定义<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INTEGER :: VAR1[,VAR2,VAR3]</span><br></pre></td></tr></table></figure></li>
<li>REAL 定义实型</li>
<li>INTEGER 定义整型</li>
<li>CHARACTER 定义字符型<br>字符型可以定义长度，缺省时为1。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CHARACTER(len=&lt;len&gt;) ::</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>注：实际上，‘::’是可选的。其有无不影响程序运行。存在的目的是为了兼容早期的Fortran。不过，::看起来有种独特的美感（某本教程的作者说它很可爱），所以还是加上。</strong></p>
<ul>
<li>默认式变量：i，j，k，l，m，n为开头的变量名为INTEGER整型；其他为REAL实型。</li>
</ul>
<p>常数定义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type,PARAMETER :: name=value [,name1=value1 ...]</span><br><span class="line">！例如</span><br><span class="line">real,parameter :: pi=3.1415926535</span><br></pre></td></tr></table></figure>

<p><strong>注：大写小写都可以。大写看起来好看，小写看起来更舒服（对于像我这样英语不好的人）。</strong></p>
<h1 id="运算-1"><a href="#运算-1" class="headerlink" title="运算"></a>运算</h1><ul>
<li>加：+</li>
<li>减：-</li>
<li>乘：*</li>
<li>除：&#x2F;</li>
<li>乘方：**</li>
</ul>
<p><strong>注意：整型运算最终结果也是整型！</strong><br><strong>注意：实型运算最终结果需要考虑精度！尤其是结果不是有限小数的情况</strong></p>
<h2 id="运算顺序"><a href="#运算顺序" class="headerlink" title="运算顺序"></a>运算顺序</h2><ul>
<li>圆括号优先。</li>
<li>从右到左做指数运算</li>
<li>从左到右做乘法和除法运算</li>
<li>从左到右做加法和减法运算</li>
</ul>
<p><strong>个人更喜欢多加括号。有些教程说熟练掌握，记住顺序。但是对于非计算机专业使用而言，加上括号的可读性更高，不需要纠结自己是否用对了。例如++i这种运算，个人认为十分“反人类”。</strong></p>
<h2 id="字符格式转换函数"><a href="#字符格式转换函数" class="headerlink" title="字符格式转换函数"></a>字符格式转换函数</h2><ul>
<li>INT(x) 实数-整数 截尾取整</li>
<li>NINT(x) 四舍五入取整</li>
<li>CEILING(x) 大于或等于x的最小整数</li>
<li>FLOOR(x) 小于或等于x的最大整数</li>
<li>REAL(X) 整数转化实数<br>前面即行x表示实数，X表示整数</li>
</ul>
<h2 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h2><p>内置函数为最通用的函数。</p>
<table>
<thead>
<tr>
<th align="center">函数名</th>
<th align="center">参数类型</th>
<th align="center">结果类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">SQRT(X)</td>
<td align="center">real</td>
<td align="center">real</td>
<td align="center">X的平方根</td>
</tr>
<tr>
<td align="center">ABS(X)</td>
<td align="center">real&#x2F;integer</td>
<td align="center">*</td>
<td align="center">绝对值</td>
</tr>
<tr>
<td align="center">ACHAR(I)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">SIN(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">弧度制</td>
</tr>
<tr>
<td align="center">SIND(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">角度制</td>
</tr>
<tr>
<td align="center">COS(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">COSD(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">TAN(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">TAND(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">EXP(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">LOG(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">LOGIO(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">IACHAR(C)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">MOD(A,B)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">MAX(A,B)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">MIN(A,B)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ASIN(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ASIND(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ACOS(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ACOSD(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ATAN(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ATAND(X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ATAN2(Y&#x2F;X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ATAN2D(Y,X)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<p>注:*指输出类型与输入类型相同。</p>
<h2 id="表控输入与输出"><a href="#表控输入与输出" class="headerlink" title="表控输入与输出"></a>表控输入与输出</h2><p>表控输入：变量列表中的变量类型决定输入数据需要的格式。</p>
<pre><code>READ(*,*)input_list
WRITE(*,*)output_list
PRINT *. output_list

# (*,*)表示任意长度，使用``,``隔开
</code></pre>
<p>WRITE与PRINT等价。</p>
<p>关于PRINT：</p>
<pre><code>PRINT fmt, i/o_list
</code></pre>
<p>fmt是读取格式说明，示例如下：</p>
<pre><code>PRINT 100, x , y
100 FORMAT (2F10.2)
string = &#39;(2F10.2)&#39;
PRINT string,x,y
</code></pre>
<h2 id="IMPLICIT-NONE语句"><a href="#IMPLICIT-NONE语句" class="headerlink" title="IMPLICIT NONE语句"></a>IMPLICIT NONE语句</h2><p>加入</p>
<pre><code>IMPLICIT NONE
</code></pre>
<p>所有变量需要显式定义，因此可以避免计算机因为变量名出错而输出错误的答案。</p>
<h2 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h2><p>养成良好编程习惯：</p>
<ul>
<li>使用IMPLICIT NONE 语句。</li>
<li>返回所有输入值以及计量单位。（这也是为什么在mineos中看到运行时返回输入值的原因）</li>
<li>初始化所有变量：显式输入，不要忘记初始化变量。</li>
<li>圆括号使赋值语句更清晰。</li>
</ul>
<h2 id="截断"><a href="#截断" class="headerlink" title="截断"></a>截断</h2><p>注意截断。整型截断为舍入</p>
<h2 id="PARAMETER-语句"><a href="#PARAMETER-语句" class="headerlink" title="PARAMETER 语句"></a>PARAMETER 语句</h2><pre><code>REAL , PARAMETER :: value=12
</code></pre>
<p>类似于C语言中的固定变量，即在类型声明语句之前将某个变量名与变量关联，从而不可更改该变量名的值。<br>类似于<code>#define</code>。</p>
<h2 id="精度问题"><a href="#精度问题" class="headerlink" title="精度问题"></a>精度问题</h2><h2 id="变量状态"><a href="#变量状态" class="headerlink" title="变量状态"></a>变量状态</h2><ul>
<li>已确定的状态 defined：已定义值</li>
<li>未确定的状态 undefined：未定义值</li>
</ul>
<h2 id="思考题"><a href="#思考题" class="headerlink" title="思考题"></a>思考题</h2><h3 id="运行示例4"><a href="#运行示例4" class="headerlink" title="运行示例4"></a>运行示例4</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">PROGRAM ch0804</span><br><span class="line">implicit none</span><br><span class="line">real :: light_minute, distance, elapse</span><br><span class="line">integer :: minute, second </span><br><span class="line">real, parameter :: light_year=9.46*10**12</span><br><span class="line"></span><br><span class="line">light_minute = light_year/(365.25 * 24.0 * 60.0)</span><br><span class="line">distance = 150.0 * 10 ** 6</span><br><span class="line">elapse = distance / light_minute</span><br><span class="line">minute = elapse</span><br><span class="line">second = (elapse - minute) * 60</span><br><span class="line">print *,&#x27; light takes &#x27; , minute, &#x27; Minutes&#x27;</span><br><span class="line">print *,&#x27;             &#x27; , second, &#x27; seconds&#x27;</span><br><span class="line">print *,&#x27; To reach the earth from the sum&#x27;</span><br><span class="line">END PROGRAM ch0804</span><br></pre></td></tr></table></figure>

<p>在运行ch0804出现错误：</p>
<pre><code>Error: Result of exponentiation at (1) exceeds the range of INTEGER(4)
</code></pre>
<p>表示结果超出整型范围。</p>
<p>疑问：？？？ 未解决</p>
<h3 id="计算摆的周期"><a href="#计算摆的周期" class="headerlink" title="计算摆的周期"></a>计算摆的周期</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PROGRAM period_of_pendulum</span><br><span class="line">implicit none</span><br><span class="line">real :: length,T</span><br><span class="line">real , parameter :: pi = 3.1415926535</span><br><span class="line">print *,&#x27;Please input the length of pendulum:&#x27;</span><br><span class="line">read *, length</span><br><span class="line">T = 2 * Pi * (length / 9.81) ** .5</span><br><span class="line">print *,&#x27;The period is &#x27;, T, &#x27;seconds.&#x27;</span><br><span class="line">end program period_of_pendulum</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> Please input the length of pendulum:</span><br><span class="line">1</span><br><span class="line"> The period is    2.00606656     seconds.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在计算器中的输出值为：2.006066681。</p>
<h3 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">program base_conversion</span><br><span class="line">real :: x1=1.0</span><br><span class="line">real :: x2=0.1</span><br><span class="line">real :: x3=0.01</span><br><span class="line">real :: x4=0.001</span><br><span class="line">real :: x5=0.0001</span><br><span class="line">	print *,&#x27; &#x27;,x1</span><br><span class="line">	print *,&#x27; &#x27;,x2</span><br><span class="line">	print *,&#x27; &#x27;,x3</span><br><span class="line">	print *,&#x27; &#x27;,x4</span><br><span class="line">	print *,&#x27; &#x27;,x5</span><br><span class="line">end program base_conversion</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> 1.00000000    </span><br><span class="line">0.100000001    </span><br><span class="line"> 9.99999978E-03</span><br><span class="line"> 1.00000005E-03</span><br><span class="line"> 9.99999975E-05</span><br></pre></td></tr></table></figure>
<p>1.0保持不变，但是其他值均发生了改变。</p>
<h3 id="简单减法"><a href="#简单减法" class="headerlink" title="简单减法"></a>简单减法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">program subtract</span><br><span class="line">real :: a=1.0002</span><br><span class="line">real :: b=1.0001</span><br><span class="line">real :: c</span><br><span class="line">	c=a-b</span><br><span class="line">	print *,a</span><br><span class="line">	print *,b</span><br><span class="line">	print *,c</span><br><span class="line">end program subtract</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.00020003    </span><br><span class="line">1.00010002    </span><br><span class="line">1.00016594E-04</span><br></pre></td></tr></table></figure>
<p>理论结果为0.0001，但是结果输出不同了，而且a和b的值也发生了变化。这与十进制与二进制的转换有关。</p>
<h3 id="fortran下的表达式等价原则"><a href="#fortran下的表达式等价原则" class="headerlink" title="fortran下的表达式等价原则"></a>fortran下的表达式等价原则</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">program expression_equivalence</span><br><span class="line">real :: x=1.002</span><br><span class="line">real :: y=1.001</span><br><span class="line">real :: t1,t2,t3,t4,t5</span><br><span class="line">	t1=x-y</span><br><span class="line">	t2=x+y</span><br><span class="line">	print *,t1</span><br><span class="line">	print *,t2</span><br><span class="line">	t3=t1*t2</span><br><span class="line">	t4=x**2-y**2</span><br><span class="line">	t5=x*x-y*y</span><br><span class="line">	print *,t3</span><br><span class="line">	print *,t4</span><br><span class="line">	print *,t5</span><br><span class="line">end program expression_equivalence</span><br></pre></td></tr></table></figure>
<p>输出结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x-y=9.99927521E-04</span><br><span class="line">x+y=2.00300002    </span><br><span class="line">(x-y)*(x+y)=2.00285483E-03</span><br><span class="line">x^2-y^2=2.00295448E-03</span><br><span class="line">x*x-y*y=2.00295448E-03</span><br></pre></td></tr></table></figure>
<p>计算器：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x-y=0.001</span><br><span class="line">x+y=2.003  </span><br><span class="line">(x-y)*(x+y)=2.003E-3</span><br><span class="line">x^2-y^2=2.003E-3</span><br><span class="line">x*x-y*y=2.003E-3</span><br></pre></td></tr></table></figure>
<p>LibreOffice：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x-y=0.001</span><br><span class="line">x+y=2.003  </span><br><span class="line">(x-y)*(x+y)=0.002003</span><br><span class="line">x^2-y^2=0.002003</span><br><span class="line">x*x-y*y=0.002003</span><br></pre></td></tr></table></figure>
<h3 id="ch0804变形"><a href="#ch0804变形" class="headerlink" title="ch0804变形"></a>ch0804变形</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">PROGRAM ch0804changed</span><br><span class="line">implicit none</span><br><span class="line">real :: light_minute, distance, elapse</span><br><span class="line">integer :: minute, second </span><br><span class="line">real :: light_year  ! 改变的为这一句和下面一句，将其改变为可变变量</span><br><span class="line">light_year=9.46*10**12</span><br><span class="line">light_minute = light_year/(365.25 * 24.0 * 60.0)</span><br><span class="line">distance = 150.0 * 10 ** 6</span><br><span class="line">elapse = distance / light_minute</span><br><span class="line">minute = elapse</span><br><span class="line">second = (elapse - minute) * 60</span><br><span class="line">print *,&#x27; light takes &#x27; , minute, &#x27; Minutes&#x27;</span><br><span class="line">print *,&#x27;             &#x27; , second, &#x27; seconds&#x27;</span><br><span class="line">print *,&#x27; To reach the earth from the sum&#x27;</span><br><span class="line">END PROGRAM ch0804changed</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    6 | light_year=9.46*10**12</span><br><span class="line">      |                  1</span><br><span class="line">Error: Result of exponentiation at (1) exceeds the range of INTEGER(4)</span><br></pre></td></tr></table></figure>
<p>疑问： ？？？未解决</p>
<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="DIMENSION-属性"><a href="#DIMENSION-属性" class="headerlink" title="DIMENSION 属性"></a>DIMENSION 属性</h2><p>使用dimension属性将变量定义为数组：</p>
<pre><code>real , dimension(len) :: wages
integer , dimension(len) :: sample
</code></pre>
<p>赋值数组内的元素：</p>
<pre><code>wages(1)=1.
wages = [1.,2.,33.]
wages = 1 # 赋值为相同值
(arg1, arg2, ... , index = istart, iend, incr) # 隐藏的循环初始化赋值
</code></pre>
<p>示例1：</p>
<pre><code>integer, dimension(25)::array4=[(0,i=1,4),5*j,j=1,5]
</code></pre>
<p>结果：</p>
<pre><code>0,0,0,0,5,0,0,0,0,10,0,0,0,0,15,0,0,0,0,20
</code></pre>
<p>示例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">program ch0901</span><br><span class="line">implicit none</span><br><span class="line">real :: total=0.0, average=0.0 !定义变量</span><br><span class="line">real , dimension(1:12) :: rainfall</span><br><span class="line">integer :: month</span><br><span class="line"></span><br><span class="line">	print *,&#x27;Type in the rainfall values&#x27;</span><br><span class="line">	print *,&#x27;one per line&#x27;</span><br><span class="line">	do month=1,12   ! 使用do进行循环</span><br><span class="line">		read *, rainfall(month)</span><br><span class="line">	enddo</span><br><span class="line">	</span><br><span class="line">	do month=1,12</span><br><span class="line">		total = total + rainfall(month)</span><br><span class="line">	enddo</span><br><span class="line">	</span><br><span class="line">	average = total / 12</span><br><span class="line">	print *,&#x27;average monthly rainfall was&#x27;</span><br><span class="line">	print *, average</span><br><span class="line">end program ch0901</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> Type in the rainfall values</span><br><span class="line"> one per line</span><br><span class="line">23</span><br><span class="line">22</span><br><span class="line">24</span><br><span class="line">23</span><br><span class="line">21</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">12</span><br><span class="line">10</span><br><span class="line">45</span><br><span class="line">40</span><br><span class="line">44</span><br><span class="line"> average monthly rainfall was</span><br><span class="line">   24.2500000  </span><br></pre></td></tr></table></figure>
<h2 id="改变数组下标取值范围"><a href="#改变数组下标取值范围" class="headerlink" title="改变数组下标取值范围"></a>改变数组下标取值范围</h2><p>一般使用<code>1,2,...,N</code>表示下标索引。但是有时以<code>0</code>开始更为方便。<br>指定下标的方式为：</p>
<pre><code>real, dimension(lower_bound : upper_bound) :: array
</code></pre>
<p>数组宽度&#x3D;上界值-下界值+1</p>
<h2 id="数组下标越界"><a href="#数组下标越界" class="headerlink" title="数组下标越界"></a>数组下标越界</h2><p>边界检测消耗运算资源。debug时开启，运行时关闭。</p>
<p>开启边界检测器在运行时输入:</p>
<pre><code># windows情况下
ifort -check filename.f90 # 编译
filename.f90 # 运行
</code></pre>
<h2 id="使用命名常数"><a href="#使用命名常数" class="headerlink" title="使用命名常数"></a>使用命名常数</h2><pre><code>REAL, DIMENSION(MAX_SIZE)::array1
</code></pre>
<p>MAX_SIZE可以修改。</p>
<h2 id="使用整个数组"><a href="#使用整个数组" class="headerlink" title="使用整个数组"></a>使用整个数组</h2><p>数组<code>a</code>与数组<code>b</code>相加，为两个数组中的逐个元素相加。但是两个数组纬度必须相同！标量值与数组相同，将作用于每个元素。</p>
<h2 id="使用部分数组"><a href="#使用部分数组" class="headerlink" title="使用部分数组"></a>使用部分数组</h2><p>部分数组，即数组的子集。</p>
<pre><code>subscript_1 : subscript_2 : stride  # 最小下标，最大下标，下标增量
</code></pre>
<p>若缺省，则分别为：数组的最小下标，数组的最大下标，1。</p>
<h2 id="数组输入输出"><a href="#数组输入输出" class="headerlink" title="数组输入输出"></a>数组输入输出</h2><h3 id="数组元素输入输出"><a href="#数组元素输入输出" class="headerlink" title="数组元素输入输出"></a>数组元素输入输出</h3><p>可以使用<code>WRITE</code>语句。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WRITE (*,100)a(1),a(2),a(3)</span><br><span class="line">100 FORMAT (&#x27;a=&#x27;,3F10.2)</span><br></pre></td></tr></table></figure>

<p>隐式DO循环：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WRITE (*,100) (a(i), i=1,3)</span><br><span class="line">100 FORMAT (&#x27;a=&#x27;,3F10.2)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WRITE (unit, format)(arg1, arg2,...,index = istart, iend, incr)</span><br></pre></td></tr></table></figure>
<p>arg为要输入或者输出的数值。index控制循环。<code>READ</code>同上。<br>arg如果为数组，可以使用：<code>arg(index)</code>表示输出。</p>
<p>嵌套隐式DO循环：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">write(*,100) ((i,j,j=1,3),i=1,2)</span><br><span class="line">100 FORMAT (I5,1X,I5)</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 1</span><br><span class="line">1 2</span><br><span class="line">1 3</span><br><span class="line">2 1</span><br><span class="line">2 2</span><br><span class="line">2 3</span><br></pre></td></tr></table></figure>

<h3 id="整个数组的输入输出"><a href="#整个数组的输入输出" class="headerlink" title="整个数组的输入输出"></a>整个数组的输入输出</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">real, dimension(5)::a=[1,2,3,4,5]</span><br><span class="line">WRITE(*,100) a</span><br><span class="line">100 FORMAT (6F8.3)</span><br><span class="line">WRITE(*,100) a(2::2) # 输出指定下标</span><br><span class="line">WRITE(*,100) a([3,2,3,4]) # 输出数组指定的下标</span><br></pre></td></tr></table></figure>

<h2 id="do循环"><a href="#do循环" class="headerlink" title="do循环"></a>do循环</h2><pre><code>do counter = start, end, increment
......  ！语句
enddo
</code></pre>
<p>其中，increment默认为1，可以省略。</p>
<h2 id="使用参数设置数组大小"><a href="#使用参数设置数组大小" class="headerlink" title="使用参数设置数组大小"></a>使用参数设置数组大小</h2><p>例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">program ch0902</span><br><span class="line">implicit none</span><br><span class="line"></span><br><span class="line">integer ,parameter :: number_of_people = 10</span><br><span class="line">real :: total=0.0, average=0.0 !定义变量</span><br><span class="line">integer :: person</span><br><span class="line">real , dimension(1:number_of_people) :: weight</span><br><span class="line"></span><br><span class="line">	do person = 1, number_of_people</span><br><span class="line">		print *,&#x27;type in the weight for person &#x27;, person</span><br><span class="line">		read *,weight(person)</span><br><span class="line">		total = total + weight(person)</span><br><span class="line">	enddo</span><br><span class="line">	average = total/number_of_people</span><br><span class="line">	</span><br><span class="line">	print *,&#x27;the total of the weights is &#x27;, total</span><br><span class="line">	print *,&#x27;average weight is &#x27;, average</span><br><span class="line">	print *,&#x27; &#x27;,number_of_people, &#x27; weights were &#x27;</span><br><span class="line">	</span><br><span class="line">	do person = 1, number_of_people</span><br><span class="line">		print *,weight(person)</span><br><span class="line">	enddo</span><br><span class="line">end program ch0902</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"> type in the weight for person            1</span><br><span class="line">85</span><br><span class="line"> type in the weight for person            2</span><br><span class="line">76</span><br><span class="line"> type in the weight for person            3</span><br><span class="line">85</span><br><span class="line"> type in the weight for person            4</span><br><span class="line">90</span><br><span class="line"> type in the weight for person            5</span><br><span class="line">69</span><br><span class="line"> type in the weight for person            6</span><br><span class="line">83</span><br><span class="line"> type in the weight for person            7</span><br><span class="line">64</span><br><span class="line"> type in the weight for person            8</span><br><span class="line">57</span><br><span class="line"> type in the weight for person            9</span><br><span class="line">65</span><br><span class="line"> type in the weight for person           10</span><br><span class="line">76</span><br><span class="line"> the total of the weights is    750.000000    </span><br><span class="line"> average weight is    75.0000000    </span><br><span class="line">            10  weights were </span><br><span class="line">   85.0000000    </span><br><span class="line">   76.0000000    </span><br><span class="line">   85.0000000    </span><br><span class="line">   90.0000000    </span><br><span class="line">   69.0000000    </span><br><span class="line">   83.0000000    </span><br><span class="line">   64.0000000    </span><br><span class="line">   57.0000000    </span><br><span class="line">   65.0000000    </span><br><span class="line">   76.0000000   </span><br></pre></td></tr></table></figure>

<p>语句：</p>
<pre><code>real , dimension(number) :: weight
</code></pre>
<p>若下界未指定，则为1。</p>
<h2 id="格式化输出形式"><a href="#格式化输出形式" class="headerlink" title="格式化输出形式"></a>格式化输出形式</h2><h3 id="format输出"><a href="#format输出" class="headerlink" title="format输出"></a>format输出</h3><p>常用描述符号与举例：<br>参考：<a target="_blank" rel="noopener" href="https://www.yiibai.com/fortran/fortran_basic_input_output.html">https://www.yiibai.com/fortran/fortran_basic_input_output.html</a></p>
<p>例句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">print 100</span><br><span class="line">100 format (20x, &#x27;Length&#x27;, 20x,&#x27;period&#x27;)</span><br><span class="line"></span><br><span class="line">do number = 1,10</span><br><span class="line">	print 200, length(number), T(number)</span><br><span class="line">	200 format (20x, i5, 20x, f5.2)  </span><br><span class="line">	 ！ 输出为length和T，其中20x表示空间格数，i5指整数5个长度。f为实数。</span><br><span class="line">enddo</span><br></pre></td></tr></table></figure>

<h2 id="思考题-1"><a href="#思考题-1" class="headerlink" title="思考题"></a>思考题</h2><h3 id="2、计算5个数的平均值"><a href="#2、计算5个数的平均值" class="headerlink" title="2、计算5个数的平均值"></a>2、计算5个数的平均值</h3><p>注意！ 定义数组时使用<code>:</code>分隔上下界，使用do循环使用<code>,</code>分隔上下界。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">program average_5</span><br><span class="line"></span><br><span class="line">integer , parameter :: quantity=5</span><br><span class="line">real , dimension(1 : quantity) :: numbers</span><br><span class="line">real :: total=0.0, average=0.0</span><br><span class="line">integer :: range</span><br><span class="line">do range=1,quantity</span><br><span class="line">	print *,&#x27;Please input &#x27;,quantity,&#x27;numbers, the &#x27;, range,&#x27;one is:&#x27;</span><br><span class="line">	read *,numbers(range)</span><br><span class="line">	total = total + numbers(range)</span><br><span class="line">enddo</span><br><span class="line"></span><br><span class="line">average=total/quantity</span><br><span class="line">print *,&#x27;The average of &#x27;,quantity,&#x27;numbers is:&#x27;,average</span><br><span class="line"></span><br><span class="line">end program average_5</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> Please input            5 numbers, the            1 one is:</span><br><span class="line">5</span><br><span class="line"> Please input            5 numbers, the            2 one is:</span><br><span class="line">3.4</span><br><span class="line"> Please input            5 numbers, the            3 one is:</span><br><span class="line">0.6</span><br><span class="line"> Please input            5 numbers, the            4 one is:</span><br><span class="line">2.8</span><br><span class="line"> Please input            5 numbers, the            5 one is:</span><br><span class="line">8.9</span><br><span class="line"> The average of            5 numbers is:   4.14000034    </span><br></pre></td></tr></table></figure>

<h3 id="3-1、改写体重总数，计算身高总数和平均数"><a href="#3-1、改写体重总数，计算身高总数和平均数" class="headerlink" title="3-1、改写体重总数，计算身高总数和平均数"></a>3-1、改写体重总数，计算身高总数和平均数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">program ch0902</span><br><span class="line">implicit none</span><br><span class="line"></span><br><span class="line">integer ,parameter :: number_of_people = 10</span><br><span class="line">real :: total_weight=0.0, average_weight=0.0,total_height=0.0, average_height=0.0</span><br><span class="line">integer :: person</span><br><span class="line">real , dimension(1:number_of_people) :: weight, height</span><br><span class="line"></span><br><span class="line">	do person = 1, number_of_people</span><br><span class="line">		print *,&#x27;type in the weight and height for person &#x27;, person, &#x27;use space as the interval:&#x27;</span><br><span class="line">		read *,weight(person), height(person)</span><br><span class="line">		total_weight = total_weight + weight(person)</span><br><span class="line">		total_height = total_height + height(person)</span><br><span class="line">	enddo</span><br><span class="line">	average_weight = total_weight/number_of_people</span><br><span class="line">	average_height = total_height/number_of_people</span><br><span class="line">	</span><br><span class="line">	print *,&#x27;the total of the weights is &#x27;, total_weight, &#x27;the total of the heights is &#x27;, total_height</span><br><span class="line">	print *,&#x27;average weight is &#x27;, average_weight, &#x27; average height is &#x27;, average_height</span><br><span class="line">	</span><br><span class="line">	print *,&#x27; &#x27;,number_of_people, &#x27; weights and heights were &#x27;	</span><br><span class="line">	print *,&#x27;^I&#x27;,&#x27;number_of_people&#x27;, &#x27;^I weights&#x27;,&#x27; ^I heights&#x27;	</span><br><span class="line">	do person = 1, number_of_people</span><br><span class="line">		print *,person,&#x27;^I&#x27;,weight(person),&#x27;^I&#x27;, height(person)</span><br><span class="line">	enddo</span><br><span class="line">	</span><br><span class="line">end program ch0902</span><br></pre></td></tr></table></figure>
<p>忘了改program名了，但是也证明了内部program的名称和外部文件名称可以不同，以外部文件名为准。<br>输出：<br>（ps：输出有些杂乱，因为还没有掌握输出书写的一些方式。）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"> type in the weight and height for person            1 use space as the interval:</span><br><span class="line">85 1.85</span><br><span class="line"> type in the weight and height for person            2 use space as the interval:</span><br><span class="line">76 1.80</span><br><span class="line"> type in the weight and height for person            3 use space as the interval:</span><br><span class="line">85 1.85</span><br><span class="line"> type in the weight and height for person            4 use space as the interval:</span><br><span class="line">90 1.70</span><br><span class="line"> type in the weight and height for person            5 use space as the interval:</span><br><span class="line">69 1.75</span><br><span class="line"> type in the weight and height for person            6 use space as the interval:</span><br><span class="line">83 1.67</span><br><span class="line"> type in the weight and height for person            7 use space as the interval:</span><br><span class="line">64 1.55</span><br><span class="line"> type in the weight and height for person            8 use space as the interval:</span><br><span class="line">57 1.63</span><br><span class="line"> type in the weight and height for person            9 use space as the interval:</span><br><span class="line">65 1.79</span><br><span class="line"> type in the weight and height for person           10 use space as the interval:</span><br><span class="line">76 1.78</span><br><span class="line"> the total of the weights is    750.000000     the total of the heights is    17.3700008    </span><br><span class="line"> average weight is    75.0000000      average height is    1.73700011    </span><br><span class="line">            10  weights and heights were </span><br><span class="line"> ^Inumber_of_people^I weights ^I heights</span><br><span class="line">           1 ^I   85.0000000     ^I   1.85000002    </span><br><span class="line">           2 ^I   76.0000000     ^I   1.79999995    </span><br><span class="line">           3 ^I   85.0000000     ^I   1.85000002    </span><br><span class="line">           4 ^I   90.0000000     ^I   1.70000005    </span><br><span class="line">           5 ^I   69.0000000     ^I   1.75000000    </span><br><span class="line">           6 ^I   83.0000000     ^I   1.66999996    </span><br><span class="line">           7 ^I   64.0000000     ^I   1.54999995    </span><br><span class="line">           8 ^I   57.0000000     ^I   1.63000000    </span><br><span class="line">           9 ^I   65.0000000     ^I   1.78999996    </span><br><span class="line">          10 ^I   76.0000000     ^I   1.77999997 </span><br></pre></td></tr></table></figure>

<h3 id="3-2-计算BIM值"><a href="#3-2-计算BIM值" class="headerlink" title="3-2 计算BIM值"></a>3-2 计算BIM值</h3><p>使用语句：<br>    a.out &lt; data.dat &gt; results.txt</p>
<p>实现文件的输入和输出操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">program ch3_2</span><br><span class="line">implicit none</span><br><span class="line"></span><br><span class="line">integer ,parameter :: number_of_people = 10</span><br><span class="line">real :: total_weight=0.0, average_weight=0.0,total_height=0.0, average_height=0.0</span><br><span class="line">integer :: person</span><br><span class="line">real , dimension(1:number_of_people) :: weight, height, BMI</span><br><span class="line"></span><br><span class="line">	do person = 1, number_of_people</span><br><span class="line">		print *,&#x27;type in the weight and height for person &#x27;, person, &#x27;use space as the interval:&#x27;</span><br><span class="line">		read *,weight(person), height(person)</span><br><span class="line">		total_weight = total_weight + weight(person)</span><br><span class="line">		total_height = total_height + height(person)</span><br><span class="line">		BMI(person)=weight(person)/(height(person)**2)</span><br><span class="line">	enddo</span><br><span class="line">	</span><br><span class="line">	average_weight = total_weight/number_of_people</span><br><span class="line">	average_height = total_height/number_of_people</span><br><span class="line">	</span><br><span class="line">	print *,&#x27;the total of the weights is &#x27;, total_weight, &#x27;the total of the heights is &#x27;, total_height</span><br><span class="line">	print *,&#x27;average weight is &#x27;, average_weight, &#x27; average height is &#x27;, average_height</span><br><span class="line">	</span><br><span class="line">	print *,&#x27; &#x27;,number_of_people, &#x27; weights and heights were &#x27;	</span><br><span class="line">	print *,&#x27;number_of_people&#x27;, &#x27;weights&#x27;,&#x27;heights&#x27;	,&#x27;BMI&#x27;</span><br><span class="line">	do person = 1, number_of_people</span><br><span class="line">		print *,person ,weight(person), height(person), BMI(person)</span><br><span class="line">	enddo</span><br><span class="line">	</span><br><span class="line">end program ch3_2</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">文件 result.txt</span><br><span class="line"> type in the weight and height for person            1 use space as the interval:</span><br><span class="line"> type in the weight and height for person            2 use space as the interval:</span><br><span class="line"> type in the weight and height for person            3 use space as the interval:</span><br><span class="line"> type in the weight and height for person            4 use space as the interval:</span><br><span class="line"> type in the weight and height for person            5 use space as the interval:</span><br><span class="line"> type in the weight and height for person            6 use space as the interval:</span><br><span class="line"> type in the weight and height for person            7 use space as the interval:</span><br><span class="line"> type in the weight and height for person            8 use space as the interval:</span><br><span class="line"> type in the weight and height for person            9 use space as the interval:</span><br><span class="line"> type in the weight and height for person           10 use space as the interval:</span><br><span class="line"> the total of the weights is    750.000000     the total of the heights is    17.3700008    </span><br><span class="line"> average weight is    75.0000000      average height is    1.73700011    </span><br><span class="line">            10  weights and heights were </span><br><span class="line"> number_of_peopleweightsheightsBMI</span><br><span class="line">           1   85.0000000       1.85000002       24.8356457    </span><br><span class="line">           2   76.0000000       1.79999995       23.4567909    </span><br><span class="line">           3   85.0000000       1.85000002       24.8356457    </span><br><span class="line">           4   90.0000000       1.70000005       31.1418667    </span><br><span class="line">           5   69.0000000       1.75000000       22.5306129    </span><br><span class="line">           6   83.0000000       1.66999996       29.7608395    </span><br><span class="line">           7   64.0000000       1.54999995       26.6389179    </span><br><span class="line">           8   57.0000000       1.63000000       21.4535751    </span><br><span class="line">           9   65.0000000       1.78999996       20.2865086    </span><br><span class="line">          10   76.0000000       1.77999997       23.9868717    </span><br></pre></td></tr></table></figure>

<h3 id="6、计算摆的周期（制表）"><a href="#6、计算摆的周期（制表）" class="headerlink" title="6、计算摆的周期（制表）"></a>6、计算摆的周期（制表）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">program ch6</span><br><span class="line">implicit none</span><br><span class="line">real , parameter :: pi = 3.1415926535</span><br><span class="line">integer ,dimension(1:10) :: length</span><br><span class="line">integer :: number</span><br><span class="line">real ,dimension(1:10) :: T</span><br><span class="line">do number = 1,10,1</span><br><span class="line">	length(number) = number</span><br><span class="line">enddo</span><br><span class="line">do number = 1,10</span><br><span class="line">	T(number) = 2 * pi * (length(number) / 9.81) ** .5</span><br><span class="line">enddo</span><br><span class="line"></span><br><span class="line">print 100</span><br><span class="line">100 format (20x, &#x27;Length&#x27;, 20x,&#x27;period&#x27;)</span><br><span class="line"></span><br><span class="line">do number = 1,10</span><br><span class="line">	print 200, length(number), T(number)</span><br><span class="line">	200 format (20x, i5, 20x, f5.2)  </span><br><span class="line">enddo</span><br><span class="line"></span><br><span class="line">end program ch6</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Length                    period</span><br><span class="line">    1                     2.01</span><br><span class="line">    2                     2.84</span><br><span class="line">    3                     3.47</span><br><span class="line">    4                     4.01</span><br><span class="line">    5                     4.49</span><br><span class="line">    6                     4.91</span><br><span class="line">    7                     5.31</span><br><span class="line">    8                     5.67</span><br><span class="line">    9                     6.02</span><br><span class="line">   10                     6.34</span><br></pre></td></tr></table></figure>

<h1 id="分支结构"><a href="#分支结构" class="headerlink" title="分支结构"></a>分支结构</h1><h2 id="IF"><a href="#IF" class="headerlink" title="IF"></a>IF</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">IF(logical_expr1)THEN</span><br><span class="line">    语句1</span><br><span class="line">    语句2</span><br><span class="line">    ...</span><br><span class="line">ELSE IF(logical_expr2)THEN</span><br><span class="line">    语句1</span><br><span class="line">    语句2</span><br><span class="line">    ...</span><br><span class="line">ELSE</span><br><span class="line">    语句1</span><br><span class="line">    语句2</span><br><span class="line">    ...</span><br><span class="line">END IF</span><br></pre></td></tr></table></figure>

<p>嵌套IF语句命名使其运行更加稳妥。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">outer IF(test1)THEN</span><br><span class="line">    </span><br><span class="line">    inner IF(test1)THEN</span><br><span class="line"></span><br><span class="line">    END IF inner</span><br><span class="line">    </span><br><span class="line">END IF outer</span><br></pre></td></tr></table></figure>

<p>逻辑IF语句</p>
<pre><code>IF(logical_expr)语句
</code></pre>
<h2 id="SELECT-CASE结构"><a href="#SELECT-CASE结构" class="headerlink" title="SELECT CASE结构"></a>SELECT CASE结构</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[name:]SELECT CASE( case_expr)</span><br><span class="line">CASE(情况选择1)[name]</span><br><span class="line">    语句1</span><br><span class="line">    语句2</span><br><span class="line">    ...</span><br><span class="line">CASE(情况选择2)[name]</span><br><span class="line">    语句1</span><br><span class="line">    语句2</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">CASE DEFAULT [name]</span><br><span class="line">    语句1</span><br><span class="line">    语句2</span><br><span class="line">    ...</span><br><span class="line">END SELECT [name]</span><br></pre></td></tr></table></figure>

<p>命名case结构，使得更加清晰。</p>
<h2 id="DEBUGE"><a href="#DEBUGE" class="headerlink" title="DEBUGE"></a>DEBUGE</h2><p>在分支结构中插入WRITE是最简单的方式，输出表明运行到哪一步。</p>
<p>测试相等性时，使用近似测试。</p>
<h1 id="循环与字符操作"><a href="#循环与字符操作" class="headerlink" title="循环与字符操作"></a>循环与字符操作</h1><h2 id="do循环-1"><a href="#do循环-1" class="headerlink" title="do循环"></a>do循环</h2><p>不确定性执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[name:]DO</span><br><span class="line">...</span><br><span class="line">    if(EXP)EXIT</span><br><span class="line">...</span><br><span class="line">END DO [name]</span><br></pre></td></tr></table></figure>
<p>EXP为真，执行EXIT，退出循环。</p>
<h2 id="do-while循环"><a href="#do-while循环" class="headerlink" title="do while循环"></a>do while循环</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DO WHILE(EXP)</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">END DO</span><br></pre></td></tr></table></figure>
<p>EXP为真，循环进行，为假时立刻退出循环。</p>
<h2 id="迭代计数循环"><a href="#迭代计数循环" class="headerlink" title="迭代计数循环"></a>迭代计数循环</h2><pre><code>[name:]do counter = start, end, increment
......  ！语句
end do [name]
</code></pre>
<ul>
<li>increment 默认为1，可以省略。</li>
<li>counter 整型变量，作为循环计数使用。</li>
<li>start end 计数循环的参数，表示开始和结束。</li>
<li>计算规则：<code>counter*increment≤end*increment</code> 时进行循环。</li>
</ul>
<p><strong>注：为了防止永久循环，不可在循环中修改控制变量。</strong></p>
<h2 id="CYCLE语句与EXIT语句"><a href="#CYCLE语句与EXIT语句" class="headerlink" title="CYCLE语句与EXIT语句"></a>CYCLE语句与EXIT语句</h2><h3 id="CYCLE"><a href="#CYCLE" class="headerlink" title="CYCLE"></a>CYCLE</h3><p>使用CYCLE使得当前循环被终止，循环返回顶部。</p>
<p>在嵌套循环中，使用<code>CYCLE [name]</code>语句，可以使其<code>CYCLE</code>正确的循环。</p>
<pre><code>IF(j=2)CYCLE outer
</code></pre>
<p>可以实现在内部循环中终止当前的外循环。</p>
<h3 id="EXIT"><a href="#EXIT" class="headerlink" title="EXIT"></a>EXIT</h3><p>使用<code>EXIT</code>使得循环被终止。</p>
<h2 id="字符操作"><a href="#字符操作" class="headerlink" title="字符操作"></a>字符操作</h2><h3 id="子串提取"><a href="#子串提取" class="headerlink" title="子串提取"></a>子串提取</h3><p>定义CHARACTER时。使用<code>len=&lt;len&gt;</code>语句，使得变量只能存储相应长度的字符。</p>
<h3 id="连接操作符"><a href="#连接操作符" class="headerlink" title="连接操作符"></a>连接操作符</h3><p><code>//</code>是连接操作符。</p>
<p>将两个或者多个字符串或者子串合并成一个大的字符串。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = &#x27;ABCDEFGHIJ&#x27;</span><br><span class="line">b = &#x27;123456789&#x27;</span><br><span class="line">c = a(1:3)//b(4:5)</span><br></pre></td></tr></table></figure>
<p><code>c</code>的值为：<code>’ABC45‘</code></p>
<h3 id="内置字符函数"><a href="#内置字符函数" class="headerlink" title="内置字符函数"></a>内置字符函数</h3><p>参考3 表4-1</p>
<h1 id="I-x2F-O内容"><a href="#I-x2F-O内容" class="headerlink" title="I&#x2F;O内容"></a>I&#x2F;O内容</h1><h2 id="格式和格式化WRITE"><a href="#格式和格式化WRITE" class="headerlink" title="格式和格式化WRITE"></a>格式和格式化WRITE</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WRITE(*,100)i,result</span><br><span class="line">100 FORMAT(&#x27;result :&#x27; ,I3, &#x27;is&#x27; ,F7.3)</span><br></pre></td></tr></table></figure>
<ul>
<li>100 指的是FORMAT的语句标号</li>
<li>I3 F7.3 格式符号</li>
</ul>
<h2 id="格式描述符"><a href="#格式描述符" class="headerlink" title="格式描述符"></a>格式描述符</h2><table>
<thead>
<tr>
<th align="center">符号</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">c</td>
<td align="center">列号</td>
</tr>
<tr>
<td align="center">d</td>
<td align="center">实数输入或者输出的小数位右边的位数</td>
</tr>
<tr>
<td align="center">m</td>
<td align="center">要显示的最小位数，不够补零</td>
</tr>
<tr>
<td align="center">n</td>
<td align="center">要跳过的空格数</td>
</tr>
<tr>
<td align="center">r</td>
<td align="center">重复计数，一组或者一个描述符的使用次数，即该格式符重复r次</td>
</tr>
<tr>
<td align="center">w</td>
<td align="center">域宽，输入或者输出占用的字符数；若不能显示所有字符则使用*代替</td>
</tr>
</tbody></table>
<h3 id="整数输出：I描述符"><a href="#整数输出：I描述符" class="headerlink" title="整数输出：I描述符"></a>整数输出：I描述符</h3><p><code>rIw</code>或者<code>rIw.m</code>。</p>
<h3 id="实数输出：F描述符"><a href="#实数输出：F描述符" class="headerlink" title="实数输出：F描述符"></a>实数输出：F描述符</h3><p><code>rFw.d</code><br>右对齐显示，不足补空格。</p>
<h3 id="实数输出：E描述符"><a href="#实数输出：E描述符" class="headerlink" title="实数输出：E描述符"></a>实数输出：E描述符</h3><p>科学计数法：<br><code>rEw.d</code><br>±0.ddddE±ee<br>一般w大于等于d+7。才能容纳整个数字字符。</p>
<h3 id="科学计数法：ES描述符"><a href="#科学计数法：ES描述符" class="headerlink" title="科学计数法：ES描述符"></a>科学计数法：ES描述符</h3><p>该格式为输出数值在1.0-10.0之间的数。<br><code>rESw.d</code></p>
<h3 id="逻辑输出：L描述符"><a href="#逻辑输出：L描述符" class="headerlink" title="逻辑输出：L描述符"></a>逻辑输出：L描述符</h3><p><code>rLw</code><br>右对齐显示逻辑输出<code>T</code>与<code>F</code></p>
<h3 id="字符输出：A描述符"><a href="#字符输出：A描述符" class="headerlink" title="字符输出：A描述符"></a>字符输出：A描述符</h3><p><code>rA</code>或者<code>rAw</code></p>
<h3 id="水平定位：X-T描述符"><a href="#水平定位：X-T描述符" class="headerlink" title="水平定位：X T描述符"></a>水平定位：X T描述符</h3><ul>
<li><code>nX</code><br>缓冲区中插入间距。<code>n</code>：插入的空格数。</li>
<li><code>Tc</code><br>在缓冲区中跳过特定列。<code>c</code>：转到的列号。转到相应列号开始打印。<br>注意：确保T跳到的位置不会覆盖之前的内容。</li>
</ul>
<h3 id="格式描述符重复使用"><a href="#格式描述符重复使用" class="headerlink" title="格式描述符重复使用"></a>格式描述符重复使用</h3><p>可以使用语句<code>2(I6,F10.2)</code>表示<code>(I6,F10.2,I6,F10.2)</code>。</p>
<p>可以使用<code>*(I6,F10.2)</code>使其一直重复直至没有输出数据。</p>
<h3 id="改变输出行：-x2F-描述符"><a href="#改变输出行：-x2F-描述符" class="headerlink" title="改变输出行：&#x2F;描述符"></a>改变输出行：&#x2F;描述符</h3><p>在打印机中使用。</p>
<h3 id="格式使用"><a href="#格式使用" class="headerlink" title="格式使用"></a>格式使用</h3><p>如果<code>FORMAT</code>中的格式符不足，则在没有重复次数的开始括号处重新开始。</p>
<h2 id="格式化READ语句"><a href="#格式化READ语句" class="headerlink" title="格式化READ语句"></a>格式化READ语句</h2><h3 id="整数输入：I描述符"><a href="#整数输入：I描述符" class="headerlink" title="整数输入：I描述符"></a>整数输入：I描述符</h3><p><code>rIw</code></p>
<h3 id="实数输入：F描述符"><a href="#实数输入：F描述符" class="headerlink" title="实数输入：F描述符"></a>实数输入：F描述符</h3><p><code>rFw.d</code><br>注:在实数描述符中输入，一定要输入带有小数点的整数！否则会产生错误！</p>
<h3 id="逻辑输入：L描述符"><a href="#逻辑输入：L描述符" class="headerlink" title="逻辑输入：L描述符"></a>逻辑输入：L描述符</h3><p><code>rLw</code></p>
<h3 id="字符输入：A描述符"><a href="#字符输入：A描述符" class="headerlink" title="字符输入：A描述符"></a>字符输入：A描述符</h3><p><code>rA</code>或<code>rAw</code></p>
<h3 id="水平定位：X和T描述符"><a href="#水平定位：X和T描述符" class="headerlink" title="水平定位：X和T描述符"></a>水平定位：X和T描述符</h3><h3 id="垂直定位：-x2F-描述符"><a href="#垂直定位：-x2F-描述符" class="headerlink" title="垂直定位：&#x2F;描述符"></a>垂直定位：&#x2F;描述符</h3><h2 id="文件及文件处理"><a href="#文件及文件处理" class="headerlink" title="文件及文件处理"></a>文件及文件处理</h2><h3 id="OPEN"><a href="#OPEN" class="headerlink" title="OPEN"></a>OPEN</h3><p>将一个文件与一个给定的i&#x2F;o单元号关联起来。格式为：</p>
<pre><code>OPEN(open_list)
</code></pre>
<p>open_list子句包含存取文件信息等。</p>
<ul>
<li>UNIT&#x3D;指明与文件关联的io单元号。<br>  <code>UNIT=int_expr</code></li>
<li>FILE&#x3D;指定要打开的文件名。<br>  <code>FILE=char_expr</code></li>
<li>STATUS&#x3D;指定要打开文件的状态。<br>  <code>STATUS=char_expr</code><br>  其中，char_expr为下列值之一:”OLD”,”NEW”,”REPLACE”,”SCRATCH”,”UNKNOW”。</li>
<li>ACTION&#x3D;指定一个文件是否以只读、只写或者读写方式打开。<br>  <code>ACTION=char_expr</code><br>  其中，char_expr为下列值之一：“READ”,”WRITE”,”READWRITE”。</li>
<li>IOSTAT&#x3D;指定一个整数变量名，打开操作的状态可以返回到这个变量中。<br>  <code>IOSTAT=int_var</code><br>  其中，Open成功执行后，ISOTAT值为0。如果不成功，为一个包含错误信息的正整数。</li>
<li>IOMSG&#x3D;指定一个字符变量名，包含错误信息。<br>  <code>IOMSG=chart_var</code><br>  字符变量。OPEN语句成功执行，字符变量内容不变。否则返回错误信息。</li>
</ul>
<h3 id="CLOSE"><a href="#CLOSE" class="headerlink" title="CLOSE"></a>CLOSE</h3><pre><code>CLOSE(close_list)
</code></pre>
<p>clost_list必须包含一个指定io单元号的子句，可以指定其它选项。（目前未阅读到那一章）。</p>
<h3 id="磁盘文件读写"><a href="#磁盘文件读写" class="headerlink" title="磁盘文件读写"></a>磁盘文件读写</h3><pre><code>READ(unit,*)变量名
</code></pre>
<p><code>READ</code>中<code>()</code>内第一个为读取的文件的io单元号。WRITE同。</p>
<h3 id="文件定位"><a href="#文件定位" class="headerlink" title="文件定位"></a>文件定位</h3><p>unit:与要使用的文件关联的IO单元号</p>
<h4 id="BACKSPACE"><a href="#BACKSPACE" class="headerlink" title="BACKSPACE"></a>BACKSPACE</h4><pre><code>BACKSPACE(UNIT=unit)
</code></pre>
<p>回退一条记录。</p>
<h4 id="REWIND"><a href="#REWIND" class="headerlink" title="REWIND"></a>REWIND</h4><pre><code>REWIND(UNIT=unit)
</code></pre>
<p>从文件头重新开始文件。</p>
<h1 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h1><p>外部过程：把每个子任务作为独立的程序单元进行编码。</p>
<p>两种外部过程：子例程和函数子程序（函数）。</p>
<h2 id="子例程"><a href="#子例程" class="headerlink" title="子例程"></a>子例程</h2><p>CALL语句使用过程名调用，格式如下:<br>定义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SUBROUTINE subroutine_name (argument_list)</span><br><span class="line">...</span><br><span class="line">(Delaration section)</span><br><span class="line">...</span><br><span class="line">(Execution section)</span><br><span class="line">...</span><br><span class="line">RETURN </span><br><span class="line">END SUBROUTINE [subroutine_name]</span><br></pre></td></tr></table></figure>

<h3 id="INTENT属性："><a href="#INTENT属性：" class="headerlink" title="INTENT属性："></a>INTENT属性：</h3><p>定义<code>argument_list</code>中的变量，需要定义IN或OUT变量，以表示变量是输入还是输出。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">REAL, INTENT(IN)::IN_VALUE1</span><br><span class="line">REAL, INTENT(OUT)::OUT_VALUE1</span><br><span class="line">REAL, DIMENSION(N), INTENT(INOUT)::ARRAY # 定义一个能输入和输出的数组</span><br></pre></td></tr></table></figure>
<p>其中，<code>INOUT</code>可以写为：<code>IN OUT</code>。<br>使用INTENT属性可以避免修改了<code>IN</code>类型的变量导致之后的该变量被改变，从而产生的错误。记住每一个形参都要设置INTENT属性！！！</p>
<p>定义内部变量时，定义临时变量。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">REAL ::temp</span><br></pre></td></tr></table></figure>

<p>调用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CALL subroutine_name (argument_list)</span><br></pre></td></tr></table></figure>
<p>调用时注意<code>argument_list</code>中的变量类型必须一一对应！</p>
<h3 id="传递数组"><a href="#传递数组" class="headerlink" title="传递数组"></a>传递数组</h3><p>数组可以显式传递或者不定大小传递。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">REAL, INTENT(IN), DIMENSION(n)::data1 # n为数组大小，在输入列表中给出。</span><br><span class="line">REAL, INTENT(IN), DIMENSION(*)::data1 # 不定大小，边界检测，整个或者部分数组都不能工作。</span><br></pre></td></tr></table></figure>
<p><strong>注：目前基本不使用不定数组的格式，因为会产生越界问题，且不易监测。</strong></p>
<h3 id="传递字符变量"><a href="#传递字符变量" class="headerlink" title="传递字符变量"></a>传递字符变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CHARACTER (len=*), INTENT(IN)::STRING1</span><br></pre></td></tr></table></figure>
<p>使用<code>*</code>表示长度即可。因为没有必要在编译时必须知道字符串长度。</p>
<h3 id="小问题"><a href="#小问题" class="headerlink" title="小问题"></a>小问题</h3><p>不要在子例程中加入<code>STOP</code>语句，否则程序会“神秘终止”。<br>正确方法是对可能存在的错误进行检测。使用<code>IF</code>语句进行检测，采取相应操作。例如返回<code>error=0</code>。</p>
<h2 id="模块共享数据"><a href="#模块共享数据" class="headerlink" title="模块共享数据"></a>模块共享数据</h2><p>模块，使用<code>MODULE</code>声明。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MODULE shared_data</span><br><span class="line">！ 声明在两个程序之间共享的数据</span><br><span class="line">IMPLICIT NONE</span><br><span class="line">SAVE   ！ 必须包含这个语句。</span><br><span class="line">INTEGER, PARAMETER :: num_vals = 5 ！ 数组中的最大数值个数</span><br><span class="line">REAL, DIMENSION(num_vals)::values ! 数据值</span><br><span class="line">END MODULE shared_data</span><br></pre></td></tr></table></figure>
<p>使用模块中的数据：该语句必须出现在其他语句之前。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE shared_data</span><br></pre></td></tr></table></figure>
<p>注意：share的数据和局部变量不要重名！</p>
<h2 id="模块过程"><a href="#模块过程" class="headerlink" title="模块过程"></a>模块过程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MODULE my_subs</span><br><span class="line">implicit none</span><br><span class="line">contains</span><br><span class="line"></span><br><span class="line">    SUBROUTINE sub1 (a,b,c,x,error)</span><br><span class="line">    implicit none</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">    end subroutine sub1</span><br><span class="line">    </span><br><span class="line">END MODULE my_subs</span><br></pre></td></tr></table></figure>
<p>使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE my_subs</span><br></pre></td></tr></table></figure>
<p>即可在调用程序单元中使用子例程sub1。</p>
<p>使用模块调用子进程，可以使程序完全掌握子进程内的所有参数等，返回必要的错误信息。而直接调用子进程，主程序无法了解子进程中的任何信息。</p>
<h2 id="FORTRAN函数"><a href="#FORTRAN函数" class="headerlink" title="FORTRAN函数"></a>FORTRAN函数</h2><p>函数：结果是单个数值、逻辑值、字符串或数组的过程。只能返回一个值。</p>
<p>用户定义函数格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">FUNCTION name (参数列表)</span><br><span class="line">...</span><br><span class="line">(在声明部分必须声明name类型)</span><br><span class="line">REAL, INTENT(IN):: INPUT_1</span><br><span class="line">...</span><br><span class="line">（执行部分）</span><br><span class="line">...</span><br><span class="line">name = expr</span><br><span class="line">RETURN</span><br><span class="line">END FUNCTION [name]</span><br></pre></td></tr></table></figure>

<p>由于函数必须返回一个值，因此需要定义函数返回值类型，有两种，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INTEGER FUNCTION my_function(i,j)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FUNCTION my_function(i,j)</span><br><span class="line">INTEGER :: my_function</span><br></pre></td></tr></table></figure>
<p>函数名为输出变量的名称，并且该变量已被定义，因此不需要在函数中再次定义。但是输入参数需要定义！</p>
<h2 id="过程作为参数传递给其它过程"><a href="#过程作为参数传递给其它过程" class="headerlink" title="过程作为参数传递给其它过程"></a>过程作为参数传递给其它过程</h2><h3 id="用户定义函数作为参数传递"><a href="#用户定义函数作为参数传递" class="headerlink" title="用户定义函数作为参数传递"></a>用户定义函数作为参数传递</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 外部定义函数，声明函数是外部调用的</span><br><span class="line">REAL, EXTERNAL :: fun_1, fun_2[,.....]</span><br><span class="line"></span><br><span class="line"># 调用fun的SUBROUTINE中</span><br><span class="line">REAL,EXTERNAL :: fun</span><br></pre></td></tr></table></figure>

<h3 id="子例程作为参数传递"><a href="#子例程作为参数传递" class="headerlink" title="子例程作为参数传递"></a>子例程作为参数传递</h3><p>在SUBROUTINE中，传递名为<code>sub</code>的子例程。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SUBROUTINE subs(sub, ...)</span><br><span class="line">...</span><br><span class="line">EXTERNAL :: sub ！ 定义子例程</span><br><span class="line">（定义其他输入输出变量）</span><br><span class="line">...</span><br><span class="line">CALL sub(value_list) ! 调用子例程</span><br><span class="line">...</span><br><span class="line">END SUBROUTINE subs</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhiyuanshi1901.github.io/2023/01/03/CMT-ndk%E4%B8%8E%E8%A1%8D%E7%94%9F%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/03/CMT-ndk%E4%B8%8E%E8%A1%8D%E7%94%9F%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F/" class="post-title-link" itemprop="url">CMT .ndk与衍生数据格式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-01-03 09:53:18" itemprop="dateCreated datePublished" datetime="2023-01-03T09:53:18+08:00">2023-01-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-01-09 10:40:12" itemprop="dateModified" datetime="2023-01-09T10:40:12+08:00">2023-01-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%9C%B0%E9%9C%87%E5%AD%A6%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">地震学常用软件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="CMT-ndk格式数据"><a href="#CMT-ndk格式数据" class="headerlink" title="CMT .ndk格式数据"></a>CMT .ndk格式数据</h1><p>原介绍：<a target="_blank" rel="noopener" href="https://www.ldeo.columbia.edu/~gcmt/projects/CMT/catalog/allorder.ndk_explained">https://www.ldeo.columbia.edu/~gcmt/projects/CMT/catalog/allorder.ndk_explained</a></p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>CMT，全称Centroid-Moment-Tensor，是地震震源机制解的<br>这个数据为ASCII格式，共五行，每行80个字符长度。</p>
<p>数据格式如下：</p>
<p>示例1（补充了每个参数的含义）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">LINE1：</span><br><span class="line">PDE  2005/01/01 01:20:05.4  13.78（纬度）  -88.78（经度） 193.1（震源深度） 5.0（震级mb） 0.0（ms） EL SALVADOR（地理位置）             </span><br><span class="line">LINE2：</span><br><span class="line">C200501010120A（事件名称）   B:  4    4  40（台站数，通道数，最短周期） S: 27   33  50 M:  0    0   0 CMT: 1 TRIHD:  0.6</span><br><span class="line">LINE3：</span><br><span class="line">CENTROID:     -0.3（时间） 0.9  13.76（纬度） 0.06  -89.08（经度） 0.09 162.8（深度） 12.5 FREE（深度类型） S-20050322125201（时间戳）</span><br><span class="line">LINE4：</span><br><span class="line">23（时间指数，*e23）  0.838（Mrr） 0.201（前一个值的标准误差） -0.005（Mtt） 0.231 -0.833（Mpp） 0.270  1.050（Mrt） 0.121 -0.369（Mrp） 0.161  0.044（Mtp） 0.240</span><br><span class="line">LINE5：</span><br><span class="line">V10（版本号）   1.581 56  12  -0.537 23 140  -1.044 24 241（三个特征向量的特征值、plunge和方位角）   1.312   9 29  142（第一个节面的走向，倾角，方位角） 133 72   66 （第二个节面的相关数值）</span><br></pre></td></tr></table></figure>

<p>示例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PDE  2005/01/01 01:42:24.9   7.29   93.92  30.0 5.1 0.0 NICOBAR ISLANDS, INDIA R</span><br><span class="line">C200501010142A   B: 17   27  40 S: 41   58  50 M:  0    0   0 CMT: 1 TRIHD:  0.7</span><br><span class="line">CENTROID:     -1.1 0.8   7.24 0.04   93.96 0.04  12.0  0.0 BDY  S-20050322125628</span><br><span class="line">23 -1.310 0.212  2.320 0.166 -1.010 0.241  0.013 0.535 -2.570 0.668  1.780 0.151</span><br><span class="line">V10   3.376 16 149   0.611 43  44  -3.987 43 254   3.681 282 48  -23  28 73 -136</span><br></pre></td></tr></table></figure>


<h2 id="逐行内容"><a href="#逐行内容" class="headerlink" title="逐行内容"></a>逐行内容</h2><h3 id="第一行：震中数据行"><a href="#第一行：震中数据行" class="headerlink" title="第一行：震中数据行"></a>第一行：震中数据行</h3><p>示例：</p>
<pre><code>PDE  2005/01/01 01:42:24.9   7.29   93.92  30.0 5.1 0.0 NICOBAR ISLANDS, INDIA R
</code></pre>
<ul>
<li>[1-4]   震中参考地震记录。例如（PDE：USGS位置；ISC：ISC地震记录；SWE：面波位置；[Ekstrom，BSSA，2006]）</li>
<li>[6-15]  Date of reference event 事件日期</li>
<li>[17-26] Time of reference event 事件时间</li>
<li>[28-33] Latitude 纬度</li>
<li>[35-41] Longitude 经度</li>
<li>[43-47] Depth 震源深度</li>
<li>[49-55] Reported magnitudes, usually mb and MS 震级，通常是mb（体波震级）或ms（面波震级）</li>
<li>[57-80] Geographical location (24 characters) 地理位置，24个字符</li>
</ul>
<h3 id="第二行：CMT信息-1"><a href="#第二行：CMT信息-1" class="headerlink" title="第二行：CMT信息 1"></a>第二行：CMT信息 1</h3><p>示例：</p>
<pre><code>C200501010142A   B: 17   27  40 S: 41   58  50 M:  0    0   0 CMT: 1 TRIHD:  0.7
</code></pre>
<ul>
<li><p>[1-16]  <em>CMT event name. This string is a unique CMT-event identifier. Older<br>  events have 8-character names, current ones have 14-character names.<br>  See (1) below for the naming conventions used.</em><br>  CMT事件名称。独一无二的CMT事件标识符，较老的事件8个字符，最近的是14个字符。note（1）中描述了命名规则。</p>
</li>
<li><p>[18-61] <em>Data used in the CMT inversion. Three data types may be used:<br>  Long-period body waves (B), Intermediate-period surface waves (S),<br>  and long-period mantle waves (M). For each data type, three values<br>  are given: the number of stations used, the number of components<br>  used, and the shortest period used.</em><br>  B S M CMT反演使用的数据，三类数据类型：</p>
<ul>
<li>B：长周期体波 </li>
<li>S：中等周期面波</li>
<li>M：长周期地幔波<br>每一个数据类型有三个数值：台站数，通道数，使用的最短周期</li>
</ul>
</li>
<li><p>[63-68] <em>Type of source inverted for: “CMT: 0” - general moment tensor;<br>  “CMT: 1” - moment tensor with constraint of zero trace (standard);<br>  “CMT: 2” - double-couple source.</em><br>  反转源类型： </p>
<ul>
<li>0：一般矩张量</li>
<li>1：具有零迹约束的矩张量？</li>
<li>2：双力偶震源</li>
</ul>
</li>
<li><p>[70-80] <em>Type and duration of moment-rate function assumed in the inversion.<br>  “TRIHD” indicates a triangular moment-rate function, “BOXHD” indicates<br>  a boxcar moment-rate function. The value given is half the duration<br>  of the moment-rate function. This value is assumed in the inversion,<br>  following a standard scaling relationship (see note (2) below),<br>  and is not derived from the analysis.</em><br>  反演中假设的矩率函数的类型和持续时间。</p>
<ul>
<li>“TRIHD”：表示三角形矩速率函数，</li>
<li>“BOXHD”：表示boxcar矩速率函数。给定的值是矩率函数持续时间的一半。该值在反演中按照标准缩放关系（见下面的note（2））假设，而不是从分析中得出的。</li>
</ul>
</li>
</ul>
<h3 id="第三行：CMT信息-2"><a href="#第三行：CMT信息-2" class="headerlink" title="第三行：CMT信息 2"></a>第三行：CMT信息 2</h3><p>示例：</p>
<pre><code>CENTROID:     -1.1 0.8   7.24 0.04   93.96 0.04  12.0  0.0 BDY  S-20050322125628
</code></pre>
<ul>
<li><p>[1-58]  <em>Centroid parameters determined in the inversion. Centroid time, given<br>  with respect to the reference time, centroid latitude, centroid<br>  longitude, and centroid depth. The value of each variable is followed<br>  by its estimated standard error. See note (3) below for cases in<br>  which the hypocentral coordinates are held fixed.</em><br>  反演中确定的质心参数。质心时间，相对于参考时间、质心纬度、质心经度和质心深度给出。每个变量的值后跟其估计的标准误差。关于次中心坐标固定的情况，见note（3）。例如第一个参数是2.9,则在第一行的时间基础上加2.9s，如果有负号就是减2.9s。</p>
</li>
<li><p>[60-63] <em>Type of depth. “FREE” indicates that the depth was a result of the<br>  inversion; “FIX “ that the depth was fixed and not inverted for;<br>  “BDY “ that the depth was fixed based on modeling of broad-band<br>  P waveforms.</em><br>  深度类型：</p>
<ul>
<li>FREE：深度是反演的结果</li>
<li>FIX：深度经过校正，没有经过反转？</li>
<li>BDY：深度经过模拟宽频P波校正</li>
</ul>
</li>
<li><p>[65-80] <em>Timestamp. This 16-character string identifies the type of analysis that<br>  led to the given CMT results and, for recent events, the date and<br>  time of the analysis. This is useful to distinguish Quick CMTs (“Q-“),<br>  calculated within hours of an event, from Standard CMTs (“S-“), which<br>  are calculated later. The format for this string should not be<br>  considered fixed.</em><br>  时间戳。16个字符长度的字符串，标识导致给定 CMT 结果的分析类型，以及分析的日期和时间（对于最近事件）。用来区分事件发生后小时内计算的快速CMTs（“Q-”），稍后计算的标准CMTs（“S-”）。字符串的格式不固定。</p>
</li>
</ul>
<h3 id="第四行：CMT信息-3"><a href="#第四行：CMT信息-3" class="headerlink" title="第四行：CMT信息 3"></a>第四行：CMT信息 3</h3><p>示例：</p>
<pre><code>23 -1.310 0.212  2.320 0.166 -1.010 0.241  0.013 0.535 -2.570 0.668  1.780 0.151
</code></pre>
<ul>
<li><p>[1-2]   <em>The exponent for all following moment values. For example, if the<br>  exponent is given as 24, the moment values that follow, expressed in<br>  dyne-cm, should be multiplied by 10**24.</em><br>  所有后续时刻值的指数。例如，如果指数为 24，则后面的矩值（以 dyne-cm 表示）应乘以 10**24。</p>
</li>
<li><p>[3-80]  <em>The six moment-tensor elements: Mrr, Mtt, Mpp, Mrt, Mrp, Mtp, where r<br>  is up, t is south, and p is east. See Aki and Richards for conversions<br>  to other coordinate systems. The value of each moment-tensor<br>element is followed by its estimated standard error. See note (4)<br>below for cases in which some elements are constrained in the inversion.</em><br>  六个矩张量元素：Mrr, Mtt, Mpp, Mrt, Mrp, Mtp</p>
<ul>
<li><p>r：up</p>
</li>
<li><p>t：south</p>
</li>
<li><p>p：east</p>
<p>每个矩张量元素的值后面跟着他的标准误差。有关某些元素在反转中受到限制的情况，请参见note（4）。</p>
</li>
</ul>
</li>
</ul>
<h3 id="第五行：CMT信息-4"><a href="#第五行：CMT信息-4" class="headerlink" title="第五行：CMT信息 4"></a>第五行：CMT信息 4</h3><p>示例：</p>
<pre><code>V10   3.376 16 149   0.611 43  44  -3.987 43 254   3.681 282 48  -23  28 73 -136
</code></pre>
<ul>
<li><p>[1-3]   <em>Version code. This three-character string is used to track the version<br>  of the program that generates the “ndk” file.</em><br>  版本号，三个字符的字符串用于记录获取ndk文件的程序版本号。</p>
</li>
<li><p>[4-48]  <em>Moment tensor expressed in its principal-axis system: eigenvalue,<br>  plunge, and azimuth of the three eigenvectors. The eigenvalue should be<br>  multiplied by 1.0E(exponent) as given on line four.</em><br>  在其主轴系统中表示的矩张量：三个特征向量的特征值、plunge和方位角。特征值应乘以 10**（指数），如第四行所示。</p>
</li>
<li><p>[50-56] <em>Scalar moment, to be multiplied by 1.0E(exponent) as given on line four.</em></p>
<p>  标量力矩，乘10**（第四行的指数）</p>
</li>
<li><p>[58-80] <em>Strike, dip, and rake for first nodal plane of the best-double-couple<br>  mechanism, repeated for the second nodal plane. The angles are defined<br>  as in Aki and Richards.</em><br>  最佳双耦合机制解第一个节面的走向，倾角，滑动角，后三个是第二个界面的相关数据。角度定义与Aki和Richards相同。</p>
</li>
</ul>
<h2 id="Notes-additional-information"><a href="#Notes-additional-information" class="headerlink" title="Notes (additional information):"></a>Notes (additional information):</h2><h3 id="NOTE-1"><a href="#NOTE-1" class="headerlink" title="NOTE 1"></a>NOTE 1</h3><p><em>CMT event names follow two conventions. Older events use an 8-character<br>name with the structure XMMDDYYZ, where MMDDYY represents the date of<br>the event, Z is a letter (A-Z followed by a-z) distinguishing different<br>events on the same day, and X is a letter (B,M,Z,C,…) used to identify<br>the types of data used in the inversion. Newer events use 14-character event<br>names with the structure XYYYYMMDDhhmmZ, in which the time is given to greater<br>precision, and the initial letter is limited to four possibilities: B - body<br>waves only, S - surface waves only, M - mantle waves only, C - a combination<br>of data types.</em></p>
<ul>
<li><p>较老的命名规则：8个字符，XMMDDYYZ</p>
<ul>
<li>MMDDYY：事件日期</li>
<li>X：用于标记反演中使用的数据类型。(B,M,Z,C,…) </li>
<li>Z：区分同一天不同的地震事件(A-Z 之后是 a-z)</li>
</ul>
</li>
<li><p>新的命名规则：14个字符，XYYYYMMDDhhmmZ</p>
<p>  2005年1月1日开始使用新的命名规则。</p>
<p>  事件时间更加精准，首字母X只有四种：</p>
<ul>
<li>B：只有体波</li>
<li>S：只有面波</li>
<li>M：只有地幔波</li>
<li>C：综合数据类型</li>
</ul>
</li>
</ul>
<h3 id="NOTE-2"><a href="#NOTE-2" class="headerlink" title="NOTE 2"></a>NOTE 2</h3><p><em>The source duration is generally estimated using an empirically determined<br>relationship such that the duration increases as the cube root of the scalar<br>moment. Specifically, we currently use a relationship where the half duration<br>for an event with moment 1E24 is 1.05 seconds, and for an event with moment<br>1E27 is 10.5 seconds.</em></p>
<p>源持续时间通常使用经验确定的关系来估计，使得持续时间随着标量矩的立方根而增加。<br>具体来说，我们目前使用的关系是，矩为 10<strong>24 的事件的半持续时间为 1.05 秒，<br>矩为 10</strong>27 的事件的半持续时间为 10.5 秒。</p>
<h3 id="NOTE-3"><a href="#NOTE-3" class="headerlink" title="NOTE 3"></a>NOTE 3</h3><p><em>For some small earthquakes for which the azimuthal distribution of stations<br>with useful seismograms is poor, we constrain the epicenter of the event to<br>the reference location. This is reflected in the catalog by standard<br>errors of 0.0 for both the centroid latitude and the centroid longitude.</em></p>
<p>对于一些具有有用地震图的台站方位分布较差的小地震，我们将事件的震中限制在参考位置。<br>这反映在目录中，质心纬度和质心经度的标准误差均为 0.0。</p>
<h3 id="NOTE-4"><a href="#NOTE-4" class="headerlink" title="NOTE 4"></a>NOTE 4</h3><p><em>For some very shallow earthquakes, the CMT inversion does not well<br>constrain the vertical-dip-slip components of the moment tensor (Mrt and Mrp),<br>and we constrain these components to zero in the inversion. The standard<br>errors for Mrt and Mrp are set to zero in this case.</em></p>
<p>对于一些很浅的地震，CMT 反演并没有很好地约束矩张量的垂直倾滑分量（Mrt 和 Mrp），<br>我们在反演中将这些分量约束为零。在这种情况下，Mrt 和 Mrp 的标准误差设置为零。</p>
<h1 id="MINEOS-CMT数据格式"><a href="#MINEOS-CMT数据格式" class="headerlink" title="MINEOS CMT数据格式"></a>MINEOS CMT数据格式</h1><h2 id="官方内容"><a href="#官方内容" class="headerlink" title="官方内容"></a>官方内容</h2><p><em>There is a single event file called china_cmt_event.txt that contains Harvard CMT infor-mation for an event in Southern China.</em></p>
<p>单个事件文件：包含单个中国南部地震事件的 Harvard CMT 信息</p>
<p><em>The third input file is the file china_cmt_evt, which is a single-lined listing containing the coordinates and event parameters of an earthquake in China. The moment tensor is not used by this program, but by the program syndat which follows.</em></p>
<p>单行列表包含坐标和事件参数。矩张量不由这个程序（green）使用，而是在程序syndat中使用</p>
<p><em>This example will choose modes only between frequencies of 0 and 166 mHz (i.e., periods greater than 6 sec). It will produce Green’s functions that are 8000 samples long. The time sampling specified in the china_cmt_evt file is 1 sec, so this is a time series length of a little over two hours. In many cases, both the minor and major arc arrivals can be seen.</em><br><em>The program will output a .wfdisc relation in the database called green; that is, a file called green.wfdisc which points to the waveforms on disk in a default location.</em></p>
<p>此示例将仅在 0 和 166 mHz 的频率（即大于 6 秒的周期）之间选择模式。它将产生 8000 个样本长的 Green 函数。china_cmt_evt文件中指定的时间采样为 1 秒，因此这是两个多小时的时间序列长度。在许多情况下，可以看到小弧和大弧到达。<br>该程序将在数据库中输出一个名为绿色的 .wfdisc 关系;也就是说，一个名为 green.wfdisc 的文件指向默认位置的磁盘上的波形。</p>
<p><em>Figure B.1: Station BJT. Comparison with Herrmann’s plane code. Three-component synthetic seismogram<br>for the fundamental spheroidal and toroidal modes. Mineos seismogram is plotted in red, Herrmann’s in<br>blue. Earthquake is 25.39N, 101.40E (Southern China), depth is 33 km. Model is PREM, in which the water<br>layer is filled with the upper crust’s velocities. The crust has only two layers.</em></p>
<p>这一栏中包含了事件信息，得知事件的坐标和发震深度。</p>
<h2 id="格式内容"><a href="#格式内容" class="headerlink" title="格式内容"></a>格式内容</h2><p>harward CMT保存的.ndk格式的cmt数据:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PDE  2000/01/14 23:37:07.9  25.61  101.06  33.0 5.4 5.9 YUNNAN PROVINCE, CHINA  </span><br><span class="line">B011400F         B: 57  127  45 S:  0    0   0 M:  0    0   0 CMT: 1 BOXHD:  2.3</span><br><span class="line">CENTROID:      2.9 0.2  25.39 0.02  101.40 0.02  33.0  0.0 FIX  O-00000000000000</span><br><span class="line">24 -0.600 0.095 -6.289 0.121  6.888 0.132 -1.854 0.256  0.118 0.239 -4.726 0.118</span><br><span class="line">V10   8.460  4 252  -0.260 76 143  -8.200 13 343   8.330  27 78   -6 118 84 -168</span><br></pre></td></tr></table></figure>

<p>china_cmt_event的数据格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">B011400F 2000  14 23 37 10.80 25.39  101.40  33.00 1.0 -2.3 8.33e24 -0.60  -6.29   6.89  -1.85   0.12  -4.73 1.0e24 27 78   -6 118 84 -168</span><br></pre></td></tr></table></figure>

<p>格式内容（补充了参数含义）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">B011400F（事件编号evid） 2000（年份）  14（一年的第几天） 23（时） 37（分） 10.80（centroid秒） 25.39（CENTROID纬度）  101.40（CENTROID经度）  33.00（CENTROID震源深度） 1.0（CMT） -2.3（BOXHD但是原本是正值，这里是负值） 8.33e24（） -0.60（Mrr）  -6.29(Mpp)   6.89(Mtt)  -1.85(Mrt)   0.12(Mrp)  -4.73(Mtp) 1.0e24（） 27 78   -6 118 84 -168（这六个数是第一个节面、第二个节面的走向、倾向、方位角）</span><br></pre></td></tr></table></figure>

<p>以下[ ]内为这些数据的字节数，如果字节数不足则在前方补充空格。实际编辑使用空格隔开每个参数即可，不必限制字节。</p>
<p><strong>注：由于新版事件编号为14个字符长度，因此在MINEOS导入过程中事件编号只能导入前8个字符。具体影响未知。</strong></p>
<table>
<thead>
<tr>
<th align="center">字节位置</th>
<th align="center">含义</th>
<th align="center">字节位置</th>
<th align="center">含义</th>
<th align="center">字节位置</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">[1-8]</td>
<td align="center">事件编号evid</td>
<td align="center">[45-50]</td>
<td align="center">centroid震源深度</td>
<td align="center">[96-101]</td>
<td align="center">Mrp(Mrφ)</td>
</tr>
<tr>
<td align="center">[10-13]</td>
<td align="center">年份</td>
<td align="center">[52-54]</td>
<td align="center">格林函数和地震图的时间步长，单位s</td>
<td align="center">[103-108]</td>
<td align="center">Mtp(Mθφ)</td>
</tr>
<tr>
<td align="center">[15-17]</td>
<td align="center">一年第几天</td>
<td align="center">[56-59]</td>
<td align="center">halfd source half-time duration 单位s</td>
<td align="center">[110-115]</td>
<td align="center">Mn 张量分量的归一化系数</td>
</tr>
<tr>
<td align="center">[19-20]</td>
<td align="center">时 （事件发生时间）</td>
<td align="center">[61-67]</td>
<td align="center">M0，标量张量矩，单位dyn*cm</td>
<td align="center">[117-118]</td>
<td align="center">第一个节面的走向strike</td>
</tr>
<tr>
<td align="center">[22-23]</td>
<td align="center">分</td>
<td align="center">[69-73]</td>
<td align="center">Mrr</td>
<td align="center">[120-121]</td>
<td align="center">第一个节面的倾向dip</td>
</tr>
<tr>
<td align="center">[25-29]</td>
<td align="center">centroid秒，小数格式</td>
<td align="center">[75-80]</td>
<td align="center">Mtt (Mθθ)</td>
<td align="center">[123-126]</td>
<td align="center">第一个节面的滑动角 slip</td>
</tr>
<tr>
<td align="center">[31-35]</td>
<td align="center">centroid纬度</td>
<td align="center">[82-87]</td>
<td align="center">Mpp  (Mφφ)</td>
<td align="center">[128-130]</td>
<td align="center">第二个节面的走向</td>
</tr>
<tr>
<td align="center">[37-43]</td>
<td align="center">centroid经度</td>
<td align="center">[89-94]</td>
<td align="center">Mrt (Mrθ)</td>
<td align="center">[132-133]</td>
<td align="center">第二个节面的倾向</td>
</tr>
<tr>
<td align="center">******</td>
<td align="center">*****</td>
<td align="center">*******</td>
<td align="center">******</td>
<td align="center">[135-138]</td>
<td align="center">第二个节面的滑动角</td>
</tr>
</tbody></table>
<p>Mrr, Mtt, Mpp, Mrt, Mrp, Mtp 通过Mn归一化的矩张量分量。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhiyuanshi1901.github.io/2022/12/31/TauP%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/31/TauP%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">TauP安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-12-31 21:02:52 / Modified: 21:06:09" itemprop="dateCreated datePublished" datetime="2022-12-31T21:02:52+08:00">2022-12-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%9C%B0%E9%9C%87%E5%AD%A6%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">地震学常用软件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h1><p><a target="_blank" rel="noopener" href="https://seismo-learn.org/software/taup/install/">https://seismo-learn.org/software/taup/install/</a></p>
<h1 id="官方网站："><a href="#官方网站：" class="headerlink" title="官方网站："></a>官方网站：</h1><p><a target="_blank" rel="noopener" href="https://www.seis.sc.edu/taup/">https://www.seis.sc.edu/taup/</a></p>
<h1 id="java安装："><a href="#java安装：" class="headerlink" title="java安装："></a>java安装：</h1><p>需要安装java运行环境。</p>
<pre><code>sudo yum install epel-release
sudo yum install java-11-openjdk
</code></pre>
<h1 id="TauP安装"><a href="#TauP安装" class="headerlink" title="TauP安装"></a>TauP安装</h1><p>将下载的安装包解压</p>
<pre><code>tar -xvf TauP-2.6.1.tgz
</code></pre>
<p>将taup安装到&#x2F;opt&#x2F;目录下:</p>
<pre><code>mkdir -p ~/opt/
mv TauP-2.6.1 ~/opt/
</code></pre>
<p>修改环境变量，将Taup的路径添加到PATH中：</p>
<pre><code>echo &#39;export PATH=$&#123;HOME&#125;/opt/TauP-2.5.0/bin:$&#123;PATH&#125;&#39; &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre>
<p>终端输入taup，出现Taup图形界面即可。</p>
<h1 id="出现过的问题"><a href="#出现过的问题" class="headerlink" title="出现过的问题"></a>出现过的问题</h1><p>如果出现</p>
<pre><code>Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 0
    at edu.sc.seis.TauP.ToolRun.main(ToolRun.java:140)
</code></pre>
<p>说明java版本问题，重装即可。</p>
<p>首先卸载原有java，查看java版本</p>
<pre><code>java -version
</code></pre>
<p>显示：</p>
<pre><code>java-11-openjdk-headless-11.0.17.0.8-2.el8.x86_64
tzdata-java-2022g-1.el8.noarch
javapackages-filesystem-5.3.0-1.module_el8.0.0+11+5b8c10bd.noarch
java-11-openjdk-11.0.17.0.8-2.el8.x86_64
java-1.8.0-openjdk-headless-1.8.0.352.b08-2.el8.x86_64
</code></pre>
<p>卸载java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove java-11-openjdk-headless-11.0.17.0.8-2.el8.x86_64</span><br><span class="line">yum -y remove java-1.8.0-openjdk-headless-1.8.0.352.b08-2.el8.x86_64</span><br></pre></td></tr></table></figure>

<p>检查是否卸载完成</p>
<pre><code>java -version
</code></pre>
<p>若显示没有java文件，即可重装：运行java安装命令即可。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhiyuanshi1901.github.io/2022/12/29/Mineos%E6%96%B0%E6%A8%A1%E5%9E%8B%E8%BF%90%E8%A1%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/29/Mineos%E6%96%B0%E6%A8%A1%E5%9E%8B%E8%BF%90%E8%A1%8C/" class="post-title-link" itemprop="url">Mineos新模型运行</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-12-29 21:40:07 / Modified: 21:51:19" itemprop="dateCreated datePublished" datetime="2022-12-29T21:40:07+08:00">2022-12-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%9C%B0%E9%9C%87%E5%AD%A6%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">地震学常用软件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="试运行minos-bran-f"><a href="#试运行minos-bran-f" class="headerlink" title="试运行minos_bran.f"></a>试运行minos_bran.f</h1><h2 id="错误示例"><a href="#错误示例" class="headerlink" title="错误示例"></a>错误示例</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">(base) [shizhiyuan@localhost mineos-1.0.0.rbh]$ ./minos_bran</span><br><span class="line"> input model file:</span><br><span class="line">/DEMO/models/CPacific.txt    </span><br><span class="line"> /DEMO/models/CPacific.txt</span><br><span class="line"> output file:</span><br><span class="line">CP_S</span><br><span class="line"> CP_S</span><br><span class="line">At line 400 of file minos_bran.f (unit = 7, file = &#x27;fort.7&#x27;)</span><br><span class="line">Fortran runtime error: End of file</span><br><span class="line"></span><br><span class="line">Error termination. Backtrace:</span><br><span class="line">#0  0x7f5d66f41171 in ???</span><br><span class="line">#1  0x7f5d66f41d19 in ???</span><br><span class="line">#2  0x7f5d66f42521 in ???</span><br><span class="line">#3  0x7f5d6714a12b in ???</span><br><span class="line">#4  0x7f5d6714a722 in ???</span><br><span class="line">#5  0x7f5d6714729b in ???</span><br><span class="line">#6  0x7f5d6714be34 in ???</span><br><span class="line">#7  0x7f5d6714cca4 in ???</span><br><span class="line">#8  0x7f5d67149bb4 in ???</span><br><span class="line">#9  0x410ded in ???</span><br><span class="line">#10  0x41221c in ???</span><br><span class="line">#11  0x400c5c in ???</span><br><span class="line">#12  0x7f5d663bcd84 in ???</span><br><span class="line">#13  0x400c8d in ???</span><br></pre></td></tr></table></figure>


<p>这里出现了报错，原因是输入模型文件的时候路径需要特定的格式，如下是正确的运行：</p>
<h2 id="正确示例"><a href="#正确示例" class="headerlink" title="正确示例"></a>正确示例</h2><p>这里试运行NRussia模型，设置文件夹为DEMO4。</p>
<h3 id="运行内容是生成S振型的文件。"><a href="#运行内容是生成S振型的文件。" class="headerlink" title="运行内容是生成S振型的文件。"></a>运行内容是生成S振型的文件。</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(base) [shizhiyuan@localhost DEMO4]$ time minos_bran</span><br><span class="line"> input model file:</span><br><span class="line">../models/NRussia.txt</span><br><span class="line"> ../models/NRussia.txt</span><br><span class="line"> output file:</span><br><span class="line">NRussia_S</span><br><span class="line"> NRussia_S</span><br><span class="line"> eigenfunction file (output):</span><br><span class="line">eNRussia_S </span><br><span class="line"> eNRussia_S</span><br><span class="line"> enter eps and wgrav</span><br><span class="line">1e-10 10</span><br><span class="line">   1.0000000000000000E-010   10.000000000000000     </span><br><span class="line"> enter jcom (1=rad;2=tor;3=sph;4=ictor)</span><br><span class="line">3</span><br><span class="line">           3</span><br><span class="line"> enter lmin,lmax,wmin,wmax,nmin,nmax</span><br><span class="line">1 6000 0.0 166.0 0 0</span><br><span class="line">           1        6000   0.0000000000000000        166.00000000000000                0           0</span><br><span class="line"></span><br><span class="line">real	1m13.243s</span><br><span class="line">user	0m1.250s</span><br><span class="line">sys	0m0.006s</span><br></pre></td></tr></table></figure>

<h3 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h3><p>正确示例中已经cd到DEMO文件夹下，此时需要退出到前一个文件夹，才能进入到models文件夹。因此，路径为：<br>..&#x2F;models&#x2F;NRussia.txt<br>这样运行实测不会出现错误。但是之前运行是在外部文件夹下，理应直接&#x2F;DEMO……这样是没有问题的。但是实测不行，也不知道为什么。目前在DEMO新建文件夹使用没有问题，而且这样能够区分不同的DEMO。</p>
<h3 id="生成T振型的文件"><a href="#生成T振型的文件" class="headerlink" title="生成T振型的文件"></a>生成T振型的文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(base) [shizhiyuan@localhost DEMO4]$ time minos_bran</span><br><span class="line"> input model file:</span><br><span class="line">../models/NRussia.txt</span><br><span class="line"> ../models/NRussia.txt</span><br><span class="line"> output file:</span><br><span class="line">NRussia_T</span><br><span class="line"> NRussia_T</span><br><span class="line"> eigenfunction file (output):</span><br><span class="line">eNRussia_T</span><br><span class="line"> eNRussia_T</span><br><span class="line"> enter eps and wgrav</span><br><span class="line">1.0e-10 1</span><br><span class="line">   1.0000000000000000E-010   1.0000000000000000     </span><br><span class="line"> enter jcom (1=rad;2=tor;3=sph;4=ictor)</span><br><span class="line">2</span><br><span class="line">           2</span><br><span class="line"> enter lmin,lmax,wmin,wmax,nmin,nmax</span><br><span class="line">1 6000 0.0 166.0 0 0</span><br><span class="line">           1        6000   0.0000000000000000        166.00000000000000                0           0</span><br><span class="line"></span><br><span class="line">real	1m13.767s</span><br><span class="line">user	0m0.248s</span><br><span class="line">sys	0m0.005s</span><br></pre></td></tr></table></figure>


<h1 id="运行eigcon"><a href="#运行eigcon" class="headerlink" title="运行eigcon"></a>运行eigcon</h1><h2 id="S振型的相关文件"><a href="#S振型的相关文件" class="headerlink" title="S振型的相关文件"></a>S振型的相关文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">(base) [shizhiyuan@localhost DEMO4]$ time eigcon</span><br><span class="line"> ============= Program eigcon ====================</span><br><span class="line">  spheroidals (3) or toroidals (2) or radial (1) or</span><br><span class="line">  inner core toroidals (4) modes</span><br><span class="line">3</span><br><span class="line">           3</span><br><span class="line">  enter name of model file</span><br><span class="line">../models/NRussia.txt</span><br><span class="line"> ../models/NRussia.txt</span><br><span class="line"> enter max depth [km] : </span><br><span class="line">1000</span><br><span class="line">   1000.00000    </span><br><span class="line">  enter name of minos_bran output text file</span><br><span class="line">NRussia_S</span><br><span class="line"> NRussia_S</span><br><span class="line">  minos_bran output binary unformatted file name</span><br><span class="line">eNRussia_S</span><br><span class="line"> eNRussia_S</span><br><span class="line">  enter path/dbase_name or dbase_name to store eigenfunctions:</span><br><span class="line">test_S</span><br><span class="line"> test_S</span><br><span class="line"> ====================================================</span><br><span class="line"> eigcon: n,nstart,nrad =          260         119         142</span><br><span class="line"></span><br><span class="line">real	1m3.563s</span><br><span class="line">user	0m0.041s</span><br><span class="line">sys	0m0.008s</span><br></pre></td></tr></table></figure>
<h2 id="T振型相关"><a href="#T振型相关" class="headerlink" title="T振型相关"></a>T振型相关</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">(base) [shizhiyuan@localhost DEMO4]$ time eigcon</span><br><span class="line"> ============= Program eigcon ====================</span><br><span class="line">  spheroidals (3) or toroidals (2) or radial (1) or</span><br><span class="line">  inner core toroidals (4) modes</span><br><span class="line">2</span><br><span class="line">           2</span><br><span class="line">  enter name of model file</span><br><span class="line">../models/NRussia.txt</span><br><span class="line"> ../models/NRussia.txt</span><br><span class="line"> enter max depth [km] : </span><br><span class="line">1000</span><br><span class="line">   1000.00000    </span><br><span class="line">  enter name of minos_bran output text file</span><br><span class="line">NRussia_T</span><br><span class="line"> NRussia_T</span><br><span class="line">  minos_bran output binary unformatted file name</span><br><span class="line">eNRussia_T</span><br><span class="line"> eNRussia_T</span><br><span class="line">  enter path/dbase_name or dbase_name to store eigenfunctions:</span><br><span class="line">test_T</span><br><span class="line"> test_T</span><br><span class="line"> ====================================================</span><br><span class="line"> eigcon: n,nstart,nrad =          260         119         142</span><br><span class="line"></span><br><span class="line">real	1m9.287s</span><br><span class="line">user	0m0.021s</span><br><span class="line">sys	0m0.004s</span><br></pre></td></tr></table></figure>

<h1 id="green运行"><a href="#green运行" class="headerlink" title="green运行"></a>green运行</h1><p>此处复制了DEMO3的short.site;short.sitechan;china_cmt_event文件;db_list文件。这四个文件需要预先编辑完成。关于这四个文件如何编辑将在其他地方讲述，目前未完成。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">(base) [shizhiyuan@localhost DEMO4]$ time green</span><br><span class="line"> ============= Program green ====================</span><br><span class="line"> enter path to db with sta &amp; stachan:</span><br><span class="line">short</span><br><span class="line"> short</span><br><span class="line"> enter name of file within list of nmodes db:</span><br><span class="line">db_list        </span><br><span class="line"> db_list</span><br><span class="line"> enter input CMT file name:</span><br><span class="line">china_cmt_event</span><br><span class="line"> china_cmt_event</span><br><span class="line"> min and max frequencies to be considered (mHz) : </span><br><span class="line">10 260</span><br><span class="line">   10.0000000       260.000000    </span><br><span class="line"> enter # pts in greens fns .le.        30000  :</span><br><span class="line">8000</span><br><span class="line">        8000</span><br><span class="line"> enter Green functions output db file name:</span><br><span class="line">green</span><br><span class="line"> green</span><br><span class="line"> ====================================================</span><br><span class="line"> green: Event: B011400F  2000  14 23:37:10.800 lat =   25.390, lon =   101.400</span><br><span class="line"> green:        source depth = 33.0 km</span><br><span class="line"> green: step =    1.000 sec, nsamples =   8000</span><br><span class="line"> green: # sph. modes in band =        1918   must be .le.       300000</span><br><span class="line"> green: # tor. modes in band =        1712   must be .le.       300000</span><br><span class="line"> green: Input dbname : short</span><br><span class="line"> green: Station: ALE      82.5033  -62.3500 , Channels: 3</span><br><span class="line"> green: Channel: #            1   ALE   LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   ALE   LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   ALE   LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :     72.020</span><br><span class="line"> green: Azimuth of Source   :     15.433</span><br><span class="line"> green:    1 ALE    LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:    2 ALE    LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:    3 ALE    LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: ANMO     34.9502 -106.4602 , Channels: 3</span><br><span class="line"> green: Channel: #            1   ANMO  LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   ANMO  LH2        10.0000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   ANMO  LH1        280.000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :    114.439</span><br><span class="line"> green: Azimuth of Source   :    -27.665</span><br><span class="line"> green:    4 ANMO   LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:    5 ANMO   LH2     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:    6 ANMO   LH1     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: BAK      35.3441 -119.1043 , Channels: 3</span><br><span class="line"> green: Channel: #            1   BAK   BHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   BAK   BHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   BAK   BHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :    108.462</span><br><span class="line"> green: Azimuth of Source   :    -38.270</span><br><span class="line"> green:    7 BAK    BHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:    8 BAK    BHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:    9 BAK    BHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: BDFB    -15.6418  -48.0148 , Channels: 3</span><br><span class="line"> green: Channel: #            1   BDFB  LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   BDFB  LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   BDFB  LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :    149.822</span><br><span class="line"> green: Azimuth of Source   :     66.283</span><br><span class="line"> green:   10 BDFB   LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   11 BDFB   LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   12 BDFB   LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: BILL     68.0651  166.4524 , Channels: 3</span><br><span class="line"> green: Channel: #            1   BILL  LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   BILL  LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   BILL  LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :     57.417</span><br><span class="line"> green: Azimuth of Source   :   -103.266</span><br><span class="line"> green:   13 BILL   LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   14 BILL   LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   15 BILL   LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: BJT      40.0183  116.1679 , Channels: 3</span><br><span class="line"> green: Channel: #            1   BJT   LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   BJT   LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   BJT   LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :     19.123</span><br><span class="line"> green: Azimuth of Source   :   -135.267</span><br><span class="line"> green:   16 BJT    LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   17 BJT    LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   18 BJT    LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: BRVK     53.0581   70.2828 , Channels: 3</span><br><span class="line"> green: Channel: #            1   BRVK  LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   BRVK  LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   BRVK  LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :     36.158</span><br><span class="line"> green: Azimuth of Source   :    127.603</span><br><span class="line"> green:   19 BRVK   LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   20 BRVK   LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   21 BRVK   LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: CASY    -66.2792  110.5364 , Channels: 3</span><br><span class="line"> green: Channel: #            1   CASY  LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   CASY  LHN        180.000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   CASY  LHE        270.000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :     91.644</span><br><span class="line"> green: Azimuth of Source   :     -8.261</span><br><span class="line"> green:   22 CASY   LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   23 CASY   LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   24 CASY   LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: CCM      38.0557  -91.2446 , Channels: 3</span><br><span class="line"> green: Channel: #            1   CCM   LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   CCM   LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   CCM   LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :    115.783</span><br><span class="line"> green: Azimuth of Source   :    -12.703</span><br><span class="line"> green:   25 CCM    LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   26 CCM    LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   27 CCM    LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: TLY      51.6807  103.6438 , Channels: 3</span><br><span class="line"> green: Channel: #            1   TLY   LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   TLY   LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   TLY   LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :     26.308</span><br><span class="line"> green: Azimuth of Source   :   -175.417</span><br><span class="line"> green:   28 TLY    LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   29 TLY    LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   30 TLY    LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"></span><br><span class="line">real	1m30.361s</span><br><span class="line">user	0m1.101s</span><br><span class="line">sys	0m0.014s</span><br></pre></td></tr></table></figure>

<h1 id="生成理论地震图"><a href="#生成理论地震图" class="headerlink" title="生成理论地震图"></a>生成理论地震图</h1><p>使用syndat即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">(base) [shizhiyuan@localhost DEMO4]$ time syndat</span><br><span class="line"> ============== Program syndat ==================</span><br><span class="line"> enter input CMT file name:</span><br><span class="line">china_cmt_event</span><br><span class="line"> china_cmt_event</span><br><span class="line"> enter tensor type: 0 - moment, 1 - nodal plane 1, 2 - nodal plane 2</span><br><span class="line">0</span><br><span class="line">           0</span><br><span class="line"> enter input dbname</span><br><span class="line">green</span><br><span class="line"> green</span><br><span class="line"> enter output dbname</span><br><span class="line">Syndat</span><br><span class="line"> Syndat</span><br><span class="line"> Enter output units: 0 [nm/s/s] 1 [nm/s] 2 [nm]</span><br><span class="line">0</span><br><span class="line">syndat: CMT solution:</span><br><span class="line">syndat: Event: B011400F 2000  14 23: 37: 10.8, lat/lon =    25.39   101.40,</span><br><span class="line">syndat: depth =   33.0 km, step =    1.000 sec, Duration =  -2.3 sec,</span><br><span class="line">syndat: M0 =   0.833E+25,</span><br><span class="line">syndat: comp:  -0.600E+24 -0.629E+25  0.689E+25 -0.185E+25  0.120E+24 -0.473E+25</span><br><span class="line">syndat: plane1:   27.  78.  -6. plane2:  118.  84.-168.</span><br><span class="line">syndat: Selected moment tensor components:</span><br><span class="line">syndat: -0.600E+24 -0.629E+25  0.689E+25 -0.185E+25  0.120E+24 -0.473E+25</span><br><span class="line"></span><br><span class="line">syndat: Synthetic waveforms: </span><br><span class="line">syndat:    1 ALE    LHZ         1.000    8000</span><br><span class="line">syndat:    2 ALE    LHN         1.000    8000</span><br><span class="line">syndat:    3 ALE    LHE         1.000    8000</span><br><span class="line">syndat:    4 ANMO   LHZ         1.000    8000</span><br><span class="line">syndat:    5 ANMO   LH2         1.000    8000</span><br><span class="line">syndat:    6 ANMO   LH1         1.000    8000</span><br><span class="line">syndat:    7 BAK    BHZ         1.000    8000</span><br><span class="line">syndat:    8 BAK    BHN         1.000    8000</span><br><span class="line">syndat:    9 BAK    BHE         1.000    8000</span><br><span class="line">syndat:   10 BDFB   LHZ         1.000    8000</span><br><span class="line">syndat:   11 BDFB   LHN         1.000    8000</span><br><span class="line">syndat:   12 BDFB   LHE         1.000    8000</span><br><span class="line">syndat:   13 BILL   LHZ         1.000    8000</span><br><span class="line">syndat:   14 BILL   LHN         1.000    8000</span><br><span class="line">syndat:   15 BILL   LHE         1.000    8000</span><br><span class="line">syndat:   16 BJT    LHZ         1.000    8000</span><br><span class="line">syndat:   17 BJT    LHN         1.000    8000</span><br><span class="line">syndat:   18 BJT    LHE         1.000    8000</span><br><span class="line">syndat:   19 BRVK   LHZ         1.000    8000</span><br><span class="line">syndat:   20 BRVK   LHN         1.000    8000</span><br><span class="line">syndat:   21 BRVK   LHE         1.000    8000</span><br><span class="line">syndat:   22 CASY   LHZ         1.000    8000</span><br><span class="line">syndat:   23 CASY   LHN         1.000    8000</span><br><span class="line">syndat:   24 CASY   LHE         1.000    8000</span><br><span class="line">syndat:   25 CCM    LHZ         1.000    8000</span><br><span class="line">syndat:   26 CCM    LHN         1.000    8000</span><br><span class="line">syndat:   27 CCM    LHE         1.000    8000</span><br><span class="line">syndat:   28 TLY    LHZ         1.000    8000</span><br><span class="line">syndat:   29 TLY    LHN         1.000    8000</span><br><span class="line">syndat:   30 TLY    LHE         1.000    8000</span><br><span class="line"></span><br><span class="line">real	0m23.119s</span><br><span class="line">user	0m0.006s</span><br><span class="line">sys	0m0.002s</span><br></pre></td></tr></table></figure>

<h1 id="将理论地震图转化为SAC格式"><a href="#将理论地震图转化为SAC格式" class="headerlink" title="将理论地震图转化为SAC格式"></a>将理论地震图转化为SAC格式</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(base) [shizhiyuan@localhost DEMO4]$ time cucss2sac Syndat Syndat_SAC</span><br><span class="line">Relation Syndat.origin does not exist. Event info is not included in SAC header.</span><br><span class="line">Relation Syndat.site does not exist. Stations info is not included in SAC header.</span><br><span class="line"></span><br><span class="line">real	0m0.006s</span><br><span class="line">user	0m0.001s</span><br><span class="line">sys	0m0.003s</span><br></pre></td></tr></table></figure>

<h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><p>在这里发现相比于DEMO3,这里缺少了Syndat.site，Syndat.sitechan，Syndat.origin文件，因此缺失了台站和事件信息。</p>
<p>查看DEMO3的bash文件，发现运行green之后有这样的语句：</p>
<pre><code>cp -p short.site green.site
cp -p short.sitechan green.sitechan
creat_origin china_cmt_event green
</code></pre>
<p>这三个语句创建了green的三类文件：.site,.sitechan和.origin。</p>
<p>同样的，在运行完Syndat之后也有语句</p>
<pre><code>cp -p short.site Syndat.site
cp -p short.sitechan Syndat.sitechan
creat_origin china_cmt_event Syndat
</code></pre>
<p>补充之后,内容便完整了。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhiyuanshi1901.github.io/2022/12/27/CPS-%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/27/CPS-%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">CPS 安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-12-27 18:26:24 / Modified: 18:28:19" itemprop="dateCreated datePublished" datetime="2022-12-27T18:26:24+08:00">2022-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%9C%B0%E9%9C%87%E5%AD%A6%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">地震学常用软件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="将安装包解压"><a href="#将安装包解压" class="headerlink" title="将安装包解压"></a>将安装包解压</h1><h1 id="将解压后的文件移动到指定的CPS安装目录"><a href="#将解压后的文件移动到指定的CPS安装目录" class="headerlink" title="将解压后的文件移动到指定的CPS安装目录"></a>将解压后的文件移动到指定的CPS安装目录</h1><pre><code>mkdir -p ~/src/
mv PROGRAMS.330 ~/src/CPS
</code></pre>
<h1 id="安装依赖环境"><a href="#安装依赖环境" class="headerlink" title="安装依赖环境"></a>安装依赖环境</h1><pre><code>sudo yum install libX11-devel
</code></pre>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>进入源码目录</p>
<pre><code>cd ~/src/CPS
./Setup LINUX6440
</code></pre>
<h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><pre><code>./C
</code></pre>
<h1 id="修改环境变量"><a href="#修改环境变量" class="headerlink" title="修改环境变量"></a>修改环境变量</h1><pre><code>echo &#39;# CPS computer programme of seismology&#39; &gt;&gt; ~/.bashrc
echo &#39;export PATH=$&#123;HOME&#125;/src/CPS/bin:$&#123;PATH&#125;&#39; &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre>
<h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><pre><code>sdisp96 -h
</code></pre>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="https://seismo-learn.org/software/cps/install/">https://seismo-learn.org/software/cps/install/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhiyuanshi1901.github.io/2022/12/27/Mineos-%E7%A8%8B%E5%BA%8F%E5%8F%82%E6%95%B0%E8%A7%A3%E9%87%8A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/27/Mineos-%E7%A8%8B%E5%BA%8F%E5%8F%82%E6%95%B0%E8%A7%A3%E9%87%8A/" class="post-title-link" itemprop="url">Mineos 程序解释</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-12-27 18:22:10" itemprop="dateCreated datePublished" datetime="2022-12-27T18:22:10+08:00">2022-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-01-17 12:38:16" itemprop="dateModified" datetime="2023-01-17T12:38:16+08:00">2023-01-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%9C%B0%E9%9C%87%E5%AD%A6%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">地震学常用软件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h1><p>minos内README文件<br><a target="_blank" rel="noopener" href="http://chengxua.com/lishi/Julian_simp.html">儒略日计算器</a><br><a target="_blank" rel="noopener" href="http://quickeditor.top/days.html">日序计算器</a></p>
<h1 id="简要说明"><a href="#简要说明" class="headerlink" title="简要说明"></a>简要说明</h1><p>本文主要对mineos软件运行的程序进行了解与描述。<br>内容均源自程序内部解释与运行进程。<br>模型文件为DEMO中具有的PREM等地球模型。</p>
<h1 id="minos-bran"><a href="#minos-bran" class="headerlink" title="minos_bran"></a>minos_bran</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>包含一个输入：<br>模型文件</p>
<p>两个输出：<br>1、模型列表和简正振型属性摘要<br>2、本征函数的一个文件</p>
<h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><h3 id="jcom"><a href="#jcom" class="headerlink" title="jcom"></a>jcom</h3><p>jcom &#x3D; n， 当n为以下值时：</p>
<ul>
<li>1 radial modes 可能是指只有n值（径向振型）。</li>
<li>2 toroidal modes 环型振型（环振振型）</li>
<li>3 spheroidal modes 球型振型（球振振型）</li>
<li>4 inner core toroidal modes 内核环型振型；因为外核为液态，理论上内核有独立的振型。</li>
</ul>
<h3 id="lmin-lmax-wmin-wmax-nmin-nmax"><a href="#lmin-lmax-wmin-wmax-nmin-nmax" class="headerlink" title="lmin lmax wmin wmax nmin nmax"></a>lmin lmax wmin wmax nmin nmax</h3><p><em>lmin - lmax defines the range of angular orders to be computed.<br>if jcom&#x3D;1 this is ignored. wmin - wmax defines the frequency range to be computed (in millihertz)<br>nmin-nmax specifies the branch numbers to be computed – nmin&#x3D;0 is the fundamental mode</em></p>
<ul>
<li>lmin lmax 定义角度阶数，l。具体内容见扭振振型与球振振型。jcom为1时忽略</li>
<li>wmin wmax 定义计算的频率范围 单位：毫赫兹  振型存在一定的频率。频率与n和l组成的图像在（地震学、震源及地球结构概论图2.9-10所示）</li>
<li>nmin nmax 指定计算的分支编号 nmin&#x3D;0时为基阶振型</li>
</ul>
<h3 id="eps-wgrav"><a href="#eps-wgrav" class="headerlink" title="eps wgrav"></a>eps wgrav</h3><p><em>eps controls the accuracy of the runge-kutta integration scheme. the relative accuracy of an eigen frequency will be 2-3 x eps.<br>it also controls the precision with which a root is found and the minimum relative separation of two roots with the same<br>angular order.it is safe to set eps&#x3D;1.d-7.</em></p>
<p><em>wgrav is the frequency in millihertz above which gravitational<br>terms are neglected-this gives about a factor of 3 increase in speed.</em></p>
<ul>
<li>eps： 控制’’runge-kutta integration scheme’’的准确度。本征频率的相对准确度为2-3倍的eps。<br>它还控制找到根的精度以及具有相同角度顺序的两个根的最小相对距离。设置1e-7是安全的。<br>如果周期为5-10s，eps设置为10^(-12)-10^(-10)。</li>
<li>wgrav：  频率（单位毫赫兹）超过该频率的引力项被忽略。 造成3倍的速度增长。<br>忽略的是重力项；<em>Love 1911年地球的径向振动中考虑了重力的影响，和修订了基阶振型周期为60min。</em>具体的影响还未学习到。</li>
</ul>
<h2 id="输入文件（模型文件）"><a href="#输入文件（模型文件）" class="headerlink" title="输入文件（模型文件）"></a>输入文件（模型文件）</h2><h3 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h3><p>模型文件为计算所需的模型，有两种格式：一种为表格数据类型，例如prem模型；另一种格式为多项式格式。</p>
<h3 id="表格数据类型"><a href="#表格数据类型" class="headerlink" title="表格数据类型"></a>表格数据类型</h3><p>例：prem_noocean.txt</p>
<h4 id="第一行：标题，限制为80字节长度"><a href="#第一行：标题，限制为80字节长度" class="headerlink" title="第一行：标题，限制为80字节长度"></a>第一行：标题，限制为80字节长度</h4><pre><code>PREM NO OCEAN MODEL: (    0.0000    0.000) anisotropic case
</code></pre>
<h4 id="第二行：（按照参数出现顺序排列）"><a href="#第二行：（按照参数出现顺序排列）" class="headerlink" title="第二行：（按照参数出现顺序排列）"></a>第二行：（按照参数出现顺序排列）</h4><pre><code>1    1.00000  1
</code></pre>
<ul>
<li>ifanis 1表示各向异性模型（横向各向同性）；0表示各向同性。</li>
<li>tref 物理频散校正使用的模型参考周期（单位s）；&lt;0表示无校正</li>
<li>ifdeck 定义模型类型；1：模型表示为数据表格；0：模型表示为多项式</li>
</ul>
<h4 id="第三行："><a href="#第三行：" class="headerlink" title="第三行："></a>第三行：</h4><pre><code>185  33  66
</code></pre>
<ul>
<li>N 模型节点？，N&lt;&#x3D;350，指模型表格行数，表示有N个点。</li>
<li>nic ICB固态侧的索引？</li>
<li>noc CMB流体侧的索引？</li>
</ul>
<h4 id="第四行-第N-3行：模型表格主体，每一行表示节点在半径r上的模型参数。"><a href="#第四行-第N-3行：模型表格主体，每一行表示节点在半径r上的模型参数。" class="headerlink" title="第四行-第N+3行：模型表格主体，每一行表示节点在半径r上的模型参数。"></a>第四行-第N+3行：模型表格主体，每一行表示节点在半径r上的模型参数。</h4><p>注意：间断面定义为相同半径的不同节点，即两个相邻节点半径相同，但是参数不同。</p>
<pre><code>0. 13088.50 11262.20  3667.80   1327.7     84.6 11262.20  3667.80  1.00000
</code></pre>
<ul>
<li>r 节点所在球体半径（单位m ），注意：minos_bran小数部分去尾，因此厚度&lt;1m的薄层没有意义。薄层会造成额外的界面？。 如果模型包含液态界面，整个液态界面必须为没有中间节点的单层。半径从0（索引为1）开始，在自由界面结束。从球心开始。</li>
<li>rho 密度，单位kg&#x2F;m3</li>
<li>vpv 垂向偏振P波速度，单位m&#x2F;s</li>
<li>vsv 垂向偏振（极化）S波速度，单位m&#x2F;s</li>
<li>qkappa 压缩Q（compressional Q）</li>
<li>qshear 剪切波Q（shear Q）</li>
<li>vph 水平偏振P波速度，单位m&#x2F;s</li>
<li>vsh 水平偏振S波速度，单位m&#x2F;s</li>
<li>eta 横向各向同性模型参数</li>
</ul>
<p>注意：如果模型是各向同性的且ifanis&#x3D;1（横向各向同性），则minos_bran读取时会这样处理第四行之后的数据：<br>vph &#x3D; vpv, vsh &#x3D; vsv,  eta &#x3D; 1,<br>格式：(f8.0, 3f9.2, 2f9.1, 2f9.2, f9.5)</p>
<h3 id="模型类型为多项式类型时（ifdeck-x3D-0）"><a href="#模型类型为多项式类型时（ifdeck-x3D-0）" class="headerlink" title="模型类型为多项式类型时（ifdeck&#x3D;0）"></a>模型类型为多项式类型时（ifdeck&#x3D;0）</h3><h4 id="第三行：-暂无示例"><a href="#第三行：-暂无示例" class="headerlink" title="第三行： 暂无示例"></a>第三行： 暂无示例</h4><p>nreg 模型中区域的数量<br>nic ICB固态侧的索引？与表格数据类型相同<br>noc CMB流体侧的索引？<br>rx 多项式的归一化半径（normalizing radius） 单位km，通常是6371km。下文的归一化半径（normalized radius）应该为x&#x3D;r&#x2F;rx，</p>
<h4 id="第四行：暂无示例"><a href="#第四行：暂无示例" class="headerlink" title="第四行：暂无示例"></a>第四行：暂无示例</h4><p>nlay r1到r2区域中使用的层数<br>r1 单位km<br>r2 单位km</p>
<h4 id="第五行：第4-9或4-12层一般会重复nreg次。各项同性模型4-9行，各向异性模型为4-12行。"><a href="#第五行：第4-9或4-12层一般会重复nreg次。各项同性模型4-9行，各向异性模型为4-12行。" class="headerlink" title="第五行：第4-9或4-12层一般会重复nreg次。各项同性模型4-9行，各向异性模型为4-12行。"></a>第五行：第4-9或4-12层一般会重复nreg次。各项同性模型4-9行，各向异性模型为4-12行。</h4><p>每一行包含五个系数，4阶多项式系数为：a0，a1，a2，a3，a4，x&#x3D;r&#x2F;rx。P（x）&#x3D;a0+a1x+a2x^2+a3x^3+a4x^4。<br>一组5个（各向同性模型）或8个（各向异性模型）多项式用于差值模型参数：密度、速度等。作为第四行定义的区域内归一化半径的函数。</p>
<ul>
<li>第五行：密度rho的系数 (g&#x2F;cm3)</li>
<li>第六行：vpv的系数 (km&#x2F;s)</li>
<li>第七行：vsv的系数 (km&#x2F;s)</li>
<li>第八行：qkappa的系数</li>
<li>第九行：qshear的系数<br>下面三行各向异性模型中：</li>
<li>第十行：vph的系数 (km&#x2F;s)</li>
<li>第十一行：vsh的系数 (km&#x2F;s)</li>
<li>第十二行：eta的系数</li>
</ul>
<h2 id="输出文件"><a href="#输出文件" class="headerlink" title="输出文件"></a>输出文件</h2><h3 id="模型列表"><a href="#模型列表" class="headerlink" title="模型列表"></a>模型列表</h3><p>一个ASCII文件，列出了模型和mode properties（振型属性）。</p>
<p>例如：相速度（km&#x2F;s），频率，周期，群速度（km&#x2F;h），q，一个参数（动能与势能的比值-1）</p>
<p>在DEMO3示例中，prem_noocean_S文件就是输出的模型列表。<br>它的列表有两个表格，第一个表格是输入模型的数据，即第一部分，<br>此即prem_noocean.txt内的数据，标题为：<br><code>PREM NO OCEAN MODEL: (    0.0000    0.000) anisotropic case                     ref per =   1.0 secs</code><br>表示为PREM 无海洋的模型，采样间隔1s。<br>表头为：<br><code>level    radius        rho         vpv         vph         vsv         vsh         eta         qmu         qkap</code></p>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1         0.0    13088.50    11262.20    11262.20     3667.80     3667.80     1.00000       84.60     1327.70</span><br></pre></td></tr></table></figure>

<p>第二个表格（第二部分）表头为：<br><code>integration precision =  0.1000E-09  root precision =  0.1000E-09  gravity cut off =  0.6283E-02 rad/s</code></p>
<p><code>    mode        phs vel       w(mhz)          t(secs)      grp vel(km/s)        q             raylquo</code> </p>
<p>integration precision对应参数eps，<br>该表格中的w对应的范围为0-200,但是最后一行超过了200,想必是取值时由于步长原因超出了一点点。</p>
<h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><h5 id="第一部分：模型表格"><a href="#第一部分：模型表格" class="headerlink" title="第一部分：模型表格"></a>第一部分：模型表格</h5><p>如果使用的是表格数据格式的模型，即上文中ifdeck&#x3D;1，则只是输入模型的拷贝，加入了索引，改变了参数列的排列顺序。<br>对于各向同性模型，执行了上文中表述的数据处理。<br>如果输入的模型为多项式格式，则通过插值转换为表格数据格式。<br>每一个区域程序构造nlay+1个半径步长相同节点。节点总数N&#x3D;nreg*（nlay+1）；</p>
<ul>
<li>1-5行 包含模型标题、参考周期tref、模型列表的表头和空行。无格式。</li>
<li>6-（N+5）行 index、r、rho、vpv、vph、vsv、vsh、eta、qshear、qkappa，示例见上。<br>格式：(3x, i3, f12.1, 5f12.2, f12.5, 2f12.2)</li>
<li>N+6&#x2F;N+11行 包含具有 Runge-Kutta 精度积分、<br>重力切断频率、空行和简正振型属性表标题（共6行）的文本消息。格式：自由格式</li>
</ul>
<h5 id="第二部分：振型属性"><a href="#第二部分：振型属性" class="headerlink" title="第二部分：振型属性"></a>第二部分：振型属性</h5><p>对于固定的径向阶数 n 和角度阶数 l，minos_bran计算本征函数<br>（单独存储）和标量参数（属性）：特征值（频率）、相位和群速度、<br>Q 以及动能与势能之比。这些标量参数存储在简正振型属性表中。<br>此表中的每一行（行）都给出了当前 n 和 l 的属性。<br>第一部分后面的行如下所示：<br>第(N+12)行到最后：</p>
<ul>
<li>norder 振型的径向阶数 n</li>
<li>typeo 振荡的类型：<ul>
<li>s 球振振型</li>
<li>t 环振振型</li>
<li>c 内核环振振型</li>
</ul>
</li>
<li>lorder 振型的角阶数l</li>
<li>phvel 相速度，单位:km&#x2F;s</li>
<li>freq 频率（本征值） 单位：mHz</li>
<li>per 周期，per&#x3D;1000&#x2F;freq 单位:s</li>
<li>grvel 群速度 单位:km&#x2F;s</li>
<li>Q 剪切波Q</li>
<li>raylquo 动能与势能之比减1。<br>如果本征函数准确并且模型中有足够的径向节点允许正交精确完成，<br>则该比率应该很小（EPS 阶）。（对于强指数振型（如斯通利振型），<br>您可能会看到此参数有所下降。）</li>
</ul>
<p>格式：(i5, a2, i5, 6g16.7)</p>
<h3 id="本征函数文件"><a href="#本征函数文件" class="headerlink" title="本征函数文件"></a>本征函数文件</h3><p>在DEMO3中输出的文件为fortran无格式二进制文件eprem_noocean_S。是一个二进制表达的本征函数。<br>这个文件是一个固定记录长度的二进制封装文件，封装类型很大程度上取决于编译器。为了<br>更加方便，eigcon程序将封装移除，并创建一个二进制文件，在不同语言和平台都能够读取。minos_bran程序使用一个write语句输出每一个本征函数。</p>
<p>文件名为“none”时不再计算本征函数。</p>
<p>这是一个固定记录长度的二进制文件，每个模式都有一个条目写为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">real*4 abuf(nvec)</span><br><span class="line">......</span><br><span class="line">write(ioeig) (abuf(i),i=1,nvec)</span><br></pre></td></tr></table></figure>
<ul>
<li>nvec：spheroidal modes（球型振型），值为：5+6<em>N；toroidal or radial modes（环型或径向振型），值为：5+2</em>N。</li>
<li>abuf的前五个字为：n，l，w，Q和群速度Cg。剩余的包括：<ul>
<li>toroidal modes（环型振型）：W（1..N）、 W’（1..N）</li>
<li>球型振型：本征函数和其关于半径的偏导数 U(1..N),U’(1..N),V(1..N),V’(1..N),P(1..N)，P’(1..N)<ul>
<li>U： 垂直球振振型分量（vertical spheroidal S）本征函数</li>
<li>V: horizontal S component 水平S分量</li>
<li>P：重力势</li>
<li>W：其它振型的常用表示法</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>woodhouse和dahlen（1978）表示W,W’,V,V’ 必须除以 sqrt(l*(l+1)).<br><strong>注：（A be devided by B 相当于 A&#x2F;B）</strong></p>
<p>本征函数的归一化：</p>
<ul>
<li>归一化：<br>frequency<strong>2 * integral(rho<em>w</em>w<em>r</em>r) &#x3D; 1 for toroidal modes<br>frequency</strong>2 * integral(rho*(u<em>u+l</em>(l+1)<em>v</em>v)<em>r</em>r) &#x3D; 1 for spheroidal modes<br>模型经过归一化，密度（rho）为：5515 mg&#x2F;m*<em>3 &#x3D; 1；pi</em>g&#x3D;1<br>积分限为0到rn。W与rho为r的函数。</li>
</ul>
<p>g为重力常数，地球半径（rn&#x3D;6371000m）为1,归一化结果为：<br>acceleration normalisation（加速度归一化） &#x3D; pi<em>g</em>rhobar*rn</p>
<p>velocity normalisation（速度归一化）     &#x3D; rn<em>sqrt(pi</em>g*rhobar)&#x3D; vn</p>
<p>frequency normalization（频率归一化）    &#x3D; vn&#x2F;rn</p>
<h2 id="运行内容"><a href="#运行内容" class="headerlink" title="运行内容"></a>运行内容</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">input model file: ../models/模型名称</span><br><span class="line">output file: 输出的相应振型文件名称</span><br><span class="line">eigenfunction file (output):输出的相应振型二进制无格式文件名称，一般是上一个名称前面+e</span><br><span class="line">enter eps and wgrav：1e-10 10  </span><br><span class="line">enter jcom (1=rad;2=tor;3=sph;4=ictor)：3</span><br><span class="line">enter lmin,lmax,wmin,wmax,nmin,nmax：1 6000 0.0 166.0 0 0</span><br></pre></td></tr></table></figure>

<h1 id="eigcon"><a href="#eigcon" class="headerlink" title="eigcon"></a>eigcon</h1><h2 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h2><p>将minos_bran的输出文件转换为.eigen，仅包含最上层dmax km ( 0 &lt; dmax &lt; Rn) 的信息。R0是自由界面半径（单位km）。<br>他能够运行于所有振型，自动读取输入文件的振型。</p>
<p>输入路径或名称，存储本征函数。其中，输入方式为两种：路径path&#x2F;dbase_name或名称dbase_name。</p>
<p>minos_bran输出的两个文件和模型文件一起被作为输入。<br><strong>eigcon renormalizes the eigen-functions and outputs them to a depth of 1000 km, in this example.</strong><br>这个程序对本征函数进行重归一化，输出在1000km的深度（这个参数可以在程序中设置，即enter max depth中设置。</p>
<p>创建的文件为：dbase_name.eigen， 创建的文件夹为dbase_name.eigen.dat，文件夹中有二进制文件eigen。<br>这里输出的文件为test_S.eigen,命名的为test</p>
<h2 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h2><h3 id="输入参数"><a href="#输入参数" class="headerlink" title="输入参数"></a>输入参数</h3><ul>
<li>jcom 同minos_bran</li>
<li>max_depth 输出的本征函数（单位km）的深度。<br>所有输出值只在区间（rn，rn-max_depth）内存在。rn是自由界面的半径（单位km）。<br>即：只保留地表与最大深度之间内的本征函数作为输出。</li>
</ul>
<h3 id="程序参数"><a href="#程序参数" class="headerlink" title="程序参数"></a>程序参数</h3><ul>
<li>rn     : radius at surface  表面的半径</li>
<li>wn     : frequency normalization 频率归一化？为什么只是一个参数呢？</li>
<li>vn     : velocity normalisation  速度归一化？</li>
<li>accn   : acceleration normalisation 加速度归一化</li>
<li>n      : index of surface grid point 表面网格点索引</li>
<li>nstart : index of lowest grid point 最低网格点索引</li>
<li>nrad   : # of gridpoints of reduced eigenfunctions 简化本征函数的网格点？</li>
</ul>
<h2 id="输出文件-1"><a href="#输出文件-1" class="headerlink" title="输出文件"></a>输出文件</h2><p>有三个输出文件。关系列表<code>dbname.eigen</code>,一个文件夹<code>dbname.eigen.dat</code>,一个二进制文件<code>dbname.eigen.dat/eigen</code><br>其中二进制文件是存储在文件夹中的，因此用&#x2F;表示。即一个名称为<code>eigen</code>的文件。</p>
<h3 id="dbname-eigen"><a href="#dbname-eigen" class="headerlink" title="dbname.eigen"></a>dbname.eigen</h3><p>这个列表格式在（原文表6.1）中描述。<br>每一行描述了单个本征函数的模态特性（modal properties），<br>并引用了<code>dbname.dat/eigen</code>文件中的数据段。<br>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 2 S 1 3233.67798 4.95166 6.38945 509.68240 67 7 7 f4  0 test_S.eigen.dat eigen -1 01/03/23-12:10:00</span><br></pre></td></tr></table></figure>

<h3 id="dbname-eigen-dat-x2F-eigen"><a href="#dbname-eigen-dat-x2F-eigen" class="headerlink" title="dbname.eigen.dat&#x2F;eigen"></a>dbname.eigen.dat&#x2F;eigen</h3><p>包含段（segments）的二进制文件，每一个段存储单个本征振型（n，l）的归一化本征函数。<br>包含4字节长度的单词组成。<br>。大多数计算机体系结构有两种常见的字节顺序：<br>BIG_ENDIAN（直顺序 1-2-3-4）和LOW_ENDIAN（反向顺序 4-3-2-1）。<br>BIG_ENDIAN由SUN和RISC导向的平台使用，<br>LOW_ENDIAN由PC，VAX和DEC硬件使用。<br>eigcon自动检测字节顺序，并将文本字符串“t4”（BIG_ENDIAN）<br>或“f4”（LOW_ENDIAN）放入.eigen关系中的数据类型字段中。</p>
<p>每一个字段逻辑分为2部分：头部和主体</p>
<h3 id="头部"><a href="#头部" class="headerlink" title="头部"></a>头部</h3><p>这个部分的段存储模态特性（modal properties）的标量参数和归一化系数。<br>前7个word：</p>
<ul>
<li>n integer*4 本征振型径向阶数 n。必须与参考.eigen关系中的<code>norder</code>相同。</li>
<li>l integer*4 角度阶数（harmonic degree） l。必须与参考关系中的<code>lorder</code>相同。</li>
<li>w real<em>4 本征振型频率。单位rad&#x2F;s；w&#x3D;2</em>pi&#x2F;per。per是参考关系中的<code>period field</code>。</li>
<li>q real<em>4 衰减表达中的指数项部分，即exp(-qt)。q&#x3D;0.5</em>w&#x2F;Q,rad&#x2F;sec。</li>
<li>rn real*4 半径归一化系数，以m为单位的情况下，与模型的自由表面的半径相同。</li>
<li>vn real<em>4 速度归一化系数。vn &#x3D; rn</em>(pi<em>G</em>rhon)^1&#x2F;2<ul>
<li>G 引力常数</li>
<li>rhon 密度归一化系数 5515kg&#x2F;m3</li>
<li>wn 圆频率归一化系数 wn&#x3D;vn&#x2F;rn</li>
</ul>
</li>
<li>an real<em>4 加速度归一化系数 an&#x3D;10^20&#x2F;(rhon</em>rn^4)</li>
</ul>
<h3 id="主体-word8-最后"><a href="#主体-word8-最后" class="headerlink" title="主体 word8-最后"></a>主体 word8-最后</h3><ul>
<li>E(nrow, ncol) real*4 存储归一化本征函数的矩阵，括号内为行列数。<br>第一列为半径，其他列为本征函数。本征函数数量取决于模态（modal）类型。<ul>
<li>球振振型 包含7列(r,U,U’,V,V’,P,P’)</li>
<li>环振振型及其他 3列(r,W,W’)<br>本征函数的归一化见上文。</li>
</ul>
</li>
</ul>
<h2 id="运行内容-1"><a href="#运行内容-1" class="headerlink" title="运行内容"></a>运行内容</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spheroidals (3) or toroidals (2) or radial (1) orinner core toroidals (4) modes: 选择需要的即可。</span><br><span class="line">enter name of model file（输入模型的名称）：（上文中模型的名称）/模型路径/prem_noocean.txt</span><br><span class="line">enter max depth [km] （输入最大深度）:1000</span><br><span class="line">enter name of minos_bran output text file：输入上文minos_bran输出text文件的名称即可，即prem_noocean_S</span><br><span class="line">minos_bran output binary unformatted file name: 输入二进制无格式化文件名，即eprem_noocean_S</span><br><span class="line">enter path/dbase_name or dbase_name to store eigenfunctions(输入存放本征函数的路径或名称):test_S</span><br></pre></td></tr></table></figure>
<p>之后运行结束。</p>
<h2 id="运行过程中的信息"><a href="#运行过程中的信息" class="headerlink" title="运行过程中的信息"></a>运行过程中的信息</h2><h3 id="eigcon：-n-nstart-nrad-x3D-nnn-mmm-kkk"><a href="#eigcon：-n-nstart-nrad-x3D-nnn-mmm-kkk" class="headerlink" title="eigcon： n,nstart,nrad &#x3D; nnn, mmm, kkk"></a>eigcon： n,nstart,nrad &#x3D; nnn, mmm, kkk</h3><ul>
<li>nnn 本征函数节点的总数量</li>
<li>mmm 在使用深度截取本征函数之后的开始的节点数</li>
<li>kkk 截取之后的终止节点数</li>
</ul>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eigcon: n,nstart,nrad = 260  119 142</span><br></pre></td></tr></table></figure>
<p>节点总数为260个，119-142为截取的节点数。</p>
<h1 id="green"><a href="#green" class="headerlink" title="green"></a>green</h1><h2 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h2><p>这个程序计算单个事件和一组给定的台站的格林函数。<br>每个台站，需要输入指定的通道列表。这个程序能够选择计算不同的格林函数：<br>a) 只计算Z分量；b) 计算三分量，使用标准ZNE传感器；c) 计算三分量，使用12Z传感器。<br>建立台站信息需要创建一个数据集，包含<code>.site</code>和<code>.sitechan</code>两个文件。可以使用IRIS的rdseed或者从全球数据库中选择。<br>另一个输入包含环振振型和球振振型的.eigen关系，在下方的输入一行中提到。</p>
<p>输入：db_list文件，内容为上面eigcon输出的文件列表，不带后缀名。</p>
<p>输出：名为green的.wfdisc文件等。每个传感器有六个格林函数</p>
<p><code>.sitechan</code>文件决定那些台站和通道用于构建格林函数。通道方向（位置）在<code>.sitechan</code>文件中，台站方向（位置）在<code>.site</code>文件中。这两个文件需要预处理。</p>
<p>另一个预处理文件为<code>db_list</code>，包含所有eigenfunction文件。在测试中为eigcon输出的文件，即：test_S和test_T。</p>
<h2 id="输入参数-1"><a href="#输入参数-1" class="headerlink" title="输入参数"></a>输入参数</h2><h3 id="fmin-fmax"><a href="#fmin-fmax" class="headerlink" title="fmin fmax"></a>fmin fmax</h3><p>定义输入本征函数数据集中选择的频率范围。忽略所有频率超过范围的振型。</p>
<h3 id="nsamples"><a href="#nsamples" class="headerlink" title="nsamples"></a>nsamples</h3><p>理论地震图中的样本（这里应该是指地震图中的采样点数量）数量，所有理论地震图从震源时间开始。</p>
<h2 id="输入文件"><a href="#输入文件" class="headerlink" title="输入文件"></a>输入文件</h2><h3 id="in-dbname-site-sitechan文件"><a href="#in-dbname-site-sitechan文件" class="headerlink" title="in_dbname .site .sitechan文件"></a>in_dbname .site .sitechan文件</h3><p>文件介绍见simpledit程序。<br>使用这些关系文件，green程序为每个台站定义一定数量的通道组，<br>每一个组有两种情况：一种是包含独立的Z分量通道；或是三通道分量。<br>在分组之前，green程序按照(sta,chan)字段对.sitechan文档进行排序，<br>并删除所有重复行。注意：.sitechan关系文件中的chan字段是标准SEED格式的三字符的通道名称，详见台站数据格式。</p>
<h3 id="db-list"><a href="#db-list" class="headerlink" title="db_list"></a>db_list</h3><p><strong>This file allows joining an unlimited number of eigcon outputs for spheroidal, toroidal, or radial modes. The single requirement is that intersection between these files is null. Each desired eigenfunction must be present and unique in some eigcon output.</strong><br>此文档允许为球振振型、环振振型或径向振型（radial）连接无限数量的eigcon输出。<br>要求：这些文档之间的交集为null，每个的本征函数必须存在并在eigcon的输出中是唯一的。</p>
<h3 id="cmt-event"><a href="#cmt-event" class="headerlink" title="cmt_event"></a>cmt_event</h3><p>包含一行数据，参考[CMT .ndk与衍生数据格式]</p>
<h2 id="输出文件-2"><a href="#输出文件-2" class="headerlink" title="输出文件"></a>输出文件</h2><h3 id="wfdisc文件"><a href="#wfdisc文件" class="headerlink" title=".wfdisc文件"></a>.wfdisc文件</h3><p>内部每一行的格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALE LHZ 947893030.80000 1 18 2000014 947941029.80000 48000 1.0000000 1.000000 20.000000 -   g f4 - green.wfdisc.dat                                                 g.00001                                   0       -1 01/03/23-12:10:00</span><br></pre></td></tr></table></figure>
<p>二进制文件包含六个格林函数，按照顺序对应于张量分量：Mrr，Mθθ，Mφφ，Mrθ，Mrφ，Mθφ，总长度：nsamp</p>
<h3 id="wfdisc-dat文件"><a href="#wfdisc-dat文件" class="headerlink" title=".wfdisc.dat文件"></a>.wfdisc.dat文件</h3><p>内部存在对应通道数量的文件。</p>
<h2 id="运行内容-2"><a href="#运行内容-2" class="headerlink" title="运行内容"></a>运行内容</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enter path to db with sta &amp; stachan（输入包含台站等信息的文件路径）:.site和.sitechan的文件名。输入文件名即可。示例为short。</span><br><span class="line">enter name of file within list of nmodes db: dblist 由eigcon程序得到的文件列表。即存放本征函数的路径名列表。示例为db_list</span><br><span class="line">enter input CMT file name(输入CMT文件名称):china_cmt_event</span><br><span class="line">min and max frequencies to be considered (mHz) （需要考虑的频率范围）:10 260</span><br><span class="line">enter # pts in greens fns .le.        30000  （输入格林fns的pts？？？小于30000）: 8000</span><br><span class="line">enter Green functions output db file name（输出文件名）:green</span><br></pre></td></tr></table></figure>

<h2 id="输出信息"><a href="#输出信息" class="headerlink" title="输出信息"></a>输出信息</h2><h3 id="sph-modes-in-band-x3D-nnn-must-be-le-meig"><a href="#sph-modes-in-band-x3D-nnn-must-be-le-meig" class="headerlink" title="sph. modes in band &#x3D;  nnn   must be .le.  meig"></a>sph. modes in band &#x3D;  nnn   must be .le.  meig</h3><ul>
<li>nnn 所有输入数据集的球振振型的总数。</li>
<li>meig 允许的最大数量（max allowed number）的球振振型，是一个限定值，限制nnn的数量。<br>示例：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sph. modes in band = 1918 must be .le. 300000</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="tor-modes-in-band-x3D-nnn-must-be-le-meig"><a href="#tor-modes-in-band-x3D-nnn-must-be-le-meig" class="headerlink" title="tor. modes in band &#x3D;  nnn   must be .le.  meig"></a>tor. modes in band &#x3D;  nnn   must be .le.  meig</h3><p>同上，但是是环振振型。</p>
<h3 id="cmt-event文件：事件信息"><a href="#cmt-event文件：事件信息" class="headerlink" title="cmt_event文件：事件信息"></a>cmt_event文件：事件信息</h3><p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Event: evid  date&amp;time lat =  ±dd.ddd, lon = ±ddd.ddd</span><br><span class="line">        source depth = ddd.d km</span><br><span class="line">step = d.ddd sec, nsamples =  ddddd</span><br></pre></td></tr></table></figure>
<p>第一行为事件信息数据； 第二行为时间深度； 第三行为格林函数的时间步长和采样点数量。</p>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Event: B011400F  2000  14 23:37:10.800 lat =   25.390, lon =   101.400</span><br><span class="line">       source depth = 33.0 km</span><br><span class="line">step =    1.000 sec, nsamples =   8000</span><br></pre></td></tr></table></figure>

<h3 id="输入的-site和-sitechan文件名"><a href="#输入的-site和-sitechan文件名" class="headerlink" title="输入的.site和.sitechan文件名"></a>输入的.site和.sitechan文件名</h3><p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Input dbname : xxxxx</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Input dbname : short</span><br></pre></td></tr></table></figure>

<h3 id="台站信息"><a href="#台站信息" class="headerlink" title="台站信息"></a>台站信息</h3><p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Station: code lat lon , Channels: nnn</span><br></pre></td></tr></table></figure>
<p>台站码、位置坐标、选择的传感器组的通道数量</p>
<h3 id="通道信息"><a href="#通道信息" class="headerlink" title="通道信息"></a>通道信息</h3><p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Channel: #  nnn code chan hang vang</span><br></pre></td></tr></table></figure>
<ul>
<li>nnn current number in the group 当前组中通道的编号,这个编号可能只是一个表示不同分量的标号。</li>
<li>code 台站码</li>
<li>chan hang vang 通道码、以及对应的水平角和垂直角</li>
</ul>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Channel: # 1   BDFB  LHZ  0.00000000   0.00000000 </span><br><span class="line">Channel: # 2   BDFB  LHN  0.00000000   90.0000000    </span><br><span class="line">Channel: # 3   BDFB  LHE  90.0000000   90.0000000   </span><br></pre></td></tr></table></figure>
<h3 id="震中距"><a href="#震中距" class="headerlink" title="震中距"></a>震中距</h3><p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Epicentral Distance :  ddd.ddd</span><br></pre></td></tr></table></figure>
<p>可以得到台站的震中距</p>
<h3 id="震源方位角"><a href="#震源方位角" class="headerlink" title="震源方位角"></a>震源方位角</h3><p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Azimuth of Source : ddd.ddd</span><br></pre></td></tr></table></figure>
<p>台站到震源的方位角。</p>
<h3 id="格林函数的"><a href="#格林函数的" class="headerlink" title="格林函数的"></a>格林函数的</h3><p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nnn code chan date&amp;time step mmm</span><br></pre></td></tr></table></figure>
<ul>
<li>nnn 通道索引。范围为1-通道总数，是这个通道在这个.sitechan文件中的索引。</li>
<li>code 台站名</li>
<li>chan 通道码</li>
<li>date&amp;time 发震时间</li>
<li>step 格林函数采样时间间隔，单位s</li>
<li>mmm 六个格林函数块的采样点总数，采样点数 nsamples*6<br>示例：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">13 BILL LHZ 2000 14 23:37:10.800 1.000  48000</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="syndat-f"><a href="#syndat-f" class="headerlink" title="syndat.f"></a>syndat.f</h1><h2 id="简介-3"><a href="#简介-3" class="headerlink" title="简介"></a>简介</h2><p>构建理论地震图使用的程序。选择的事件的地震矩张量和格林函数的卷积，得到理论地震图。<br>最终输出的文件为Syndat.wfdisc.dat，内部为理论地震图。</p>
<h2 id="参数-2"><a href="#参数-2" class="headerlink" title="参数"></a>参数</h2><h3 id="plane-输入张量类型"><a href="#plane-输入张量类型" class="headerlink" title="plane 输入张量类型"></a>plane 输入张量类型</h3><ul>
<li>0 moment 张量分量直接从cmt_file中获取</li>
<li>1 nodal plane 1 即从节面1（cmt文件中的倒数6-4个数据）获取角度数据及标量距M0计算矩张量分量</li>
<li>2 nodal plane 2 从节面2获取相应数据计算，同上。</li>
</ul>
<h3 id="datatype-数据类型"><a href="#datatype-数据类型" class="headerlink" title="datatype 数据类型"></a>datatype 数据类型</h3><ul>
<li>0 输出的地震波形为加速度地震图，单位nm&#x2F;s2</li>
<li>1 输出速度图，单位nm&#x2F;s</li>
<li>2 输出位移图，单位nm</li>
</ul>
<h2 id="输入文件-1"><a href="#输入文件-1" class="headerlink" title="输入文件"></a>输入文件</h2><h3 id="输入格林函数文件"><a href="#输入格林函数文件" class="headerlink" title="输入格林函数文件"></a>输入格林函数文件</h3><p>即green程序输出的.wfdisc关系文件。</p>
<h2 id="输出文件-3"><a href="#输出文件-3" class="headerlink" title="输出文件"></a>输出文件</h2><p>地震图文件，可以通过程序cucss2sac转化为sac格式的地震图。</p>
<h2 id="运行内容-3"><a href="#运行内容-3" class="headerlink" title="运行内容"></a>运行内容</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">enter input CMT file name(输入CMT文件名称)：示例为china_cmt_event</span><br><span class="line">enter tensor type(输入张量类型)：0-moment；1-nodal plane1；2-nodal plane2</span><br><span class="line">enter input dbname(输入文件的dbname)：上文格林函数程序运行的输出名。即green</span><br><span class="line">enter output dbname（输出文件的dbname）：设置输出文件名，可以设置为syndat</span><br><span class="line">Enter output units（输入输出单位）： 0 [nm/s/s] 1 [nm/s] 2 [nm]</span><br></pre></td></tr></table></figure>

<h1 id="cucss2sac"><a href="#cucss2sac" class="headerlink" title="cucss2sac"></a>cucss2sac</h1><h2 id="简介-4"><a href="#简介-4" class="headerlink" title="简介"></a>简介</h2><p>将理论地震图转化为其他格式的数据。例如sac格式和asc格式（ASCII）。</p>
<h2 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h2><p>cucss2sac是为了解决IRIS css2sac中的bug而特别为mineos设计的。它并不是标准css2sac的平替，例如：cucss2sac仅支持CSS3.0架构和如下两种CSS输入二进制数据格式：</p>
<ul>
<li>“t4”(BIG_ENDIAN, single precision floating point)</li>
<li>“f4”(LOW_ENDIAN, single precision floating point)<br>cucss2sac转换CSS二进制数据，不进行校正和修改。在Mineos中，它用于格林函数和理论地震图格式转化。</li>
</ul>
<p>一个CSS数据集名称db_name必须至少包含一个db_name.wfdisc文件，包含波形的CSS格式信息。并且需要包含数据集：.origin和.site关系列表（文件db_name.origin db_name.site)来获取完全的SAC头信息。</p>
<ul>
<li>.origin文件 包含事件位置信息</li>
<li>.site文件 包含台站位置信息</li>
</ul>
<h2 id="生成的SAC文件"><a href="#生成的SAC文件" class="headerlink" title="生成的SAC文件"></a>生成的SAC文件</h2><p>如果在数据集中.origin出现，cucss2sac只使用这个文件的第一行。在ASCII输出的情况下，所有的参数符合ASCII头信息–文件的前三行。例如一个理论地震图的输出如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">EVENT: 2000(014)-23:37:10.800 947893030.80000 25.3900 101.4000 33.0000</span><br><span class="line">STATION: ALE LHE 82.5033 -62.3500 0.0000</span><br><span class="line">DATA: 2000(014)-23:37:10.800 947893030.80000 8000 1.000000</span><br><span class="line"></span><br><span class="line">0.0000000E+00 5.7025738E+00</span><br><span class="line">1.0000000E+00 1.9508668E+00</span><br><span class="line">2.0000000E+00 -4.1160989E+00</span><br><span class="line">3.0000000E+00 -4.1094885E+00</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">7.9970000E+03 1.5211651E+01</span><br><span class="line">7.9980000E+03 2.7408613E+01</span><br><span class="line">7.9990000E+03 3.5795624E+01</span><br></pre></td></tr></table></figure>

<ul>
<li>EVENT：包含发震事件（origin time）（human and epoch） 纬度(deg) 经度 震源深度(km)</li>
<li>STATION：台站名，通道码，纬度，经度，深度&#x3D;0</li>
<li>DATA：波形开始时间（waveform starting time）（human and epoch），采样点数量，采样间隔（sec）</li>
<li>数据体：为两列，第一列为相对波形开始的时间（sec），第二列为波形点的值，按照选择有nm（位移），nm&#x2F;s（速度），nm&#x2F;s&#x2F;s（加速度），取决于生成地震图时的选择。</li>
</ul>
<p>如果不需要头部信息，使用-n。</p>
<h2 id="生成的ASCII文件"><a href="#生成的ASCII文件" class="headerlink" title="生成的ASCII文件"></a>生成的ASCII文件</h2><p>输出的ASCII文件与SAC不同。头部文件相同，但是数据不同。是一个7列的数据表格。第一列为相对时间，剩下6列为选择的格林函数分量–垂直或一些水平方向。(G rr , G θθ , G φφ , G rθ , G rφ , G θφ )<br>分量的结束和syndat程序中地震矩张量分量Mij的阶数相同，因此相对理论地震图S：</p>
<p>S&#x3D;10E−18*sum（Gij Mij）</p>
<p>其中，Mij单位为dyne*cm， ij&#x3D;rr，θθ，φφ, rθ, rφ, θφ</p>
<h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><pre><code>cucss2sac [-a [-n]] db_name 输出的sac文件路径的名称
</code></pre>
<p>[]内的内容：</p>
<ul>
<li><p>无，输出sac文件</p>
</li>
<li><p>-a 输出ASC文件</p>
</li>
<li><p>-n 按照ASCII表格表头输出，必须和-a一起使用。</p>
</li>
<li><p>dbname：该文件必须包括.wfdisc;.origin;.site文件，才能完成SAC标题的构建。这个文件为之前green函数生成的三个文件。</p>
</li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cucss2sac Syndat Syndat_SAC</span><br><span class="line">cucss2sac green green_SAC</span><br><span class="line">cucss2sac -a Syndat Syndat_ASC</span><br><span class="line">cucss2sac -a -n Syndat Syndat_ASC_NOHEADER</span><br></pre></td></tr></table></figure>

<h1 id="eigen2asc"><a href="#eigen2asc" class="headerlink" title="eigen2asc"></a>eigen2asc</h1><h2 id="简介-5"><a href="#简介-5" class="headerlink" title="简介"></a>简介</h2><p>将本征函数的.eigen文件转化为asc文件。</p>
<h2 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h2><p>eigen2asc功能转换部分或者全部.eigen关系到一系列ASCII文件。程序eigen2sac在db_name.eigen文件中寻找所有符合振型参数n，l的本征函数：其中，nmin&lt;n&lt;nmax,lmin&lt;l&lt;lmax。并且转换本征函数到ASCII文件。输出文件在out_dir。每一个输出文件包含头部信息和文件内容。<br>头部信息：一行包含.eigen关系的前10个字段，见表6.1（mineos官方手册）。选项 -n 包含头部输出。数据体为三列（包含径向、环型振型（radial toroidal modes））或者七列（球型振型）表格。第一列为半径（单位m），其他列包含本征函数和他们关于半径的导数-U，U‘，V，V’，P，P‘(球型振型)和W，W‘(其他振型)。更多内容见章节4.1（即上面的cucss2sac描述）。输出文件名格式为：X.NNNNNNN.MMMMMMM.ASC；</p>
<p>X：S球型振型，T环型振型。<br>nnnnnnn：数字n<br>mmmmmmm：数字l。</p>
<h2 id="运行-1"><a href="#运行-1" class="headerlink" title="运行"></a>运行</h2><pre><code>eigen2asc nmin nmax lmin lmax db_name out_dir
</code></pre>
<ul>
<li>nmin, nmax - mininal and maximal values of the radial mode number n（径向振型数n）</li>
<li>lmin, lmax - mininal and maximal values of the lateral mode number l（l）</li>
<li>db_name    - data base name, must include .eigen relation;（.eigen文件）</li>
<li>out_dir    - output directory for ASCII files（输出ASCII文件路径）</li>
</ul>
<h2 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h2><pre><code>eigen2asc 0 0 6 8 test_S test_S_ASC
eigen2asc 0 1 2 500 test_S Eigen_S_ASC
eigen2asc -n 0 1 2 500 test_S Eigen_S_no_headers_ASC
</code></pre>
<h1 id="endi"><a href="#endi" class="headerlink" title="endi"></a>endi</h1><h2 id="简介-6"><a href="#简介-6" class="headerlink" title="简介"></a>简介</h2><p>In-place file swapping with fixed width</p>
<h2 id="描述-3"><a href="#描述-3" class="headerlink" title="描述"></a>描述</h2><p><em>This utility is used when you transfer binary files of<br>.wfdisc or .eigen relations to a platform with a<br>different byte order. The utility changes the byte<br>order from BIG_ENDIAN to LOW_ENDIAN and vice versa.<br>endi sequentially reads the file from the list<br>file1 [ file2 … filen] into memory as an unsigned<br>character string, swaps sequential groups of nw<br>bytes long starting from the beginning of the file,<br>and stores the swapped data<br>into the same place as before (swapping in-place).<br>If the last group has a length less than nw,<br>it stays unswapped.</em></p>
<p>这个程序用于转换二进制文件</p>
<p>这个程序改变byte order，从BIG_ENDIAN到LOW_ENDIAN，反之亦然。<br>endi以无符号character string类型顺序读取file1,file2 … 到内存中，交换</p>
<h2 id="运行-2"><a href="#运行-2" class="headerlink" title="运行"></a>运行</h2><pre><code>endi nw file1 [file2 ... filen]
</code></pre>
<h2 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h2><p>w.00001和w.00002都是来源于在PC上产生的一些.wfdisc关系二进制real*4数据文件。这些文件<br><em>These files have internal LOW_ENDIAN data representation created, e.g., by a direct<br>access FORTRAN WRITE statement.</em></p>
<pre><code>endi 4 w.00001 w.00002
</code></pre>
<p>we change the order of 4-byte words to BIG_ENDIAN for transferring these files on a computer with BIG_ENDIAN byte order, e.g., a SUN Ultra machine, where we may use a direct access READ statement to read data as real*4 variables.</p>
<h1 id="simpledit"><a href="#simpledit" class="headerlink" title="simpledit"></a>simpledit</h1><h2 id="简介-7"><a href="#简介-7" class="headerlink" title="简介"></a>简介</h2><p>从一个输入的ASCII文件创建.site和.sitechan CSS关系</p>
<h2 id="描述-4"><a href="#描述-4" class="headerlink" title="描述"></a>描述</h2><p>将手动创建的具有台站和通道信息的无格式ASCII文件 ascii_file 转换为 CSS3.0 db_name.site和db_name.sitechan关系列表（文件）。 db_name来自于命令行，是数据文件的名称。<br>对于真实数据的另一种创建方法：使用IRIS的rdseed程序创建。<br>注意，CSS格式定义严格，不要人工创建.site和.sitechan文件，这可能造成数值格式错误，造成mineos程序崩溃。<br>对于大量的台站数据，更好的解决方式是写一个直接创建ascii_file或者.site .sitechan文件的程序。</p>
<h2 id="需要预处理的ASCII文件"><a href="#需要预处理的ASCII文件" class="headerlink" title="需要预处理的ASCII文件"></a>需要预处理的ASCII文件</h2><p>这个文件是ASCII格式集，每一行描述了一个单独的台站或者通道。所有列在台站行之后的通道行隶属于这个台站。</p>
<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ANMO 34.9502 -106.4602 1.6890 ’Albuquerque, New Mexico, USA’</span><br><span class="line">@ LH1 150.0000 280.0 90.0</span><br><span class="line">@ LH2 150.0000 10.0 90.0</span><br><span class="line">@ LHZ 89.3000 0.0 0.0</span><br><span class="line">BJT 40.0183 116.1679 0.1370 ’Baijiatuan, Beijing, China’</span><br><span class="line">@ LHE 60.0000 90.0 90.0</span><br><span class="line">@ LHN 60.0000 0.0 90.0</span><br><span class="line">@ LHZ 60.0000 0.0 0.0</span><br><span class="line">@ BHE 60.0000 90.0 90.0</span><br><span class="line">@ BHN 60.0000 0.0 90.0</span><br><span class="line">@ BHZ 60.0000 0.0 180.0</span><br><span class="line">BILL 68.0651 166.4524 0.2990 ’Bilibino, Russia’</span><br><span class="line">@ LHZ 0.0000 0.0 0.0</span><br><span class="line">CCM 38.0557 -91.2446 0.1710 ’Cathedral Cave, Missouri, USA’</span><br><span class="line">@ LHE 51.0000 90.0 90.0</span><br><span class="line">@ LHN 51.0000 0.0 90.0</span><br><span class="line">@ LHZ 51.0000 0.0 0.0</span><br></pre></td></tr></table></figure>

<ul>
<li>台站行包含：台站代码sta 纬度lat 经度lon 海拔elev 台站名staname<br>  见表格6.3 .site关系表</li>
<li>通道行：以@开始，其他内容为：通道码chan 传感器edepth hang vang<br>  见表格6.4 .sitechan关系表</li>
</ul>
<p>标准格式为：</p>
<pre><code>@ XXE dd.dddd 90.0 90.0
@ XXN dd.dddd 0.0 90.0
@ XXZ dd.dddd 0.0 0.0
</code></pre>
<ul>
<li>dd.dddd：传感器的edepth。</li>
<li>注意：通道的order不重要。</li>
</ul>
<h2 id="运行-3"><a href="#运行-3" class="headerlink" title="运行"></a>运行</h2><pre><code>simpledit ascii_file db_name
</code></pre>
<h2 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h2><p>将上述示例保存为普通text文件即可，命名为stations，输入命令：</p>
<pre><code>time simpledit stations short
</code></pre>
<p>即可得到short.site short.sitechan两个文件。</p>
<h1 id="create-origin"><a href="#create-origin" class="headerlink" title="create_origin"></a>create_origin</h1><h2 id="简介-8"><a href="#简介-8" class="headerlink" title="简介"></a>简介</h2><p>转换一个事件text文件为CSS3.0 .origin关系。</p>
<h2 id="描述-5"><a href="#描述-5" class="headerlink" title="描述"></a>描述</h2><p>create_origin是一个shell脚本，从cmt_event ASCII文件中读取green程序输入文件cmt_event第一行,<br>将震源时间和位置信息转换为一行CSS3.0关系表，并将其写入db_name.origin文件。<br>这个脚本只填写.origin关系表中的字段：lat,lon,depth,time,orid,jdate,auth和lddate。其他的字段对于mineos并不重要，<br>由默认值填充。更多信息见下面所示表4.1。</p>
<h2 id="运行-4"><a href="#运行-4" class="headerlink" title="运行"></a>运行</h2><pre><code>create_origin cmt_event db_name
</code></pre>
<h1 id="关系-relation-表"><a href="#关系-relation-表" class="headerlink" title="关系(relation)表"></a>关系(relation)表</h1><h2 id="origin-震源关系"><a href="#origin-震源关系" class="headerlink" title=".origin 震源关系"></a>.origin 震源关系</h2><p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-7.2800  125.9900  473.4000   393567535.30000 1 -1 1982173 -1 -1 -1 -1 -1 - -999.0000 - -999.00 -1 -999.00 -1 -999.00 -1 - PDE &amp; Hvd CMT -1 -1 </span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th align="center">字节索引</th>
<th align="center">名称</th>
<th align="center">含义</th>
<th align="center">NA值</th>
<th align="center">取值范围</th>
<th align="center">备注</th>
<th align="center">单位</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">lat</td>
<td align="center">估算的纬度</td>
<td align="center">不允许</td>
<td align="center">-90.0≤lat≤90.0</td>
<td align="center">纬度，地理纬度，北半球为正；即cmt文件中的纬度</td>
<td align="center">度 ° degrees</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">lon</td>
<td align="center">估算的经度</td>
<td align="center">不允许</td>
<td align="center">-180.0≤lon≤180.0</td>
<td align="center">地理经度，本初子午线以东为正；即cmt文件中的经度</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">depth</td>
<td align="center">震源深度</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">cmt文件中的震源深度</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">time</td>
<td align="center">发震时间</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">发震时间为儒略日时间</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">orid</td>
<td align="center">震源原始id代码</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">evid</td>
<td align="center">事件代码</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">jdate</td>
<td align="center">日期</td>
<td align="center">-1</td>
<td align="center">yyyyddd,必须与time属性一致</td>
<td align="center">年份和一年第几天 。具体内容：公元前(B.C.E)日期为负。例如没有0000000.仅用于估计S,T,C振型（Evaluated only for S,T,C）</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">ndef</td>
<td align="center">定位（locating）震相索引</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">ndp</td>
<td align="center">深度（depth）震相索引</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">grn</td>
<td align="center">地理区域索引</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">srn</td>
<td align="center">地震区域索引</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">etype</td>
<td align="center">事件类型</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">depdp</td>
<td align="center">源自深度震相的估计深度</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-999.0000</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">dtype</td>
<td align="center">使用的深度方法</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">16</td>
<td align="center">mb</td>
<td align="center">体波震级</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-999.00</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">17</td>
<td align="center">mbid</td>
<td align="center">mb 编号（magid）？</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">18</td>
<td align="center">ms</td>
<td align="center">面波震级</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-999.00</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">19</td>
<td align="center">msid</td>
<td align="center">ms magid 纬度</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">20</td>
<td align="center">ml</td>
<td align="center">近震（local）震级</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-999.00</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">21</td>
<td align="center">mlid</td>
<td align="center">ml magid</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">22</td>
<td align="center">algorithm</td>
<td align="center">使用的定位算法</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">23</td>
<td align="center">auth</td>
<td align="center">source&#x2F;originator</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">震中参考地震记录 &amp; 震源信息来源</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">24</td>
<td align="center">commid</td>
<td align="center">comment id</td>
<td align="center">-1 No any remarks</td>
<td align="center">≥0</td>
<td align="center">数据文件。注释标识。这是用于指向预定义备注列表中的自由格式注释的整数键。尚未实施。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">25</td>
<td align="center">lddate</td>
<td align="center">载入时间</td>
<td align="center">未说明</td>
<td align="center">任意值</td>
<td align="center">记录创建的时间，not implemented yet？</td>
<td align="center"></td>
</tr>
</tbody></table>
<p><em>注： -1、-999.00、- 可能是该项没有值或者未知。</em><br><em>6号evid为1可能是由于只有一个地震事件。目前还未尝试是否有多个地震事件的计算方式。</em></p>
<h2 id="eigen-本征关系"><a href="#eigen-本征关系" class="headerlink" title=".eigen 本征关系"></a>.eigen 本征关系</h2><p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 44 S 1 197.56850 4.55313 3.58608 151.39850 67 7 7 f4 0 test_S.eigen.dat                                                 eigen                                  -1 01/09/23-21:11:33</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th align="center">字节索引</th>
<th align="center">名称</th>
<th align="center">含义</th>
<th align="center">NA值</th>
<th align="center">取值范围</th>
<th align="center">备注</th>
<th align="center">单位</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">norder</td>
<td align="center">径向阶数 n</td>
<td align="center">-1</td>
<td align="center">未给出</td>
<td align="center">本征振型的径向阶数n</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">lorder</td>
<td align="center">角度阶数 l</td>
<td align="center">-1</td>
<td align="center">未给出</td>
<td align="center">简正振型的角阶数l，也称 harmonic degree</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">typeo</td>
<td align="center">振型类型</td>
<td align="center">不允许</td>
<td align="center">未给出</td>
<td align="center">二进制数据类型。这个字符表示数据类型。R：radial径向振型；S：球振振型；T：环振振型；C：内核环振振型；P：表示数据包括常熟（constants）、归一化参数（normalization）和半径采样点（radius samples）。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">eigid</td>
<td align="center">eigen id</td>
<td align="center">不允许</td>
<td align="center"></td>
<td align="center">本征函数索引，这个关键字段是一个由n l和振型类型定义的本征函数数据独一无二的标识</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">per</td>
<td align="center">本征频率 周期表示</td>
<td align="center">-1</td>
<td align="center">&gt;0</td>
<td align="center">对应的本征频率。频率为w&#x3D;2*pi&#x2F;per；w的归一化值位于关联的二进制文件中。</td>
<td align="center">秒 s</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">phvel</td>
<td align="center">相速度</td>
<td align="center">-1</td>
<td align="center">&gt;0</td>
<td align="center">该振型对应的本征频率（per）的相速度。见typeo</td>
<td align="center">km&#x2F;s</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">grvel</td>
<td align="center">群速度</td>
<td align="center">-1</td>
<td align="center">&gt;0</td>
<td align="center">群速度。给出属性per（本征频率）对应的量级值的群速度。仅评估S,T和C振型，见typeo</td>
<td align="center">km&#x2F;s</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">attn</td>
<td align="center">衰减</td>
<td align="center">-1</td>
<td align="center">&gt;0</td>
<td align="center">衰减系数Q（品质因子）</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">nrow</td>
<td align="center">行号</td>
<td align="center">不允许</td>
<td align="center">&gt;0</td>
<td align="center">二进制文件中存储的本征函数网格（grid）的行号</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">ncol</td>
<td align="center">列号</td>
<td align="center">-1</td>
<td align="center">未说明</td>
<td align="center">二进制文件中存储的本征函数网格（grid）的列号</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">npar</td>
<td align="center">参数序号</td>
<td align="center">0</td>
<td align="center">&gt;0</td>
<td align="center">？二进制文件中存储的参数的序号</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">datatype</td>
<td align="center">数值存储</td>
<td align="center">不允许</td>
<td align="center">t4或f4</td>
<td align="center">数值存储数据。该属性指定文档系统中数据序列的格式。属性用于在必要时以实数交换四个字节。f4用于PC、DEC、VAX IEEE，单精度实型；t4用于SUN IEEE，单精度实型</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">foff</td>
<td align="center">字节偏移量</td>
<td align="center">不允许</td>
<td align="center">≥0</td>
<td align="center">这是数据文档中特征函数段的字节偏移量。见dir和dfile</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">dir</td>
<td align="center">所在目录</td>
<td align="center">不允许</td>
<td align="center">任意64个字符的字符串</td>
<td align="center">路径名的目录部分，包含特征关系的当前目录的相对路径</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">dfile</td>
<td align="center">文件名称</td>
<td align="center">不允许</td>
<td align="center">任意32个字符的字符串</td>
<td align="center">数据文件。指多路特征函数文件。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">16</td>
<td align="center">commid</td>
<td align="center">注释标识（comment id）</td>
<td align="center">-1 No any remarks</td>
<td align="center">≥0</td>
<td align="center">数据文件。注释标识。这是用于指向预定义备注列表中的自由格式注释的整数键。尚未实施。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">17</td>
<td align="center">lddate</td>
<td align="center">载入时间</td>
<td align="center">未说明</td>
<td align="center">任意值</td>
<td align="center">记录创建的时间，not implemented yet？</td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="site-台站位置信息"><a href="#site-台站位置信息" class="headerlink" title=".site 台站位置信息"></a>.site 台站位置信息</h2><p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ANMO 1960001 -1 34.9462 -106.4567 1.7400 Albuquerque, New Mexico, USA - - 0.0000 0.0000 01/08/23-21:43:39</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th align="center">字节索引</th>
<th align="center">名称</th>
<th align="center">含义</th>
<th align="center">NA值</th>
<th align="center">取值范围</th>
<th align="center">备注</th>
<th align="center">单位</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">sta</td>
<td align="center">台站码</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">ondate</td>
<td align="center">儒略开始日期</td>
<td align="center">不允许</td>
<td align="center">yyyyddd</td>
<td align="center">台站或者传感器其实日期。台站经常移动，但是台站码不变。该日期使得能够选择当时正确的台站lat，lon和elev。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">offdate</td>
<td align="center">儒略终止日期</td>
<td align="center">-1</td>
<td align="center">yyyyddd</td>
<td align="center">台站或者传感器关闭、取消或移除的时间。见ondate</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">lat</td>
<td align="center">纬度</td>
<td align="center">不允许</td>
<td align="center">-90.0≤lat≤90.0</td>
<td align="center">纬度，地理纬度，北半球为正；即cmt文件中的纬度</td>
<td align="center">度 ° degrees</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">lon</td>
<td align="center">经度</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">elev</td>
<td align="center">海拔</td>
<td align="center">-999.0</td>
<td align="center">-10.0≤elev≤10.0</td>
<td align="center">地震台站相对于平均海平面的海拔</td>
<td align="center">千米 km</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">staname</td>
<td align="center">台站描述</td>
<td align="center">-</td>
<td align="center">50个字符以内的大写字符串</td>
<td align="center">sta所描述台站的全名</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">statype</td>
<td align="center">台站类型：但台站，台阵等等</td>
<td align="center">-</td>
<td align="center">ss ar （小写）</td>
<td align="center">台站类型。ss：单个台站；ar：台阵</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">refsta</td>
<td align="center">台站相对台阵编号</td>
<td align="center">-</td>
<td align="center">任意site关系中的sta</td>
<td align="center">参考台站。这个字符串指定使用的阵列（这个site文件中的所有台站）的参考台站。?见deast，dnorth</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">dnorth</td>
<td align="center">台阵参考偏移距</td>
<td align="center">0.0</td>
<td align="center">-20000.00≤dnorth≤20000.00</td>
<td align="center">北向距离。给出台阵（array element）元素北向或相对位置，位于由refsta值指定的台阵中心以北。见deast</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">deast</td>
<td align="center">台阵参考偏移距</td>
<td align="center">0.0</td>
<td align="center">-20000.00≤deast≤20000.00</td>
<td align="center">向东距离。此属性给出台阵元素的“东向”或相对位置，位于由 refsta 值指定的台阵中心以东。见dnorth。</td>
<td align="center">千米 km</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">lddate</td>
<td align="center">载入时间</td>
<td align="center">未说明</td>
<td align="center">任意值</td>
<td align="center">记录创建的时间，not implemented yet？</td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="sitechan-台站通道信息"><a href="#sitechan-台站通道信息" class="headerlink" title=".sitechan 台站通道信息"></a>.sitechan 台站通道信息</h2><p>示例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ANMO LHE 1960001 -1 -1 n 100.0000 90.0 90.0 - 01/08/23-21:43:39</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th align="center">字节索引</th>
<th align="center">名称</th>
<th align="center">含义</th>
<th align="center">NA值</th>
<th align="center">取值范围</th>
<th align="center">备注</th>
<th align="center">单位</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">sta</td>
<td align="center">台站码</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">chan</td>
<td align="center">通道码</td>
<td align="center">需要有效值</td>
<td align="center">3个大写字母</td>
<td align="center">通道码，具体可在搜索中查找</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">ondate</td>
<td align="center">儒略开始日期</td>
<td align="center">不允许</td>
<td align="center">yyyyddd</td>
<td align="center">台站或者传感器其实日期。台站经常移动，但是台站码不变。该日期使得能够选择当时正确的台站lat，lon和elev。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">chanid</td>
<td align="center">通道id</td>
<td align="center">-1</td>
<td align="center">&gt;0</td>
<td align="center">通道记录标识。是一个独立标识一个特殊记录的代理键（surrogate key）。作为单个标识符，表示sta、chan、time更加方便。但是这三个值对处理人员更加直观。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">offdate</td>
<td align="center">儒略结束日期</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">ctype</td>
<td align="center">通道类型</td>
<td align="center">-</td>
<td align="center">小写字母n或b或i</td>
<td align="center">表示数据通道类型。n：正常仪器响应；b：台阵数据确定的相干波形？；i：能量叠加的非相干波形？</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">edepth</td>
<td align="center">安置深度</td>
<td align="center">不允许</td>
<td align="center">≥0.0</td>
<td align="center">仪器位置的深度，相对于site关系中的elev（台站海拔）</td>
<td align="center">千米 km</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">hang</td>
<td align="center">水平角</td>
<td align="center">不允许</td>
<td align="center">0.0≤hang≤360.0</td>
<td align="center">地震仪的水平方向。给出地震仪在水平平面上的指向，由正北顺时针。NS走向地震仪指向北，为0；WE走向地震仪指向西，为270</td>
<td align="center">度，° degrees</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">vang</td>
<td align="center">垂直角</td>
<td align="center">不允许</td>
<td align="center">0.0≤vang≤90.0</td>
<td align="center">地震仪的垂向指向。此属性测量地震仪的敏感轴与向外垂直方向之间的角度。对于垂直走向地震仪，vang&#x3D;0；水平走向地震仪，vang&#x3D;90</td>
<td align="center">度 ° degrees</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">descrip</td>
<td align="center">通道描述</td>
<td align="center">-</td>
<td align="center">50字节长度的任意格式字符串</td>
<td align="center">通道描述，数据通道的描述。对于非仪器通道（例如beams）这是在核心列表的通道选择中仅有的定量描述</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">lddate</td>
<td align="center">载入时间</td>
<td align="center">未说明</td>
<td align="center">任意值</td>
<td align="center">记录创建的时间，not implemented yet？</td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="wfdisc-波形文件头信息和描述信息"><a href="#wfdisc-波形文件头信息和描述信息" class="headerlink" title="wfdisc 波形文件头信息和描述信息"></a>wfdisc 波形文件头信息和描述信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ANMO SHZ 393567535.30000 1 6 1982173 393615534.30000 48000 1.0000000 1.000000 20.000000 - g f4 - green.wfdisc.dat g.00001 0 -1 01/09/23-21:11:33</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th align="center">字节索引</th>
<th align="center">名称</th>
<th align="center">含义</th>
<th align="center">NA值</th>
<th align="center">取值范围</th>
<th align="center">备注</th>
<th align="center">单位</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">sta</td>
<td align="center">台站码</td>
<td align="center">需要有效输入</td>
<td align="center">6个字符的大写字符串</td>
<td align="center">台站码，或者地震台的common code name。通常为3或4个字符</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">chan</td>
<td align="center">通道码</td>
<td align="center">需要有效值</td>
<td align="center">3个大写字母</td>
<td align="center">通道码，具体可在搜索中查找</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">time</td>
<td align="center">文件中第一个采样点的地质时间（epoch time）</td>
<td align="center">不允许</td>
<td align="center">未说明</td>
<td align="center">从1970年1月1日0时为起始点计算的秒数。存储为双精度浮点型，允许15个十进制数字。范围可达3*10^4年。</td>
<td align="center">秒s</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">wfid</td>
<td align="center">波形id，这里是一个索引值，相当于行数</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">chanid</td>
<td align="center">通道操作id</td>
<td align="center">-1</td>
<td align="center">&gt;0</td>
<td align="center">通道记录标识。是一个独立标识一个特殊记录的代理键（surrogate key）。作为单个标识符，表示sta、chan、time更加方便。但是这三个值对处理人员更加直观。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">jdate</td>
<td align="center">儒略（julian）日期</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">endtime</td>
<td align="center">注意！详细查看备注time*(nsamp-1)&#x2F;samprate</td>
<td align="center">+9999999999（10个9）.999</td>
<td align="center">endtime&gt;time</td>
<td align="center">endtime&#x3D;time+（nsamp-1）&#x2F;samprate（这里与前面的含义不一样，源文档如此。这里认为此处+为正确）</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">nsamp</td>
<td align="center">采样点个数</td>
<td align="center">不允许</td>
<td align="center">&gt;0</td>
<td align="center">采样点个数，波形段的采样点数量</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">samprate</td>
<td align="center">采样率，单位s^-1</td>
<td align="center">不允许</td>
<td align="center">&gt;0</td>
<td align="center">samples&#x2F;second。该值可能与标称值略有不同，以反映时钟漂移。？</td>
<td align="center">s^-1</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">calib</td>
<td align="center">标称校准</td>
<td align="center">不允许</td>
<td align="center">任意非0浮点数</td>
<td align="center">校准系数，即映射数字数据到地球位移的转换系数。该系数在属性calper规定的自由振荡周期内成立。正值表示分量方向的地面位移增量（分量方向，如z、n、e）由增值表示（），负值相反。该值通常反映记录时可用的最佳校准信息。</td>
<td align="center">nanometers或digital count</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">calper</td>
<td align="center">标称较准周期</td>
<td align="center">不允许</td>
<td align="center">&gt;0</td>
<td align="center">calib有效时规定周期。</td>
<td align="center">秒，s</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">instype</td>
<td align="center">仪器码</td>
<td align="center">-</td>
<td align="center">大写字母，不计数。详见Ganse and Hutt,1982</td>
<td align="center">标识仪器类型，例如SRO、ASRO以及S-750</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">segtype</td>
<td align="center">标引（indexing）方法</td>
<td align="center">-</td>
<td align="center">o v s d g w</td>
<td align="center">segment type。段类型。波形为：o（original）原始；v（virtual）虚拟的；s（segmented）分离的？；d（duplicate）副本；g（Green’s function）格林函数；w（synthetic）合成记录</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">datatype</td>
<td align="center">数值存储</td>
<td align="center">不允许</td>
<td align="center">t4或f4</td>
<td align="center">数值存储数据。该属性指定文档系统中数据序列的格式。属性用于在必要时以实数交换四个字节。f4用于PC、DEC、VAX IEEE，单精度实型；t4用于SUN IEEE，单精度实型</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">clip</td>
<td align="center">削减（clipped）标志</td>
<td align="center">-</td>
<td align="center">{c n} 小写字母</td>
<td align="center">一个字符指示数据是否削减。c表示是，n表示否</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">16</td>
<td align="center">dir</td>
<td align="center">所在文件夹</td>
<td align="center">不允许</td>
<td align="center">任意64个字符的字符串</td>
<td align="center">路径名的目录部分，包含特征关系的当前目录的相对路径</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">17</td>
<td align="center">dfile</td>
<td align="center">文件名</td>
<td align="center">不允许</td>
<td align="center">任意32个字符长度的字符串</td>
<td align="center">disk waveform？的名称或者单分量格林函数的名称。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">18</td>
<td align="center">foff</td>
<td align="center">字节偏移量</td>
<td align="center">不允许</td>
<td align="center">≥0</td>
<td align="center">这是数据文档中特征函数段的字节偏移量。见dir和dfile</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">19</td>
<td align="center">commid</td>
<td align="center">注释标识（comment id）</td>
<td align="center">-1 No any remarks</td>
<td align="center">≥0</td>
<td align="center">数据文件。注释标识。这是用于指向预定义备注列表中的自由格式注释的整数键。尚未实施。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">20</td>
<td align="center">lddate</td>
<td align="center">载入时间</td>
<td align="center">未说明</td>
<td align="center">任意值</td>
<td align="center">记录创建的时间，not implemented yet？</td>
<td align="center"></td>
</tr>
</tbody></table>
<h1 id="振型计算数量"><a href="#振型计算数量" class="headerlink" title="振型计算数量"></a>振型计算数量</h1><p>由模型文件prem_S等得到S与T振型w范围为5-200mHz下的计算数量。目前统计到n&#x3D;19的情况。<br>计算数量与w范围有关，即计算振型的频率范围有关。</p>
<h2 id="S-振型"><a href="#S-振型" class="headerlink" title="S 振型"></a>S 振型</h2><table>
<thead>
<tr>
<th align="center">n</th>
<th align="center">lmin</th>
<th align="center">lmax</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">44</td>
<td align="center">4653</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">28</td>
<td align="center">2566</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">24</td>
<td align="center">1945</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">23</td>
<td align="center">1792</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">18</td>
<td align="center">1775</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">14</td>
<td align="center">1760</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">13</td>
<td align="center">1742</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">12</td>
<td align="center">1721</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">9</td>
<td align="center">1695</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">8</td>
<td align="center">1667</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">7</td>
<td align="center">1643</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">5</td>
<td align="center">1627</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">4</td>
<td align="center">1611</td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">3</td>
<td align="center">1597</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">2</td>
<td align="center">1582</td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">1</td>
<td align="center">1566</td>
</tr>
<tr>
<td align="center">16</td>
<td align="center">1</td>
<td align="center">1549</td>
</tr>
<tr>
<td align="center">17</td>
<td align="center">1</td>
<td align="center">1530</td>
</tr>
<tr>
<td align="center">18</td>
<td align="center">1</td>
<td align="center">1510</td>
</tr>
<tr>
<td align="center">19</td>
<td align="center">1</td>
<td align="center">1491</td>
</tr>
</tbody></table>
<h2 id="T-振型"><a href="#T-振型" class="headerlink" title="T 振型"></a>T 振型</h2><table>
<thead>
<tr>
<th align="center">n</th>
<th align="center">lmin</th>
<th align="center">lmax</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">41</td>
<td align="center">2410</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">27</td>
<td align="center">1903</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">20</td>
<td align="center">1745</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">16</td>
<td align="center">1735</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">12</td>
<td align="center">1722</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">1</td>
<td align="center">1706</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">1</td>
<td align="center">1685</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">1</td>
<td align="center">1661</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">1</td>
<td align="center">1640</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">1</td>
<td align="center">1627</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">1</td>
<td align="center">1611</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">1</td>
<td align="center">1597</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">1</td>
<td align="center">1584</td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">1</td>
<td align="center">1569</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">1</td>
<td align="center">1552</td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">1</td>
<td align="center">1535</td>
</tr>
<tr>
<td align="center">16</td>
<td align="center">1</td>
<td align="center">1515</td>
</tr>
<tr>
<td align="center">17</td>
<td align="center">1</td>
<td align="center">1495</td>
</tr>
<tr>
<td align="center">18</td>
<td align="center">1</td>
<td align="center">1477</td>
</tr>
<tr>
<td align="center">19</td>
<td align="center">1</td>
<td align="center">1460</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhiyuanshi1901.github.io/2022/12/22/Mineos%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/22/Mineos%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">Mineos安装与使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-12-22 21:57:37" itemprop="dateCreated datePublished" datetime="2022-12-22T21:57:37+08:00">2022-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-01-20 15:39:40" itemprop="dateModified" datetime="2023-01-20T15:39:40+08:00">2023-01-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%9C%B0%E9%9C%87%E5%AD%A6%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">地震学常用软件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="https://github.com/geodynamics/mineos">Mineos官方文档</a><br><a target="_blank" rel="noopener" href="https://www.eas.slu.edu/eqc/eqc_cps/TUTORIAL/SPHERICITY/MINEOS/HTML/index.html">Hermann_Mineos安装</a></p>
<h1 id="Mineos简介"><a href="#Mineos简介" class="headerlink" title="Mineos简介"></a>Mineos简介</h1><p>这一部分是官方文档中的第一章，此处进行翻译。</p>
<h2 id="本征函数系统"><a href="#本征函数系统" class="headerlink" title="本征函数系统"></a>本征函数系统</h2><p>minos_bran是Mineos软件包的核心程序。通过频率范围(fmin, fmax)和简正振型(nmin,nmax,lmin,lmax)，<br>minos_bran输出的大小取决于fmax，即设定的最高频率，以及输入模型的径向节点数量。如果设定的周期为6s，选择所有离散分支，则计算的本征函数和本征频率数量为：球振振型150,000个、环振振型100,000个。</p>
<p>eigcon程序执行两个主要步骤。首先对本征函数进行重归一化，截断表格数据，只延伸到考虑的最深的地震深度。即输入的max deepth参数。<br>这种截断大大减小了本征函数文件的大小，加快了格林函数计算速度。此外，eigcon重构了输出的本征函数文件为二进制文件，相比于minos_bran输出的本征函数文件独立于计算机功能结构。</p>
<p>最终的输出基于.eigen关系，指向磁盘中的本征函数文件。详细关系见[Mineos程序参数解释].eigen关系表。</p>
<p>获取.site和.sitechan文件的方式：申请SEED文件，例如IRIS DMC，然后使用rdseed或者antelope（例如sd2de seed2db)转换得到这两个文件。</p>
<p>antelope可以用来查看格林函数。</p>
<h2 id="Mineos局限性"><a href="#Mineos局限性" class="headerlink" title="Mineos局限性"></a>Mineos局限性</h2><ul>
<li><p>当前版本的Mineos使用与低频应用，而周期为几秒（即0.nHz）情况下不适用。</p>
</li>
<li><p>尝试制作衍射P波合成记录时发现内核振型（尤其是能量积分）不能够被准确计算。不确定在内核中添加节点是否能解决问题。已发表的成功事例表明：通过使用不同方式进行能量积分能够解决这个问题，这种方式不依赖于节点间距。</p>
</li>
</ul>
<h1 id="官方安装包安装"><a href="#官方安装包安装" class="headerlink" title="官方安装包安装"></a>官方安装包安装</h1><p>Mineos安装分为如下几步，目前在第二步出现问题，尚未解决。</p>
<h2 id="configure"><a href="#configure" class="headerlink" title="configure"></a>configure</h2><pre><code>./configure
</code></pre>
<p>直接使用这个命令会出现依赖环境问题。例如：<br>    check g77 … no</p>
<p>使用如下命令可以避免出现这种问题。</p>
<pre><code>./configure F77=gfortran FFLAGS=-O2
</code></pre>
<h2 id="make"><a href="#make" class="headerlink" title="make"></a>make</h2><p>使用命令：</p>
<pre><code>make
</code></pre>
<p>出现错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">make[1]: 进入目录“/home/shizhiyuan/Documents/mineos-1.0.0”</span><br><span class="line">gfortran  -O2 -c -o minos_bran.o minos_bran.f</span><br><span class="line">minos_bran.f:254:32:</span><br><span class="line"></span><br><span class="line">       data tol/1.d-9/,itmax/15/,ichar/&#x27; s&#x27;,&#x27; t&#x27;,&#x27; s&#x27;,&#x27; c&#x27;/</span><br><span class="line">                                1</span><br><span class="line">错误: (1)处 DATA 语句中类型不兼容；试图从 CHARACTER(1) 转换到 INTEGER(4)</span><br><span class="line">make[1]: *** [Makefile:456：minos_bran.o] 错误 1</span><br><span class="line">make[1]: 离开目录“/home/shizhiyuan/Documents/mineos-1.0.0”</span><br><span class="line">make: *** [Makefile:253：all] 错误 2</span><br></pre></td></tr></table></figure>
<p>DATA 语句中类型不兼容，目前未知解决方法。</p>
<h1 id="使用Hermann网站提供的修改过minos-bran-f文件的安装包安装更为简便，且能够安装成功。"><a href="#使用Hermann网站提供的修改过minos-bran-f文件的安装包安装更为简便，且能够安装成功。" class="headerlink" title="使用Hermann网站提供的修改过minos_bran.f文件的安装包安装更为简便，且能够安装成功。"></a>使用Hermann网站提供的修改过minos_bran.f文件的安装包安装更为简便，且能够安装成功。</h1><p>环境：Centos8</p>
<h2 id="依赖环境"><a href="#依赖环境" class="headerlink" title="依赖环境"></a>依赖环境</h2><p>Mineos依赖于:</p>
<ul>
<li>gcc</li>
<li>g77</li>
<li>f77</li>
<li>gfortran</li>
</ul>
<p>一般安装gcc-gfortran即可。</p>
<pre><code>sudo yum install gcc-gfortran
</code></pre>
<h2 id="configure-1"><a href="#configure-1" class="headerlink" title="configure"></a>configure</h2><pre><code>./configure F77=gfortran FFLAGS=-O2
</code></pre>
<h2 id="make-1"><a href="#make-1" class="headerlink" title="make"></a>make</h2><pre><code>make
</code></pre>
<p>成功的输出:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make  all-am</span><br><span class="line">make[1]: 进入目录“/home/shizhiyuan/Documents/hermann/MINEOS/mineos-1.0.0.rbh”</span><br><span class="line">make[1]: 离开目录“/home/shizhiyuan/Documents/hermann/MINEOS/mineos-1.0.0.rbh”</span><br></pre></td></tr></table></figure>

<h2 id="make-check"><a href="#make-check" class="headerlink" title="make check"></a>make check</h2><p>不知道具体含义，运行后没有输出。可能是指检查某项内容。</p>
<h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><pre><code>sudo make install
</code></pre>
<p>不用sudo可能出现没有权限创建新目录的情况。</p>
<p>运行成功后的输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">make[1]: 进入目录“/home/shizhiyuan/Documents/hermann/MINEOS/mineos-1.0.0.rbh”</span><br><span class="line">test -z &quot;/usr/local/bin&quot; || /usr/bin/mkdir -p &quot;/usr/local/bin&quot;</span><br><span class="line">  /usr/bin/install -c &#x27;minos_bran&#x27; &#x27;/usr/local/bin/minos_bran&#x27;</span><br><span class="line">  /usr/bin/install -c &#x27;syndat&#x27; &#x27;/usr/local/bin/syndat&#x27;</span><br><span class="line">  /usr/bin/install -c &#x27;green&#x27; &#x27;/usr/local/bin/green&#x27;</span><br><span class="line">  /usr/bin/install -c &#x27;eigcon&#x27; &#x27;/usr/local/bin/eigcon&#x27;</span><br><span class="line">  /usr/bin/install -c &#x27;endi&#x27; &#x27;/usr/local/bin/endi&#x27;</span><br><span class="line">  /usr/bin/install -c &#x27;eigen2asc&#x27; &#x27;/usr/local/bin/eigen2asc&#x27;</span><br><span class="line">  /usr/bin/install -c &#x27;simpledit&#x27; &#x27;/usr/local/bin/simpledit&#x27;</span><br><span class="line">  /usr/bin/install -c &#x27;cucss2sac&#x27; &#x27;/usr/local/bin/cucss2sac&#x27;</span><br><span class="line">test -z &quot;/usr/local/bin&quot; || /usr/bin/mkdir -p &quot;/usr/local/bin&quot;</span><br><span class="line"> /usr/bin/install -c &#x27;scripts/creat_origin&#x27; &#x27;/usr/local/bin/creat_origin&#x27;</span><br><span class="line">test -z &quot;/usr/local/share/mineos&quot; || /usr/bin/mkdir -p &quot;/usr/local/share/mineos&quot;</span><br><span class="line"> /usr/bin/install -c -m 644 &#x27;doc/mineos.pdf&#x27; &#x27;/usr/local/share/mineos/mineos.pdf&#x27;</span><br><span class="line"> /usr/bin/install -c -m 644 &#x27;DEMO/DEMO.tar.gz&#x27; &#x27;/usr/local/share/mineos/DEMO.tar.gz&#x27;</span><br><span class="line"> /usr/bin/install -c -m 644 &#x27;DEMO/README&#x27; &#x27;/usr/local/share/mineos/README&#x27;</span><br><span class="line">make[1]: 离开目录“/home/shizhiyuan/Documents/hermann/MINEOS/mineos-1.0.0.rbh”</span><br></pre></td></tr></table></figure>

<h2 id="补充内容"><a href="#补充内容" class="headerlink" title="补充内容"></a>补充内容</h2><p>运行.csh文件需要安装csh</p>
<pre><code>sudo yum install csh
</code></pre>
<h2 id="test"><a href="#test" class="headerlink" title="test"></a>test</h2><p>先将mineos文件内DEMO文件夹中的DEMO压缩包解压。当然更推荐命令操作：</p>
<pre><code>cd DEMO
gunzip -c DEMO.tar.gz | tar xf -  # 这一步使用操作界面完成，就是解压的步骤。

export PATH=$HOME/cig/bin:$PATH # 添加变量？运行后没有输出。
cd DEMO3
./RUN_MINEOS.sh prem_noocean
</code></pre>
<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br></pre></td><td class="code"><pre><span class="line">Step 1:  minos_bran runs for S modes .....................</span><br><span class="line">============== Program minos_bran ==================</span><br><span class="line"> input model file:</span><br><span class="line"> ../models/prem_noocean.txt</span><br><span class="line"> output file:</span><br><span class="line"> prem_noocean_S</span><br><span class="line"> eigenfunction file (output):</span><br><span class="line"> eprem_noocean_S</span><br><span class="line"> enter eps and wgrav</span><br><span class="line">   1.0000000000000000E-010   1.0000000000000000     </span><br><span class="line"> enter jcom (1=rad;2=tor;3=sph;4=ictor)</span><br><span class="line">           3</span><br><span class="line"> enter lmin,lmax,wmin,wmax,nmin,nmax</span><br><span class="line">           2        8000   0.0000000000000000        200.00000000000000                0           0</span><br><span class="line"></span><br><span class="line">real	0m1.441s</span><br><span class="line">user	0m1.433s</span><br><span class="line">sys	0m0.006s</span><br><span class="line">Step 2: minos_bran runs for T modes .....................</span><br><span class="line">============== Program minos_bran ==================</span><br><span class="line"> input model file:</span><br><span class="line"> ../models/prem_noocean.txt</span><br><span class="line"> output file:</span><br><span class="line"> prem_noocean_T</span><br><span class="line"> eigenfunction file (output):</span><br><span class="line"> eprem_noocean_T</span><br><span class="line"> enter eps and wgrav</span><br><span class="line">   1.0000000000000000E-010   1.0000000000000000     </span><br><span class="line"> enter jcom (1=rad;2=tor;3=sph;4=ictor)</span><br><span class="line">           2</span><br><span class="line"> enter lmin,lmax,wmin,wmax,nmin,nmax</span><br><span class="line">           2        8000   0.0000000000000000        200.00000000000000                0           0</span><br><span class="line"></span><br><span class="line">real	0m0.245s</span><br><span class="line">user	0m0.242s</span><br><span class="line">sys	0m0.003s</span><br><span class="line">Step 3: eigen for S .....................................</span><br><span class="line"> ============= Program eigcon ====================</span><br><span class="line">  spheroidals (3) or toroidals (2) or radial (1) or</span><br><span class="line">  inner core toroidals (4) modes</span><br><span class="line">           3</span><br><span class="line">  enter name of model file</span><br><span class="line"> ../models/prem_noocean.txt</span><br><span class="line"> enter max depth [km] : </span><br><span class="line">   1000.00000    </span><br><span class="line">  enter name of minos_bran output text file</span><br><span class="line"> prem_noocean_S</span><br><span class="line">  minos_bran output binary unformatted file name</span><br><span class="line"> eprem_noocean_S</span><br><span class="line">  enter path/dbase_name or dbase_name to store eigenfunctions:</span><br><span class="line"> test_S</span><br><span class="line"> ====================================================</span><br><span class="line"> eigcon: n,nstart,nrad =          185         119          67</span><br><span class="line"></span><br><span class="line">real	0m0.053s</span><br><span class="line">user	0m0.046s</span><br><span class="line">sys	0m0.007s</span><br><span class="line">Step 4: eigen for T .....................................</span><br><span class="line"> ============= Program eigcon ====================</span><br><span class="line">  spheroidals (3) or toroidals (2) or radial (1) or</span><br><span class="line">  inner core toroidals (4) modes</span><br><span class="line">           2</span><br><span class="line">  enter name of model file</span><br><span class="line"> ../models/prem_noocean.txt</span><br><span class="line"> enter max depth [km] : </span><br><span class="line">   1000.00000    </span><br><span class="line">  enter name of minos_bran output text file</span><br><span class="line"> prem_noocean_T</span><br><span class="line">  minos_bran output binary unformatted file name</span><br><span class="line"> eprem_noocean_T</span><br><span class="line">  enter path/dbase_name or dbase_name to store eigenfunctions:</span><br><span class="line"> test_T</span><br><span class="line"> ====================================================</span><br><span class="line"> eigcon: n,nstart,nrad =          185         119          67</span><br><span class="line"></span><br><span class="line">real	0m0.025s</span><br><span class="line">user	0m0.024s</span><br><span class="line">sys	0m0.000s</span><br><span class="line">Step 5: green functions evaluation .........................</span><br><span class="line"> ============= Program green ====================</span><br><span class="line"> enter path to db with sta &amp; stachan:</span><br><span class="line"> short</span><br><span class="line"> enter name of file within list of nmodes db:</span><br><span class="line"> db_list</span><br><span class="line"> enter input CMT file name:</span><br><span class="line"> china_cmt_event</span><br><span class="line"> min and max frequencies to be considered (mHz) : </span><br><span class="line">   10.0000000       260.000000    </span><br><span class="line"> enter # pts in greens fns .le.        30000  :</span><br><span class="line">        8000</span><br><span class="line"> enter Green functions output db file name:</span><br><span class="line"> green</span><br><span class="line"> ====================================================</span><br><span class="line"> green: Event: B011400F  2000  14 23:37:10.800 lat =   25.390, lon =   101.400</span><br><span class="line"> green:        source depth = 33.0 km</span><br><span class="line"> green: step =    1.000 sec, nsamples =   8000</span><br><span class="line"> green: # sph. modes in band =        2596   must be .le.       300000</span><br><span class="line"> green: # tor. modes in band =        2352   must be .le.       300000</span><br><span class="line"> green: Input dbname : short</span><br><span class="line"> green: Station: ALE      82.5033  -62.3500 , Channels: 3</span><br><span class="line"> green: Channel: #            1   ALE   LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   ALE   LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   ALE   LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :     72.020</span><br><span class="line"> green: Azimuth of Source   :     15.433</span><br><span class="line"> green:    1 ALE    LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:    2 ALE    LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:    3 ALE    LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: ANMO     34.9502 -106.4602 , Channels: 3</span><br><span class="line"> green: Channel: #            1   ANMO  LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   ANMO  LH2        10.0000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   ANMO  LH1        280.000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :    114.439</span><br><span class="line"> green: Azimuth of Source   :    -27.665</span><br><span class="line"> green:    4 ANMO   LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:    5 ANMO   LH2     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:    6 ANMO   LH1     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: BAK      35.3441 -119.1043 , Channels: 3</span><br><span class="line"> green: Channel: #            1   BAK   BHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   BAK   BHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   BAK   BHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :    108.462</span><br><span class="line"> green: Azimuth of Source   :    -38.270</span><br><span class="line"> green:    7 BAK    BHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:    8 BAK    BHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:    9 BAK    BHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: BDFB    -15.6418  -48.0148 , Channels: 3</span><br><span class="line"> green: Channel: #            1   BDFB  LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   BDFB  LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   BDFB  LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :    149.822</span><br><span class="line"> green: Azimuth of Source   :     66.283</span><br><span class="line"> green:   10 BDFB   LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   11 BDFB   LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   12 BDFB   LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: BILL     68.0651  166.4524 , Channels: 3</span><br><span class="line"> green: Channel: #            1   BILL  LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   BILL  LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   BILL  LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :     57.417</span><br><span class="line"> green: Azimuth of Source   :   -103.266</span><br><span class="line"> green:   13 BILL   LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   14 BILL   LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   15 BILL   LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: BJT      40.0183  116.1679 , Channels: 3</span><br><span class="line"> green: Channel: #            1   BJT   LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   BJT   LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   BJT   LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :     19.123</span><br><span class="line"> green: Azimuth of Source   :   -135.267</span><br><span class="line"> green:   16 BJT    LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   17 BJT    LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   18 BJT    LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: BRVK     53.0581   70.2828 , Channels: 3</span><br><span class="line"> green: Channel: #            1   BRVK  LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   BRVK  LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   BRVK  LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :     36.158</span><br><span class="line"> green: Azimuth of Source   :    127.603</span><br><span class="line"> green:   19 BRVK   LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   20 BRVK   LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   21 BRVK   LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: CASY    -66.2792  110.5364 , Channels: 3</span><br><span class="line"> green: Channel: #            1   CASY  LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   CASY  LHN        180.000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   CASY  LHE        270.000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :     91.644</span><br><span class="line"> green: Azimuth of Source   :     -8.261</span><br><span class="line"> green:   22 CASY   LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   23 CASY   LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   24 CASY   LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: CCM      38.0557  -91.2446 , Channels: 3</span><br><span class="line"> green: Channel: #            1   CCM   LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   CCM   LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   CCM   LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :    115.783</span><br><span class="line"> green: Azimuth of Source   :    -12.703</span><br><span class="line"> green:   25 CCM    LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   26 CCM    LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   27 CCM    LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green: Station: TLY      51.6807  103.6438 , Channels: 3</span><br><span class="line"> green: Channel: #            1   TLY   LHZ        0.00000000       0.00000000    </span><br><span class="line"> green: Channel: #            2   TLY   LHN        0.00000000       90.0000000    </span><br><span class="line"> green: Channel: #            3   TLY   LHE        90.0000000       90.0000000    </span><br><span class="line"> green: Epicentral Distance :     26.308</span><br><span class="line"> green: Azimuth of Source   :   -175.417</span><br><span class="line"> green:   28 TLY    LHZ     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   29 TLY    LHN     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"> green:   30 TLY    LHE     2000  14 23:37:10.800    1.000  48000</span><br><span class="line"></span><br><span class="line">real	0m1.470s</span><br><span class="line">user	0m1.458s</span><br><span class="line">sys	0m0.010s</span><br><span class="line">Step 6: synthetic seismogram construction ..................</span><br><span class="line"> ============== Program syndat ==================</span><br><span class="line"> enter input CMT file name:</span><br><span class="line"> china_cmt_event</span><br><span class="line"> enter tensor type: 0 - moment, 1 - nodal plane 1, 2 - nodal plane 2</span><br><span class="line">           0</span><br><span class="line"> enter input dbname</span><br><span class="line"> green</span><br><span class="line"> enter output dbname</span><br><span class="line"> Syndat</span><br><span class="line"> Enter output units: 0 [nm/s/s] 1 [nm/s] 2 [nm]</span><br><span class="line">syndat: CMT solution:</span><br><span class="line">syndat: Event: B011400F 2000  14 23: 37: 10.8, lat/lon =    25.39   101.40,</span><br><span class="line">syndat: depth =   33.0 km, step =    1.000 sec, Duration =  -2.3 sec,</span><br><span class="line">syndat: M0 =   0.833E+25,</span><br><span class="line">syndat: comp:  -0.600E+24 -0.629E+25  0.689E+25 -0.185E+25  0.120E+24 -0.473E+25</span><br><span class="line">syndat: plane1:   27.  78.  -6. plane2:  118.  84.-168.</span><br><span class="line">syndat: Selected moment tensor components:</span><br><span class="line">syndat: -0.600E+24 -0.629E+25  0.689E+25 -0.185E+25  0.120E+24 -0.473E+25</span><br><span class="line"></span><br><span class="line">syndat: Synthetic waveforms: </span><br><span class="line">syndat:    1 ALE    LHZ         1.000    8000</span><br><span class="line">syndat:    2 ALE    LHN         1.000    8000</span><br><span class="line">syndat:    3 ALE    LHE         1.000    8000</span><br><span class="line">syndat:    4 ANMO   LHZ         1.000    8000</span><br><span class="line">syndat:    5 ANMO   LH2         1.000    8000</span><br><span class="line">syndat:    6 ANMO   LH1         1.000    8000</span><br><span class="line">syndat:    7 BAK    BHZ         1.000    8000</span><br><span class="line">syndat:    8 BAK    BHN         1.000    8000</span><br><span class="line">syndat:    9 BAK    BHE         1.000    8000</span><br><span class="line">syndat:   10 BDFB   LHZ         1.000    8000</span><br><span class="line">syndat:   11 BDFB   LHN         1.000    8000</span><br><span class="line">syndat:   12 BDFB   LHE         1.000    8000</span><br><span class="line">syndat:   13 BILL   LHZ         1.000    8000</span><br><span class="line">syndat:   14 BILL   LHN         1.000    8000</span><br><span class="line">syndat:   15 BILL   LHE         1.000    8000</span><br><span class="line">syndat:   16 BJT    LHZ         1.000    8000</span><br><span class="line">syndat:   17 BJT    LHN         1.000    8000</span><br><span class="line">syndat:   18 BJT    LHE         1.000    8000</span><br><span class="line">syndat:   19 BRVK   LHZ         1.000    8000</span><br><span class="line">syndat:   20 BRVK   LHN         1.000    8000</span><br><span class="line">syndat:   21 BRVK   LHE         1.000    8000</span><br><span class="line">syndat:   22 CASY   LHZ         1.000    8000</span><br><span class="line">syndat:   23 CASY   LHN         1.000    8000</span><br><span class="line">syndat:   24 CASY   LHE         1.000    8000</span><br><span class="line">syndat:   25 CCM    LHZ         1.000    8000</span><br><span class="line">syndat:   26 CCM    LHN         1.000    8000</span><br><span class="line">syndat:   27 CCM    LHE         1.000    8000</span><br><span class="line">syndat:   28 TLY    LHZ         1.000    8000</span><br><span class="line">syndat:   29 TLY    LHN         1.000    8000</span><br><span class="line">syndat:   30 TLY    LHE         1.000    8000</span><br><span class="line"></span><br><span class="line">real	0m0.006s</span><br><span class="line">user	0m0.002s</span><br><span class="line">sys	0m0.004s</span><br></pre></td></tr></table></figure>

<h1 id="文件运行初步解析"><a href="#文件运行初步解析" class="headerlink" title="文件运行初步解析"></a>文件运行初步解析</h1><h2 id="运行1"><a href="#运行1" class="headerlink" title="运行1"></a>运行1</h2><pre><code>cd DEMO3
./RUN_MINEOS.sh prem_noocean
</code></pre>
<p>输出如上<code>test</code>。</p>
<p>以下为 <code>运行1</code> 运行之后前后对比。<br><img src="%E5%B7%A6%E4%BE%A7%E4%B8%BA%E8%BF%90%E8%A1%8C%E5%90%8E%E7%9A%84%E5%8F%B3%E4%BE%A7%E4%B8%BA%E8%BF%90%E8%A1%8C%E5%89%8D%E7%9A%84.png"></p>
<p>以下进行初步解析。</p>
<p>据<code>minos_bran.f</code>文件</p>
<p><em>Files prem_noocean_S. prem_noocean_T, eprem_noocean_S and eprem_noocean_T are output of the minos_bran program.</em></p>
<p>minos_bran输出的文件为：<code>prem_noocean_S</code>,<code>prem_noocean_T</code>, <code>eprem_noocean_S</code>和<code>eprem_noocean_T</code>。</p>
<p>以及</p>
<p><em>The results are stored in test_S and test_T databases (eigenfunctions); in green database (Green functions); and in Syndat (synthetic seismograms).</em></p>
<p><code>test_S.eigen.dat</code> 、<code>test_T.eigen.dat</code> 是eigenfunctions,即特征函数。但还有两个同名.eigen文件。 <code>green.wfdisc.dat</code>为格林函数，<code>Syndat.wfdisc.dat</code>为理论地震图。</p>
<h3 id="第一步：运行minos-bran。S-modes-S振型？"><a href="#第一步：运行minos-bran。S-modes-S振型？" class="headerlink" title="第一步：运行minos_bran。S modes S振型？"></a>第一步：运行minos_bran。S modes S振型？</h3><p>输入为：<code>/models/prem_noocean.txt</code>，即prem模型，该模型将海洋处用上地壳填充。</p>
<p>输出为： <code>prem_noocean_S</code>。</p>
<p>特征函数文件：<code>eprem_noocean_S</code>。 </p>
<pre><code>eps： 1e-10 
wgrav： 1 
jcom： 为3,表示为球型振型。
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">输入的参数：</span><br><span class="line">lmin 2</span><br><span class="line">lmax 8000</span><br><span class="line">wmin 0</span><br><span class="line">wmax 200</span><br><span class="line">nmin 0</span><br><span class="line">nmax 0</span><br></pre></td></tr></table></figure>

<p>使用time命令运行minos_bran程序，返回程序运行时间。具体含义可参考Linux系统命令。<br><strong>注：使用time命令可以直接运行当前目录之外的程序。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">real	0m1.450s</span><br><span class="line">user	0m1.441s</span><br><span class="line">sys	0m0.007s</span><br></pre></td></tr></table></figure>

<h3 id="第二步：运行minos-bran-Tmodes-T振型？"><a href="#第二步：运行minos-bran-Tmodes-T振型？" class="headerlink" title="第二步：运行minos_bran Tmodes T振型？"></a>第二步：运行minos_bran Tmodes T振型？</h3><p>屏幕上的输出大意：</p>
<p>输入同样为<code>/models/prem_noocean.txt</code></p>
<p>输出为： <code>prem_noocean_T</code></p>
<p>特征函数文件：<code>eprem_noocean_T</code></p>
<pre><code>eps： 1e-10
wgrav： 1
jcom： 2

输入的参数：
lmin 2
lmax 8000
wmin 0
wmax 200
nmin 0
nmax 0

输出？？？
real	0m0.243s
user	0m0.242s
sys	0m0.000s
</code></pre>
<h3 id="第三步-S-model-eigen"><a href="#第三步-S-model-eigen" class="headerlink" title="第三步 S model-eigen"></a>第三步 S model-eigen</h3><p>运行的程序为eigcon，它的功能是：</p>
<p><em>converts eigenfunction files (output from minos_bran) into .eigen relation containing only info about the upper most<br>dmax km  ( 0 &lt; dmax &lt; Rn), where, RO is radius of the free surface in km. This version works for all modes: spheroidal, toroidal, and radial.</em></p>
<p>将minos_bran的输出文件转换为.eigen，仅包含最上层dmax km ( 0 &lt; dmax &lt; Rn) 的信息。R0是自由界面半径（单位km）。<br>他能够运行于所有振型，自动读取输入文件的振型。</p>
<p>这一步读取控制参数。</p>
<pre><code>读取了输入文件的jcom。
输入的模型文件名称：``prem_noocean.text``
输入的最大深度（max depth，km）：``1000``
minos_bran的输出文件： ``prem_noocean_S``
minos_bran的输出无格式二进制文件：``eprem_noocean_S``
</code></pre>
<p>输入路径或名称，存储特征函数。其中，输入方式为两种：路径<code>path/dbase_name</code>或名称<code>dbase_name</code>。<br>创建的文件为：<code>dbase_name.eigen</code>， 创建的文件夹为<code>dbase_name.eigen.dat</code>，文件夹中有二进制文件<code>eigen</code>。</p>
<p>在屏幕运行输出仅输出了三个参数：</p>
<pre><code>n 185
nstart 119
nrad 67
</code></pre>
<p>结尾有：</p>
<pre><code>real	0m0.046s
user	0m0.043s
sys	0m0.003s
</code></pre>
<h3 id="第四步-关于T的eigen，同3。"><a href="#第四步-关于T的eigen，同3。" class="headerlink" title="第四步 关于T的eigen，同3。"></a>第四步 关于T的eigen，同3。</h3><p>记录屏幕上输出的内容：</p>
<pre><code>jcom 2
输入的模型文件名称：prem_noocean.text
输入的最大深度（max depth，km）：1000
minos_bran的输出文件： prem_noocean_T
minos_bran的输出无格式二进制文件：eprem_noocean_T
路径：test_T

n 185
nstart 119
nrad 67

real	0m0.024s
user	0m0.021s
sys	0m0.003s
</code></pre>
<p>输出的<code>test_S.eigen</code> 和<code>test_S.eigen.dat</code>:<br><img src="test_S%E6%96%87%E4%BB%B6%E5%A4%B9.png"><br><img src="test_S.eigen.dat%E6%96%87%E4%BB%B6.png"></p>
<h3 id="第五步：格林函数估值（evaluation）"><a href="#第五步：格林函数估值（evaluation）" class="headerlink" title="第五步：格林函数估值（evaluation）"></a>第五步：格林函数估值（evaluation）</h3><p>运行的程序为：green.f</p>
<p> <em>green program computes for a single event and a given set of stations, the Green functions.</em><br>这个程序计算单个事件和一组给定的台站。</p>
<p>输入db的路径，结合sta和stachan：short <strong>这两个文件一开始就有</strong><br>short是指<code>shrot.site</code>这个文件和<code>short.sitechan</code>文件，‘结合sta，stachan’可能是指这两个文件。</p>
<p>文件内容如下：<br><img src="short%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9.png"></p>
<p>输入nmodes列表的文件名 ：<code>db_list</code> <strong>这个文件一开始就有</strong></p>
<p>db_list文件内容为：</p>
<pre><code>test_S
test_T
</code></pre>
<p>输入CMT文件名： <code>china_cmt_event</code> <strong>这个文件一开始就有</strong></p>
<p>考虑的最小和最大频率（单位mHz）：10 260</p>
<p>输入pts</p>
<p>输入格林函数的输出文件名：<code>green</code>。这个程序输出的文件为：<code>green.wfdisc</code><br><strong>这个文件内容与屏幕输出不同，但是其包含的内容一致。均为台站、通道、时间等信息。</strong></p>
<p>输出依然存在：</p>
<pre><code>real	0m1.471s
user	0m1.455s
sys	0m0.015s
</code></pre>
<h3 id="第六步：构建理论地震图"><a href="#第六步：构建理论地震图" class="headerlink" title="第六步：构建理论地震图"></a>第六步：构建理论地震图</h3><p>使用的程序为：<code>syndat.f</code></p>
<p><em>syndat program makes synthetic seismograms by convolutions of Green<br>functions with the seismic moment tensor of the choosen event.</em></p>
<p><strong>选择的事件的地震矩张量和格林函数的卷积，得到理论地震图。</strong></p>
<p>输入CMT文件名：<code>china_cmt_event</code><br>张量类型： 0</p>
<p>输入dbname： green</p>
<p>输出dbname：SYndat</p>
<p>输出单位： 0 [nm&#x2F;s&#x2F;s] 1 [nm&#x2F;s] 2 [nm]<br>（可能并没有选择输出单位？屏幕输出仅为此。）</p>
<p>该程序最后输出的文件为：<code>syndat.wfdisc</code>。</p>
<p>也输出了<code>.origin</code>、<code>.site</code>、<code>.sitechan</code>文件。</p>
<p>也有<code>Syndat.wfdisc.dat</code>，里面应该是理论地震图。</p>
<p>之后需要运行将理论地震图转换为sac格式的程序。这一步为运行2的内容。</p>
<h2 id="运行2"><a href="#运行2" class="headerlink" title="运行2"></a>运行2</h2><pre><code>cucss2sac Syndat Syndat_SAC
</code></pre>
<p>将理论地震图转化为sac格式，并保存在Syndat_SAC文件夹中。</p>
<h2 id="运行3"><a href="#运行3" class="headerlink" title="运行3"></a>运行3</h2><pre><code>cucss2sac -a Syndat Syndat_ASC
</code></pre>
<p>转化为ASC格式，即ASCII文件。</p>
<h2 id="运行4"><a href="#运行4" class="headerlink" title="运行4"></a>运行4</h2><pre><code>./RUN_ENDIAN.csh Syndat
./RUN_ENDIAN.csh  green
</code></pre>
<p>把这两个文件波形从LOW_ENDIAN bytes转换到BIG_ENDIAN bytes</p>
<p>如果有ANTELOPE软件，可以在SUN‘s平台直接看到结果（格林函数和理论地震图）</p>
<pre><code>dbpick Syndat 
dbpick green
</code></pre>
<p>目前还没有找到软件。</p>
<h2 id="运行5"><a href="#运行5" class="headerlink" title="运行5"></a>运行5</h2><pre><code>eigen2asc 0 0 6 8 test_S test_S_ASC
</code></pre>
<p>将eigen文件转化为asc文件。</p>
<h1 id="BASH-运行文件（原DEMO3内RUN-MINEOS-csh，经过了修改）"><a href="#BASH-运行文件（原DEMO3内RUN-MINEOS-csh，经过了修改）" class="headerlink" title="BASH 运行文件（原DEMO3内RUN_MINEOS.csh，经过了修改）"></a>BASH 运行文件（原DEMO3内RUN_MINEOS.csh，经过了修改）</h1><ul>
<li>增加了STEP0，生成.site和.sitechan文件。</li>
<li>增加了STEP7，内容为将Syndat转化为SAC格式。</li>
<li>修改了china_cmt_event为xinjiang_cmt_event。内容为另一个地震事件。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/csh</span><br><span class="line">#</span><br><span class="line"># Example of the synthetic seismogram&#x27;s generation script.</span><br><span class="line">#</span><br><span class="line"># Usage: RUN_MINEOS.sh model_name</span><br><span class="line"># </span><br><span class="line"># Available model names for DEMO version:</span><br><span class="line"># prem_noocean  prem_ocean CPacific NRussia</span><br><span class="line">#----------------------------------------------------------</span><br><span class="line">if( $#argv != 1) then</span><br><span class="line">echo &quot; Usage: RUN_MIN.csh model_name&quot;</span><br><span class="line">exit</span><br><span class="line">endif</span><br><span class="line">alias cp cp</span><br><span class="line">alias rm rm</span><br><span class="line">alias mv mv</span><br><span class="line">set model=$1                # setup 1-D model name</span><br><span class="line"># check model name</span><br><span class="line">set flg=0</span><br><span class="line">foreach f (CPacific NRussia prem_noocean prem_noocean_na prem_ocean prem_noocean_1ln.txt)</span><br><span class="line">if($f == $1) set flg=1</span><br><span class="line">end</span><br><span class="line">if($flg == 0) then</span><br><span class="line">echo &quot;Model name $1 is wrong, allowed names are:&quot;</span><br><span class="line">echo &quot;CPacific NRussia prem_noocean prem_noocean_na prem_ocean prem_noocean_1ln.txt&quot;</span><br><span class="line">exit</span><br><span class="line">endif</span><br><span class="line">#----------------------------------------------------------------</span><br><span class="line"># Step 0 </span><br><span class="line"># make .site and .sitechan </span><br><span class="line">time simpledit stations short</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># 1 run minos_bran for S mpde</span><br><span class="line"># n=0, f 0-200mhz</span><br><span class="line">echo &quot;Step 1:  minos_bran runs for S modes .....................&quot;</span><br><span class="line">echo &quot;============== Program minos_bran ==================&quot;</span><br><span class="line">if( -f $&#123;model&#125;_S) rm -f $&#123;model&#125;_S # 存在的话移除掉</span><br><span class="line">if( -f e$&#123;model&#125;_S) rm -f e$&#123;model&#125;_S</span><br><span class="line">time minos_bran &lt;&lt; EOF</span><br><span class="line">../models/$model.txt</span><br><span class="line">$&#123;model&#125;_S</span><br><span class="line">e$&#123;model&#125;_S</span><br><span class="line">1.0e-10 1</span><br><span class="line">3</span><br><span class="line">2 8000 0.0 200.0 0 0</span><br><span class="line">EOF</span><br><span class="line">#=========================================================</span><br><span class="line"># 2. run minos_bran program for fundamental T  mode,</span><br><span class="line"># where,  n=0, 0 &lt; f &lt;  0.2 Hz,</span><br><span class="line">#</span><br><span class="line">echo &quot;Step 2: minos_bran runs for T modes .....................&quot;</span><br><span class="line">echo &quot;============== Program minos_bran ==================&quot;</span><br><span class="line">if( -f $&#123;model&#125;_T) rm -f $&#123;model&#125;_T</span><br><span class="line">if( -f e$&#123;model&#125;_T) rm -f e$&#123;model&#125;_T</span><br><span class="line">time minos_bran &lt;&lt; EOF</span><br><span class="line">../models/$model.txt</span><br><span class="line">$&#123;model&#125;_T</span><br><span class="line">e$&#123;model&#125;_T</span><br><span class="line">1.0e-10 1</span><br><span class="line">2</span><br><span class="line">2 8000 0.0 200.0 0 0</span><br><span class="line">EOF</span><br><span class="line">#============================================================</span><br><span class="line"># 3. Convert minos_bran results to .eigen relation (S mode)</span><br><span class="line">#</span><br><span class="line">echo &quot;Step 3: eigen for S .....................................&quot;</span><br><span class="line">if( -f test_S.eigen) rm -rf test_S.*</span><br><span class="line">time eigcon &lt;&lt; EOF</span><br><span class="line">3</span><br><span class="line">../models/$model.txt</span><br><span class="line">1000</span><br><span class="line">$&#123;model&#125;_S</span><br><span class="line">e$&#123;model&#125;_S</span><br><span class="line">test_S</span><br><span class="line">EOF</span><br><span class="line">#============================================================</span><br><span class="line"># 4. Convert minos_bran results to .eigen relation (T mode)</span><br><span class="line">echo &quot;Step 4: eigen for T .....................................&quot;</span><br><span class="line">if( -f test_T.eigen) rm -rf test_T.*</span><br><span class="line">time eigcon &lt;&lt; EOF</span><br><span class="line">2</span><br><span class="line">../models/$model.txt</span><br><span class="line">1000</span><br><span class="line">$&#123;model&#125;_T</span><br><span class="line">e$&#123;model&#125;_T</span><br><span class="line">test_T</span><br><span class="line">EOF</span><br><span class="line">#=========================================================</span><br><span class="line"># 5. Evaluate green functions for given sitechan relation</span><br><span class="line">echo &quot;Step 5: green functions evaluation .........................&quot;</span><br><span class="line">if( -f green.wfdisc) rm -rf green.*</span><br><span class="line">time green &lt;&lt; EOF</span><br><span class="line">short</span><br><span class="line">db_list</span><br><span class="line">xinjiang_cmt_event</span><br><span class="line">10 260</span><br><span class="line">8000</span><br><span class="line">green</span><br><span class="line">EOF</span><br><span class="line">cp -p short.site green.site</span><br><span class="line">cp -p short.sitechan green.sitechan</span><br><span class="line"># create origin relation for data base green</span><br><span class="line">creat_origin xinjiang_cmt_event green</span><br><span class="line">#============================================================</span><br><span class="line"># 6. Synthetic data construction</span><br><span class="line">echo &quot;Step 6: synthetic seismogram construction ..................&quot;</span><br><span class="line">if( -f Syndat.wfdisc) rm -rf Syndat.*</span><br><span class="line">time syndat &lt;&lt; EOF</span><br><span class="line">xinjiang_cmt_event</span><br><span class="line">0</span><br><span class="line">green</span><br><span class="line">Syndat</span><br><span class="line">0</span><br><span class="line">EOF</span><br><span class="line"># convert Green functions to BIG_ENDIAN binary numerical storage</span><br><span class="line"># this is ANTELOPE requirement</span><br><span class="line"># $bin/wfendi 0 0 Syndat Syndat</span><br><span class="line"># copy .site, .sitechan relations into database Syndat</span><br><span class="line">cp -p short.site Syndat.site</span><br><span class="line">cp -p short.sitechan Syndat.sitechan</span><br><span class="line">creat_origin xinjiang_cmt_event Syndat</span><br><span class="line"># =====================================================</span><br><span class="line">#7.MAKE SAC TRANSFORM</span><br><span class="line">echo &quot;Step 7: SAC transform&quot;</span><br><span class="line">time cucss2sac Syndat Syndat_SAC</span><br><span class="line">echo &quot;over&quot;</span><br><span class="line">exit</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhiyuanshi1901.github.io/2022/12/21/CentOS%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2x-ui%E4%B8%8Ev2rayn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/21/CentOS%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2x-ui%E4%B8%8Ev2rayn/" class="post-title-link" itemprop="url">CentOS服务器部署x-ui与v2rayn</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-12-21 21:09:15 / Modified: 22:23:20" itemprop="dateCreated datePublished" datetime="2022-12-21T21:09:15+08:00">2022-12-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E8%B7%B5/" itemprop="url" rel="index"><span itemprop="name">Linux服务器实践</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h1><p>[阿帅同学分享的不知名来源的教程]<br><a target="_blank" rel="noopener" href="https://github.com/v2fly/v2ray-core/releases">v2rayN_github</a><br><a target="_blank" rel="noopener" href="https://v2rayn.org/">v2rayN官网</a><br><a target="_blank" rel="noopener" href="https://v2rayng.org/">移动端v2rayNG官网</a><br><a target="_blank" rel="noopener" href="https://github.com/vaxilu/x-ui">x-ui</a><br><a target="_blank" rel="noopener" href="https://github.com/bedefaced/vpn-install">V-Install</a></p>
<p><strong>注意：以下服务器配置过程均在服务器中进行，请勿在PC上进行，具体后果未知。</strong></p>
<h1 id="购买服务器"><a href="#购买服务器" class="headerlink" title="购买服务器"></a>购买服务器</h1><p>使用阿里云轻量应用服务器即可，最低配置每月仅24元。此处选用新加坡的服务器（香港优先，但是已经售罄）。</p>
<h1 id="连接服务器并进行配置"><a href="#连接服务器并进行配置" class="headerlink" title="连接服务器并进行配置"></a>连接服务器并进行配置</h1><p>推荐使用root用户登录。可以不使用<code>sudo</code>命令。</p>
<h2 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h2><pre><code>yum install git
</code></pre>
<h2 id="clone-V-install库"><a href="#clone-V-install库" class="headerlink" title="clone V-install库"></a>clone V-install库</h2><pre><code>git clone --depth=1 https://github.com/bedefaced/vpn-install.git
</code></pre>
<h2 id="安装V-install"><a href="#安装V-install" class="headerlink" title="安装V-install"></a>安装V-install</h2><p>分别安装PPTP、openvpn和IPSEC。</p>
<pre><code>vpn-install/pptp/install.sh
vpn-install/openvpn/install.sh
vpn-install/ipsec/install.sh
</code></pre>
<p>安装过程中进行配置。不知道的直接输入1或者回车就可以，不用单独设置。<br>用户名、密码和PSK需要自行设置，并且需要牢记。</p>
<h2 id="安装x-ui"><a href="#安装x-ui" class="headerlink" title="安装x-ui"></a>安装x-ui</h2><p>运行：</p>
<pre><code>bash &lt;(curl -Ls https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh)
</code></pre>
<p>安装过程中需要设置面板端口，随便输入一个1到65535数字即可。<br>面板端口牢记，之后会用到。例如这里设置为8888（宝塔面板的端口），以下示例中端口改为自行设置的端口，不推荐设置8888。</p>
<h1 id="配置防火墙"><a href="#配置防火墙" class="headerlink" title="配置防火墙"></a>配置防火墙</h1><p>如果端口不在防火墙白名单里，则不能连接。在阿里云控制台中配置防火墙。</p>
<p>在控制台左侧，安全-防火墙一栏中，预设有三个可通过防火墙的端口。<br>点击<code>添加规则</code>，依次选择：</p>
<ul>
<li>应用类型：自定义，</li>
<li>协议：TCP</li>
<li>端口范围： 8888</li>
<li>限制IP来源：不要修改</li>
<li>备注：按照自己的想法填写即可</li>
</ul>
<p>点击确定后，这个端口不会被拦截。</p>
<h1 id="配置x-ui面板"><a href="#配置x-ui面板" class="headerlink" title="配置x-ui面板"></a>配置x-ui面板</h1><p>在浏览器官网输入：公网IP:x-ui设置的端口，例如：192.168.0.1:8888。<br>其中，192.168.0.1为公网IP，8888为设置的端口，便可进入到x-ui面板。</p>
<p><strong>注：公网IP地址在控制台<code>概览</code>页面。</strong></p>
<p>如果无法进入，很可能是防火墙设置不正确，或者服务器中x-ui未运行。</p>
<p>点击<code>入站列表</code>，左上角的蓝色加号。</p>
<p><img src="%E8%AE%BE%E7%BD%AE%E8%8A%82%E7%82%B9.png" alt="节点"></p>
<ul>
<li>备注：填写节点的名称，选择一个好记又方便的名称即可。</li>
<li>协议：默认选择vmess即可，也可以选择其他的。因水平有限未进行测试。</li>
<li>端口：可以随意修改，但是注意要在防火墙开放，具体操作在配置防火墙一栏。</li>
<li>传输：默认使用tcp即可，也可以使用ws，但是可能需要额外设置。因水平有限未进行测试。</li>
<li>其余选项可以默认不修改。总流量设置可以设置限制。</li>
</ul>
<p>点击添加即可。</p>
<p>完成后，点击操作，二维码。保存这个二维码，亦可以不保存进入网站查找。</p>
<h1 id="设置v2rayN"><a href="#设置v2rayN" class="headerlink" title="设置v2rayN"></a>设置v2rayN</h1><p>注：一定要下载core版本，否则可能无法使用。<br>下载地址：<a target="_blank" rel="noopener" href="https://github.com/2dust/v2rayN/releases">https://github.com/2dust/v2rayN/releases</a><br>在中间列表空白处点击右键，选择<code>扫描屏幕上的二维码</code>。点击之前，<br>先调出上一步得到的二维码。此时可以自动将服务器导入。</p>
<p>然后对服务器一栏右键，点击<code>设为活动服务器</code></p>
<p>在右下角的最小化软件图标，点击右键，设置<code>系统代理</code>-<code>自动配置系统代理</code>（此时图标由蓝色变红色）；<br><code>路由</code>-<code>Whitelist</code>；即可使用科学上网。</p>
<p><code>系统代理</code>-<code>清除系统代理</code>：即可关闭科学上网。<br>注意： 如上操作<code>系统代理</code>实测可以实现科学上网的开启与关闭，但是不了解具体含义。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>阿里云轻量应用服务器-新加坡服务器实测延迟足够使用，在80ms以内。<br>目前该操作仅适用于Windows PC。</p>
<p>由于该操作使用的服务器只有命令行界面，因此需要一定的Linux基础。</p>
<p>使用过程中发现去掉图形化界面的Linux十分轻快简洁，如果有必要可以在Linux PC去除图形界面操作。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhiyuanshi1901.github.io/2022/12/13/CentOS%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/13/CentOS%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">CentOS安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-12-13 13:28:36 / Modified: 13:39:20" itemprop="dateCreated datePublished" datetime="2022-12-13T13:28:36+08:00">2022-12-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">Linux学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="CentOS-7-安装"><a href="#CentOS-7-安装" class="headerlink" title="CentOS 7 安装"></a>CentOS 7 安装</h1><p>CentOS7 安装会出现一群企鹅，以及：</p>
<pre><code>....
kernel panic: not syncing: Fatal exception
Kernel Offset: ........
...
</code></pre>
<p>以上为部分错误。<br>硬件：<br>CPU: Ryzen 5600G<br>主板: Minisforum B550</p>
<p>不确定是否为硬件问题，但是显示内核错误。<br>可能是使用Windows平台烧录软件造成的问题，包括Deepin官方烧录软件和rufus均出现这个问题。<br>目前未尝试Linux平台烧录软件。</p>
<h1 id="CentOS-8-安装"><a href="#CentOS-8-安装" class="headerlink" title="CentOS 8 安装"></a>CentOS 8 安装</h1><p>CentOS 8 安装之前，在<code>Install CentOS 8</code>处点击键盘 <code>E</code> 按键，将第一行的：</p>
<pre><code>LABEL=CentOS\...... quiet
</code></pre>
<p>其中，<code>CentOS\...</code> 改为使用的U盘名称。</p>
<p>使用 <code>Ctrl</code> + <code>X</code> 重新加载即可。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhiyuanshi1901.github.io/2022/12/13/CentOS8%E5%AE%89%E8%A3%85%E4%B8%AD%E5%9B%BD%E7%89%88Firefox/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhiyuan Shi">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/13/CentOS8%E5%AE%89%E8%A3%85%E4%B8%AD%E5%9B%BD%E7%89%88Firefox/" class="post-title-link" itemprop="url">CentOS8安装中国版Firefox</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-12-13 12:57:20 / Modified: 13:43:56" itemprop="dateCreated datePublished" datetime="2022-12-13T12:57:20+08:00">2022-12-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">Linux学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>安装类似于Ubuntu安装方法。在desktop文件中有所差别。</p>
<p>首先将提取的包移动到相应位置</p>
<pre><code>sudo mv firefox /usr/local
</code></pre>
<p>然后创建desktop文件，命名为firefox.desktop：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Name=firefox</span><br><span class="line">Version=1.0</span><br><span class="line">Name[zh_CN]=火狐浏览器</span><br><span class="line">GenericName=Web Browser</span><br><span class="line">Comment=火狐浏览器</span><br><span class="line">Exec=/usr/local/firefox/firefox # 软件安装位置</span><br><span class="line">Icon=/usr/local/firefox/browser/chrome/icons/default/default128.png # 图标所在位置</span><br><span class="line">Terminal=false</span><br><span class="line">Type=Application</span><br><span class="line">MimeType=text/html;text/xml;application/xhtml+xml;application/vnd.mozilla.xul+xml;text/mml;x-scheme-handler/http;x-scheme-handler/https;</span><br><span class="line">StartupNotify=true</span><br><span class="line">Categories=Network;WebBrowser;</span><br><span class="line">Encoding=UTF-8</span><br></pre></td></tr></table></figure>

<p>将desktop文件移动到<code>/usr/share</code>下的<code>/applications</code>文件夹。</p>
<pre><code>sudo cp firefox.desktop /usr/share/applicaions
</code></pre>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="http://wjhsh.net/szwmd778-p-9944992.html">http://wjhsh.net/szwmd778-p-9944992.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/default%20=%20''/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/default%20=%20''/page/5/">5</a><a class="extend next" rel="next" href="/default%20=%20''/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  





</body>
</html>
