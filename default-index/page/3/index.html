<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.0" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="Seismology Learning Note and Personal Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="about">
<meta property="og:url" content="https://shizhiyuan.work/about/index.html">
<meta property="og:site_name" content="Seismology Learning">
<meta property="og:description" content="Seismology Learning Note and Personal Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-04-25T02:20:01.000Z">
<meta property="article:modified_time" content="2024-04-25T02:22:19.259Z">
<meta property="article:author" content="Shi Zhiyuan">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '6.0.0',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://shizhiyuan.work/about/"/>





  <title>Seismology Learning</title>
  








<meta name="generator" content="Hexo 7.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Seismology Learning</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Seismology Learning Note</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://shizhiyuan.work/2024/04/14/%E9%9C%87%E6%BA%90%E5%8F%82%E6%95%B0%E4%B8%8E%E5%9D%90%E6%A0%87%E7%B3%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/log.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Seismology Learning">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/04/14/%E9%9C%87%E6%BA%90%E5%8F%82%E6%95%B0%E4%B8%8E%E5%9D%90%E6%A0%87%E7%B3%BB/" itemprop="url">震源参数与坐标系</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-04-14T21:51:48+08:00">2024-04-14</time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%9C%B0%E9%9C%87%E5%AD%A6%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index">
                    <span itemprop="name">地震学基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本文简介一些软件&#x2F;数据中关于震源参数的计算与坐标系问题。</p>
<h1 id="1-CMT-ndk格式数据"><a href="#1-CMT-ndk格式数据" class="headerlink" title="1 CMT .ndk格式数据"></a>1 CMT .ndk格式数据</h1><p>Global CMT网站提供了详细的地震矩张量和断层参数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The six moment-tensor elements: Mrr, Mtt, Mpp, Mrt, Mrp, Mtp, where r</span><br><span class="line">is up, t is south, and p is east. See Aki and Richards for conversions</span><br><span class="line">to other coordinate systems. The value of each moment-tensor</span><br><span class="line">element is followed by its estimated standard error. See note (4)</span><br><span class="line">below for cases in which some elements are constrained in the inversion.</span><br></pre></td></tr></table></figure>

<p>断层参数一般有两组，其对应的矩张量相同：（此处暂留疑问：正北方向为地理正北or地磁正北？） 见（《地震学、震源及地球结构概论》 P206 图4.2-2）</p>
<ul>
<li>strike 走向：断层延伸方向与正北方向夹角 0-360度</li>
<li>dip 倾角：断层面与倾向夹角 0-90度</li>
<li>rake(slip) 走滑角：断层上盘相对下盘滑动方向与走向的夹角 0-180度</li>
<li>Scalar Moment 地震矩标量：表征地震释放能量</li>
</ul>
<p>矩张量使用的坐标系为（Up, South, East）,即（r, θ, φ）。参考（Aki, Quantitative Seismology, P113）。</p>
<p>注意：使用（Aki, Quantitative Seismology, P112）公式，并进行坐标变换之后，计算值与Global CMT给出的矩张量分量不同，目前未知原因。</p>
<h1 id="MINEOS-使用的坐标系"><a href="#MINEOS-使用的坐标系" class="headerlink" title="MINEOS 使用的坐标系"></a>MINEOS 使用的坐标系</h1><p>坐标系与<code>1 CMT .ndk</code>格式数据相同。</p>
<h1 id="Instaseis-使用的坐标系"><a href="#Instaseis-使用的坐标系" class="headerlink" title="Instaseis 使用的坐标系"></a>Instaseis 使用的坐标系</h1><p>参考<a target="_blank" rel="noopener" href="https://instaseis.net/source.html#instaseis.source.ForceSource">https://instaseis.net/source.html#instaseis.source.ForceSource</a></p>
<p>Python包 <code>instaseis</code> 使用 <code>Source</code> 属性计算震源参数、使用<code>Reveiver</code>归纳台站参数。</p>
<p>其可以使用多重方式给出震源参数。</p>
<h2 id="Source-源"><a href="#Source-源" class="headerlink" title="Source 源"></a>Source 源</h2><h3 id="直接给出矩张量"><a href="#直接给出矩张量" class="headerlink" title="直接给出矩张量"></a>直接给出矩张量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">instaseis.Source(latitude, longitude, depth_in_m=None, m_rr=0.0, m_tt=0.0, m_pp=0.0, m_rt=0.0, m_rp=0.0, m_tp=0.0, time_shift=None, sliprate=None, dt=None, origin_time=UTCDateTime(1970, 1, 1, 0, 0))</span><br></pre></td></tr></table></figure>
<p>实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">M=np.zeros(6)</span><br><span class="line">M[0] = 1.E18</span><br><span class="line">src = instaseis.Source(latitude=0., longitude=0., depth_in_m=10e4, m_rr=M[0], m_tt=M[1], m_pp=M[2], m_rt=M[3],</span><br><span class="line">                 m_rp=M[4], m_tp=M[5])</span><br></pre></td></tr></table></figure>
<p>其中，Source的参数为：（可以通过<code>source.参数名</code>调取，下同）</p>
<ul>
<li>atitude – geocentric latitude of the source in degree</li>
<li>longitude – longitude of the source in degree</li>
<li>depth_in_m – source depth in m</li>
<li>m_rr – moment tensor components in r, theta, phi in Nm</li>
<li>m_tt – moment tensor components in r, theta, phi in Nm</li>
<li>m_pp – moment tensor components in r, theta, phi in Nm</li>
<li>m_rt – moment tensor components in r, theta, phi in Nm</li>
<li>m_rp – moment tensor components in r, theta, phi in Nm</li>
<li>m_tp – moment tensor components in r, theta, phi in Nm</li>
<li>time_shift – correction of the origin time in seconds. Useful in the context of finite source or user defined source time functions.</li>
<li>sliprate – normalized source time function (sliprate)</li>
<li>dt – sampling of the source time function</li>
<li>origin_time – The origin time of the source. If you don’t reconvolve with another source time function this time is the peak of the source time function used to generate the database. If you reconvolve with another source time function this time is the time of the first sample of the final seismogram.</li>
</ul>
<h3 id="给出震源断层参数"><a href="#给出震源断层参数" class="headerlink" title="给出震源断层参数"></a>给出震源断层参数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">instaseis.Source.from_strike_dip_rake(latitude, longitude, depth_in_m, strike, dip, rake, M0, time_shift=None, sliprate=None, dt=None, origin_time=UTCDateTime(1970, 1, 1, 0, 0))</span><br></pre></td></tr></table></figure>
<p>实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source = instaseis.Source.from_strike_dip_rake(</span><br><span class="line">    latitude=10.0, longitude=12.0, depth_in_m=1000, strike=strike, dip=dip, rake=rake, M0=M0)</span><br></pre></td></tr></table></figure>
<p>参数为：</p>
<ul>
<li>latitude – geocentric latitude of the source in degree</li>
<li>longitude – longitude of the source in degree</li>
<li>depth_in_m – source depth in m</li>
<li>strike – strike of the fault in degree</li>
<li>dip – dip of the fault in degree</li>
<li>rake – rake of the fault in degree</li>
<li>M0 – scalar moment</li>
<li>time_shift – correction of the origin time in seconds. only useful in the context of finite sources</li>
<li>sliprate – normalized source time function (sliprate)</li>
<li>dt – sampling of the source time function</li>
<li>origin_time – The origin time of the source. If you don’t reconvolve with another source time function this time is the peak of the source time function used to generate the database. If you reconvolve with another source time function this time is the time of the first sample of the final seismogram.</li>
</ul>
<h3 id="给出parse文件"><a href="#给出parse文件" class="headerlink" title="给出parse文件"></a>给出parse文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source = instaseis.Source.parse(quakeml_file)</span><br></pre></td></tr></table></figure>
<p>quakeml_file: </p>
<h3 id="Source-返回值具有的属性："><a href="#Source-返回值具有的属性：" class="headerlink" title="Source 返回值具有的属性："></a>Source 返回值具有的属性：</h3><h4 id="上述的所有参数"><a href="#上述的所有参数" class="headerlink" title="上述的所有参数"></a>上述的所有参数</h4><h4 id="tensor-包含六个矩张量的List，分量为-m-rr-m-tt-m-pp-m-rt-m-rp-m-tp"><a href="#tensor-包含六个矩张量的List，分量为-m-rr-m-tt-m-pp-m-rt-m-rp-m-tp" class="headerlink" title="tensor 包含六个矩张量的List，分量为[m_rr, m_tt, m_pp, m_rt, m_rp, m_tp]"></a>tensor 包含六个矩张量的List，分量为<code>[m_rr, m_tt, m_pp, m_rt, m_rp, m_tp]</code></h4><h4 id="tensor-voigt，进行了坐标旋转，分量为-m-tt-m-pp-m-rr-m-rp-m-rt-m-tp"><a href="#tensor-voigt，进行了坐标旋转，分量为-m-tt-m-pp-m-rr-m-rp-m-rt-m-tp" class="headerlink" title="tensor_voigt，进行了坐标旋转，分量为[m_tt, m_pp, m_rr, m_rp, m_rt, m_tp]"></a>tensor_voigt，进行了坐标旋转，分量为<code>[m_tt, m_pp, m_rr, m_rp, m_rt, m_tp]</code></h4><h2 id="ForceSource-力源"><a href="#ForceSource-力源" class="headerlink" title="ForceSource 力源"></a>ForceSource 力源</h2><h3 id="给出牵引力三分量"><a href="#给出牵引力三分量" class="headerlink" title="给出牵引力三分量"></a>给出牵引力三分量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ForceSource(latitude, longitude, depth_in_m=None, f_r=0.0, f_t=0.0, f_p=0.0, origin_time=UTCDateTime(1970, 1, 1, 0, 0), sliprate=None, time_shift=None, dt=None)</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source = instaseis.ForceSource(latitude=12.34, longitude=12.34, f_r=1E10)</span><br></pre></td></tr></table></figure>
<p>参数为：</p>
<ul>
<li>latitude – geocentric latitude of the source in degree</li>
<li>longitude – longitude of the source in degree</li>
<li>depth_in_m – source depth in m</li>
<li>f_r – force components in r, theta, phi in N</li>
<li>f_t – force components in r, theta, phi in N</li>
<li>f_p – force components in r, theta, phi in N</li>
<li>origin_time – The origin time of the source. If you don’t reconvolve with another source time function this time is the peak of the source time function used to generate the database. If you reconvolve with another source time function this time is the time of the first sample of the final seismogram.</li>
<li>sliprate – normalized source time function (sliprate)</li>
<li>time_shift – correction of the origin time in seconds. Useful in the context of finite source or user defined source time functions.</li>
<li>dt – sampling of the source time function</li>
</ul>
<h3 id="ForceSource-返回值具有的属性："><a href="#ForceSource-返回值具有的属性：" class="headerlink" title="ForceSource 返回值具有的属性："></a>ForceSource 返回值具有的属性：</h3><h4 id="上述的所有参数-1"><a href="#上述的所有参数-1" class="headerlink" title="上述的所有参数"></a>上述的所有参数</h4><h4 id="force-rtp-包含三个牵引力分量的List，分量为-f-r-f-t-f-p"><a href="#force-rtp-包含三个牵引力分量的List，分量为-f-r-f-t-f-p" class="headerlink" title="force_rtp 包含三个牵引力分量的List，分量为[f_r, f_t, f_p]"></a>force_rtp 包含三个牵引力分量的List，分量为<code>[f_r, f_t, f_p]</code></h4><h4 id="force-tpr，进行了坐标旋转，分量为-f-t-f-p-f-r"><a href="#force-tpr，进行了坐标旋转，分量为-f-t-f-p-f-r" class="headerlink" title="force_tpr，进行了坐标旋转，分量为[f_t, f_p, f_r]"></a>force_tpr，进行了坐标旋转，分量为<code>[f_t, f_p, f_r]</code></h4><h2 id="FiniteSource-有限源"><a href="#FiniteSource-有限源" class="headerlink" title="FiniteSource 有限源"></a>FiniteSource 有限源</h2><p>相关内容详见参考<a target="_blank" rel="noopener" href="https://instaseis.net/source.html#instaseis.source.ForceSource">https://instaseis.net/source.html#instaseis.source.ForceSource</a></p>
<h3 id="给出点源"><a href="#给出点源" class="headerlink" title="给出点源"></a>给出点源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">instaseis.source.FiniteSource(pointsources=None, CMT=None, magnitude=None, event_duration=None, hypocenter_longitude=None, hypocenter_latitude=None, hypocenter_depth_in_m=None)</span><br></pre></td></tr></table></figure>

<ul>
<li>pointsources (list of Source objects) – The points sources making up the finite source.</li>
<li>CMT (Source, optional) – The centroid of the finite source.</li>
<li>magnitude (float, optional) – The total moment magnitude of the source.</li>
<li>event_duration (float, optional) – The event duration in seconds.</li>
<li>hypocenter_longitude (float, optional) – The hypocentral longitude.</li>
<li>hypocenter_latitude (float, optional) – The hypocentral latitude.</li>
<li>hypocenter_depth_in_m (float, optional) – The hypocentral depth in m.</li>
</ul>
<h2 id="Receiver-台站"><a href="#Receiver-台站" class="headerlink" title="Receiver 台站"></a>Receiver 台站</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Receiver(latitude, longitude, network=None, station=None, location=None, depth_in_m=None)</span><br></pre></td></tr></table></figure>
<p>实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rec = Receiver(latitude=12.34, longitude=56.78, network=&quot;AB&quot;,</span><br><span class="line">               station=&quot;CDE&quot;, location=&quot;SY&quot;)</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<ul>
<li>latitude (float) – The geocentric latitude of the receiver in degree.</li>
<li>longitude (float) – The longitude of the receiver in degree.</li>
<li>depth_in_m (float) – The depth of the receiver in meters. Only</li>
<li>network (str, optional) – The network id of the receiver.</li>
<li>station (str, optional) – The station id of the receiver.</li>
<li>location (str) – The location code of the receiver.</li>
</ul>
<h1 id="SPECNM-使用的坐标系"><a href="#SPECNM-使用的坐标系" class="headerlink" title="SPECNM 使用的坐标系"></a>SPECNM 使用的坐标系</h1><p>与 <code>Instaseis 使用的坐标系</code> 相同，使用 instaseis.Source 与 instaseis.Receiver 创建相关震源、台站信息。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/default-index/page/2/">&lt;</a><a class="page-number" href="/default-index/">1</a><a class="page-number" href="/default-index/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/default-index/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/default-index/page/62/">62</a><a class="extend next" rel="next" href="/default-index/page/4/">&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/log.png"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/">
              
                  <span class="site-state-item-count">62</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">33</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/ZhiyuanShi1901" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:Shizhiyuan2001@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/ShiZhiyuan_Seis" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://youtube.com/@user-bu6jx5vo6b" target="_blank" title="YouTube">
                      
                        <i class="fa fa-fw fa-youtube"></i>YouTube</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://instagram.com/@dshi78066" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/shi-zhi-yuan-84" target="_blank" title="Zhihu">
                      
                        <i class="fa fa-fw fa-zhihu"></i>Zhihu</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2022 &mdash; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shi Zhiyuan</span>

  

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Muse</a> v6.0.0</div>




        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.0"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=6.0.0"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=6.0.0"></script>


  

</body>
</html>
